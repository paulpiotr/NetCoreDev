(self.webpackChunk_5_112_1332=self.webpackChunk_5_112_1332||[]).push([[6694],{6694:(e,t,r)=>{e.exports=function(e){var t={};function r(o){if(t[o])return t[o].exports;var l=t[o]={exports:{},id:o,loaded:!1};return e[o].call(l.exports,l,l.exports,r),l.loaded=!0,l.exports}return r.m=e,r.c=t,r.p="",r(0)}({0:function(e,t,r){e.exports=r(1273)},3:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1048:function(e,t){e.exports=r(4869)},1059:function(e,t){e.exports=r(6758)},1079:function(e,t){e.exports=r(9068)},1094:function(e,t){e.exports=r(971)},1194:function(e,t){e.exports=r(1717)},1195:function(e,t){e.exports=r(7383)},1246:function(e,t){e.exports=r(2116)},1255:function(e,t){e.exports=r(3541)},1258:function(e,t){e.exports=r(6528)},1263:function(e,t){e.exports=r(7281)},1273:function(e,t,r){var o,l,a;(function(n){r(3),l=[r(1059),r(1275),r(1255),r(1195),r(1094),r(1276),r(1277),r(1278),r(1079),r(1279),r(1274),r(1194),r(1280),r(1281),r(1282),r(1283),r(1263),r(1246),r(1282),r(1258)],void 0===(a="function"==typeof(o=function(){return function(e,t){var r,o=window.kendo,l=o.ui,a=o.data.DataSource,i=o.data.ObservableObject,s=o.support.tbodyInnerHtml,d=o._activeElement,c=l.Widget,u=o._outerWidth,p=o._outerHeight,h=o.keys,f=e.isPlainObject,g=e.extend,m=e.map,k=e.grep,_=e.isArray,b=e.inArray,v=Array.prototype.push,C=e.proxy,w=o.isFunction,y=e.isEmptyObject,S=e.contains,T=Math,x="progress",H="error",R=":not(.k-group-cell):not(["+o.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible",I="tr:not(.k-footer-template):visible",E=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",z="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",A=z+":first",D=I+":first>"+E+":first",L="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",F=".kendoGrid",M="edit",P="beforeEdit",W="save",q="remove",V="detailInit",B="filterMenuInit",O="columnMenuInit",G="filterMenuOpen",N="columnMenuOpen",K="cellClose",U="change",j="columnHide",$="columnShow",Q="saveChanges",J="dataBound",Y="detailExpand",X="detailCollapse",Z="itemchange",ee="page",te="paging",re="scroll",oe="sync",le="k-state-focused",ae=":kendoFocusable",ne="k-state-selected",ie="k-checkbox",se="input[data-role='checkbox']."+ie,de="k-grid-norecords",ce="k-grid-content-sticky",ue="k-grid-header-sticky",pe="k-grid-footer-sticky",he="k-grid-no-left-border",fe="resize",ge="columnResize",me="columnReorder",ke="columnLock",_e="columnUnlock",be="columnStick",ve="columnUnstick",Ce="navigate",we="click",ye="height",Se="tabIndex",Te="function",xe="string",He="bottom",Re="container-for",Ie="field",Ee="input",ze="incell",Ae="inline",De="overflow",Le="sort",Fe="group-sort",Me="Collapse",Pe="Expand",We="aria-label",qe=/(\}|\#)/gi,Ve=/#/gi,Be=new RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig"),Oe=new RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig"),Ge=new RegExp("(^|[\\x20\\t\\r\\n\\f])(k-group-cell|k-hierarchy-cell)([\\x20\\t\\r\\n\\f]|$)"),Ne=new RegExp("(^|[\\x20\\t\\r\\n\\f])(k-filter-row)([\\x20\\t\\r\\n\\f]|$)"),Ke=!1,Ue=o.support.browser,je=Ue.msie&&11===Ue.version,$e=/Mac OS/.test(navigator.userAgent),Qe="k-content",Je="k-scroll-container";l.Pager&&(r=l.Pager.extend({init:function(e,t){l.Pager.fn.init.call(this,e,g(!0,{},t)),this.dataSource.options.useRanges=!0,this.dataSource._omitPrefetch=!0},options:{name:"GroupsPager"},totalPages:function(){return Math.ceil((this._collapsedTotal()||0)/(this.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e&&e.groupsTotal(!0)||0}}));var Ye=c.extend({init:function(e,t){var r=this;c.fn.init.call(r,e,t),r._refreshHandler=C(r.refresh,r),r.setDataSource(t.dataSource),r.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(U,t._refreshHandler),t.dataSource=e,t.dataSource.bind(U,t._refreshHandler),t.dataSource.options.useRanges=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[te,ee,re],destroy:function(){var e=this;c.fn.destroy.call(e),e.dataSource.unbind(U,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(F),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,r=this,l=o.support.scrollbar()+1,a=r.element;a.css({width:"auto",overflow:"hidden"}).css(Ke?"padding-left":"padding-right",l),r.content=a.children().first(),t=r.wrapper=r.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+F+" mousewheel"+F,C(r._wheelScroll,r)),r._wrapper(),(o.support.kineticScrollNeeded||o.support.touch)&&(r.wrapper.css("touch-action","none"),r.drag=new o.UserEvents(r.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){r.verticalScrollbar.scrollTop(r.verticalScrollbar.scrollTop()-e.y.delta),o.scrollLeft(t,o.scrollLeft(t)-e.x.delta),e.preventDefault()}})),r.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:l}).appendTo(a).bind("scroll"+F,C(r._scroll,r))},_wrapper:function(){je&&(this.wrapper.css({"overflow-y":re}),this.element.css(Ke?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,r=t.scrollTop(),l=o.wheelDeltaY(e);!l||l>0&&0===r||l<0&&r+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(r+-l))}},_scroll:function(e){var t=this,r=!t.options.prefetch,o=e.currentTarget.scrollTop,l=t.dataSource,a=t.itemHeight,n=l.skip()||0,i=t._rangeStart||n,s=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>o),c=T.max(T.floor(o/a),0),u=d?T.ceil(s/a):T.floor(s/a),p=T.max(c+u,0);t._preventScroll?t._preventScroll=!1:(t._prevScrollTop=t._scrollTop,t._scrollTop=o-i*a,t._scrollbarTop=o,t._scrolling=r,t._fetch(c,p,d)||(t.wrapper[0].scrollTop=t._scrollTop),t.trigger(re),r&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout((function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())}),100)))},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this,t=this.wrapper,r=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&r||e._isScrolledToBottom())&&(t.scrollTop(r+o.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(r-o.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e){var t=this,r=t.verticalScrollbar;r.scrollTop()!==e&&(t._preventScroll=!0),t.wrapper.scrollTop(e),t._scrollTop=t.wrapper.scrollTop(),r.scrollTop(e),t._scrollbarTop=r.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar,t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t,r=this._rangeStart||this.dataSource.skip()||0,o=this.dataSource.pageSize();return(t=e>r?e-r:r-e-1)>o?o:t},scrollIntoView:function(e){var t=this.wrapper[0],r=t.clientHeight,o=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop,l=e[0].offsetTop,a=e[0].offsetHeight;o>l?this.verticalScrollbar[0].scrollTop-=r/2:l+a>=o+r&&(this.verticalScrollbar[0].scrollTop+=r/2)},_fetch:function(t,r,o){var l=this,a=l.dataSource,n=l.itemHeight,i=a.take(),s=l._rangeStart||a.skip()||0,d=T.floor(t/i)*i,c=!1,u=l.verticalScrollbar,p=Ue.webkit?1:0,h=a._isGroupPaged()?a.groupsTotal(!0):a.total();return t<s?(c=!0,s=T.max(0,r-i),l._scrollTop=u.scrollTop()-s*n,l._page(s,i)):r>=s+i&&!o?(c=!0,s=T.min(t,h-i),u.scrollTop()>=u[0].scrollHeight-u[0].offsetHeight-p?l._scrollTop=l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight:l.dataSource._isGroupPaged()&&t>=h-i?l._scrollTop=l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight-(l._scrollTop-l._prevScrollTop):l._scrollTop=n,l._page(s,i)):!l._fetching&&l.options.prefetch&&(t<d+i-.33*i&&t>i&&a.prefetch(d-i,i,e.noop),r>d+.33*i&&a.prefetch(d+i,i,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,r,l){var a=this,n=!a.options.prefetch,i=a.dataSource,s=i._isGroupPaged();l=w(l)?l:e.noop,a.trigger(te,{skip:t,take:r})||(clearTimeout(a._timeout),a._fetching=!0,a._rangeStart=t,s&&i._groupRangeExists(t,t+r)||!s&&i.inRange(t,r)?(o.ui.progress(e(a.wrapper).parent(),!0),i.range(t,r,(function(){o.ui.progress(e(a.wrapper).parent(),!1),l(),a.trigger(ee)}),"page")):(n||o.ui.progress(a.wrapper.parent(),!0),a._timeout=setTimeout((function(){a._scrolling||(n&&o.ui.progress(a.wrapper.parent(),!0),i.range(t,r,(function(){o.ui.progress(a.wrapper.parent(),!1),l(),a.trigger(ee)})))}),100)))},repaintScrollbar:function(e){var t,r,l,a=this,n="",i=a.options.maxScrollHeight,s=a.dataSource,d=o.support.kineticScrollNeeded?0:o.support.scrollbar(),c=a.wrapper[0],u=a._isScrolledToBottom();l=a.itemHeight=a.options.itemHeight()||0;var p=c.scrollWidth>c.offsetWidth?d:0;for(t=(s._isGroupPaged()?s.groupsTotal(!0):s.total())*l+p,r=0;r<T.floor(t/i);r++)n+='<div style="width:1px;height:'+i+'px"></div>';t%i&&(n+='<div style="width:1px;height:'+t%i+'px"></div>'),a.verticalScrollbar.html(n),!u||a._isScrolledToBottom()||a.dataSource._isGroupPaged()||a.scrollToBottom(),void 0!==a._scrollTop&&e&&(c.scrollTop=a._scrollTop,a._scrollWrapperOnColumnResize())},refresh:function(e){var t=this,r=t.dataSource,l=t._rangeStart,a=(e||{}).action,n=t._isScrolledToBottom()||!a||a!==Z&&a!==q&&a!==oe;o.ui.progress(t.wrapper.parent(),!1),clearTimeout(t._timeout),t.repaintScrollbar(n),t.drag&&t.drag.cancel(),void 0===l||t._fetching||((!a||a!==oe&&a!==Z&&"expandGroup"!==a)&&(t._rangeStart=r.skip()),1!==r.page()||a&&(a===oe||a===Z||"expandGroup"===a||"collapseGroup"===a)||(t.verticalScrollbar[0].scrollTop=0)),t._fetching=!1}});function Xe(e,t){return"["+o.attr(e)+"="+t+"]"}function Ze(e){return new Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function et(e){var t,r=" ";if(e){if(typeof e===xe)return e;for(t in e)""!==e[t]&&(r+=t+'="'+e[t]+'"')}return r}var tt={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-icon k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-icon k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-icon k-i-check"},destroy:{text:"Delete",className:"k-grid-delete",iconClass:"k-icon k-i-close"},edit:{text:"Edit",className:"k-grid-edit",iconClass:"k-icon k-i-edit"},update:{text:"Update",className:"k-primary k-grid-update",iconClass:"k-icon k-i-check"},canceledit:{text:"Cancel",className:"k-grid-cancel",iconClass:"k-icon k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-icon k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-icon k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"}};function rt(t,r){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",r)}function ot(t,r,o,l,a){var n=r;r=e(),a=a||1;for(var i=0;i<a;i++)r=r.add(t.eq(n+i));"number"==typeof o?r[l?"insertBefore":"insertAfter"](t.eq(o)):r.appendTo(o)}function lt(t,r,o){return e(t).add(r).find(o)}function at(e,t,r){var o,l,a,n;for(o=0,l=(r=_(r)?r:[r]).length;o<l;o++)a=r[o],f(a)&&a.click&&(n=a.name||a.text,t.on(we+F,"a.k-grid-"+(n||"").replace(/\s/g,""),{commandName:n},C(a.click,e)))}function nt(e,t,r,l,a){return m(e,(function(e){var n;(e=typeof e===xe?{field:e}:e).parentIds=a,gt(e)&&!r||(e.attributes=Xt(e.attributes),e.footerAttributes=Xt(e.footerAttributes),e.headerAttributes=Xt(e.headerAttributes),n=!0);var i=o.guid();return l&&!e.locked&&(e.locked=l),e.headerAttributes=g({headers:a},e.headerAttributes),e.headerAttributes.id?i=e.headerAttributes.id:(e.headerAttributes=g({id:i},e.headerAttributes),e.uid=i),e.columns&&(e.columns=nt(e.columns,t,n,e.locked,a?a+" "+i:i)),g({encoded:t,hidden:n,locked:l},e)}))}function it(e,t){var r=[];return st(e,t,r),r[r.length-1]}function st(e,t,r){r=r||[];for(var o=0;o<t.length;o++){if(e===t[o])return!0;if(t[o].columns){var l=r.length;if(r.push(t[o]),st(e,t[o].columns,r))return!0;r.splice(l,r.length-l)}}return!1}function dt(e,t){ct(e,t,t)}function ct(e,t,r){var o=r?Zt:Xt;e.hidden=!t,e.attributes=o(e.attributes),e.footerAttributes=o(e.footerAttributes),e.headerAttributes=o(e.headerAttributes)}function ut(e,t){pt(e),ct(e,t,e._hideByMedia?e.matchesMedia:t)}function pt(e){e.matchesMedia=ht(e)}function ht(e){return e&&(_t(e.media)||!_t(e.media)&&o.matchesMedia(e.media))}function ft(){return"none"!==this.style.display}function gt(e){return mt([e]).length>0}function mt(e){return k(e,(function(e){var t=!e.hidden&&!1!==e.matchesMedia;return t&&e.columns&&(t=mt(e.columns).length>0),t}))}function kt(e){for(var t,r=[],o=0;o<e.length;o++){if(!_t((t=e[o]).media)){if(!_t(t.minScreenWidth))throw new Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");r.push(t)}t.columns&&(r=r.concat(kt(t.columns)))}return r}function _t(e){return void 0===e}function bt(t){return e(t).map((function(){return this.toArray()}))}function vt(t,r,o,l,a,n,i,s){var d=wt(t),c=wt([r]);if(d>c){var u=new Array(i+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>'),p=n.children(":not(.k-filter-row)");e(new Array(d-c+1).join("<tr>"+u+"</tr>")).insertAfter(p.last())}(function(e,t){for(var r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),o=0;o<r.length;o++)r[o].rowSpan+=t})(n,d-c),yt(o,l,a,n,s)}function Ct(t,r,l){var a;l=l||0;var n=r;r=jt(r);for(var i={},s=t.find(">tr:not(.k-filter-row)"),d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=r.length;c<u;c++)i[(a=St(r[c],n)).row]||(i[a.row]=s.eq(a.row).find(".k-header").filter(d)),i[a.row].eq(a.cell).attr(o.attr("index"),l+c);return r.length}function wt(e){for(var t=0,r=0;r<e.length;r++)if(e[r].columns){var o=wt(e[r].columns);o>t&&(t=o)}return 1+t}function yt(t,r,o,l,a){var n,i=xt(t[0],r),s=o.find(">tr:not(.k-filter-row):eq("+i.row+")>th.k-header"),d=e(),c=i.cell;for(n=0;n<t.length;n++)d=d.add(s.eq(c+n));l.find(">tr:not(.k-filter-row)").eq(i.row)[a](d);var u=[];for(n=0;n<t.length;n++)t[n].columns&&(u=u.concat(t[n].columns));u.length&&yt(u,r,o,l,a)}function St(e,t,r,o){var l,a;for((o=o||{})[r=r||0]=o[r]||0,a=0;a<t.length;a++){if(t[a]==e){l={cell:o[r],row:r};break}if(t[a].columns&&(l=St(e,t[a].columns,r+1,o)))break;o[r]++}return l}function Tt(e,t,r,o,l){if(t.columns)return(t=t.columns)[o?0:t.length-1];var a,n=it(t,e);a=n?n.columns:e;var i=b(t,a);0===i&&o?i++:i==a.length-1&&!o||!r.locked&&!t.columns&&!o?i--:(i>0||0===i&&!o)&&i++,t=function(e,t,r,o){var l,a,n=!!r.locked;do{l=e[t],t+=o?1:-1,a=!!l.locked}while(l&&t>-1&&t<e.length&&l!=r&&!l.columns&&a===n);return l}(a,i,r,b(r,a)>i);var s=b(t,l);return(!t.columns||s&&s!==a.length-1)&&t&&t!=r&&t.columns?Tt(e,t,r,o,l):null}function xt(e,t,r,o){var l,a;for((o=o||{})[r=r||0]=o[r]||0,a=0;a<t.length;a++){if(t[a]==e){l={cell:o[r],row:r};break}if(t[a].columns&&(l=xt(e,t[a].columns,r+1,o)))break;t[a].hidden||o[r]++}return l}function Ht(e){return It(qt(e)).concat(It(Vt(e)))}function Rt(e,t,r,o){var l=e[r],a=e[o],n=it(l,t);return t=n?n.columns:t,b(a,t)}function It(e){for(var t=[],r=[],o=0;o<e.length;o++)t.push(e[o]),e[o].columns&&(r=r.concat(e[o].columns));return r.length&&(t=t.concat(It(r))),t}function Et(e){for(var t,r=0,o=0;o<e.length;o++)(t=e[o]).columns?r+=Et(t.columns):t.hidden&&r++;return r}function zt(e){for(var t=0,r=0,o=e.length;r<o;r++)e[r].hidden||(t+=parseInt(e[r].width,10));return t}function At(e){for(var t,r=0,o=0,l=e.length;o<l;o++)(t=e[o].style.width)&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}function Dt(t){for(var r=t.find("tr:not(.k-filter-row)"),o=r.filter((function(){return!e(this).children().length})).remove().length,l=r.find("th:not(.k-group-cell,.k-hierarchy-cell)"),a=0;a<l.length;a++)l[a].rowSpan>1&&(l[a].rowSpan-=o);return r.length-o}function Lt(e,t,r,o,l){var a,n,i,s=[];for(a=0,i=e.length;a<i;a++)(n=r[o]||[]).push(t.eq(l+a)),r[o]=n,e[a].columns&&(s=s.concat(e[a].columns));s.length&&Lt(s,t,r,o+1,l+e.length)}function Ft(e,t,r){e.css({left:t,right:r})}function Mt(e,t,r){e[t]=e[t]||{},e[t][r]=e[t][r]||""}function Pt(e,t,r,o){Mt(e,t,r),""!==e[t][r]?e[t][r]+=" "+o:e[t][r]=o}function Wt(e,t,r,o){Mt(e,t,r),e[t][r]=e[t][r].replace(o,"")}function qt(e){return k(e,(function(e){return e.locked}))}function Vt(e){return k(e,(function(e){return!e.locked}))}function Bt(e){return k(e,(function(e){return e.sticky&&!e.locked}))}function Ot(e){return k(e,(function(e){return!e.locked&&gt(e)}))}function Gt(e){return k(e,(function(e){return e.locked&&gt(e)}))}function Nt(e){for(var t=[],r=0;r<e.length;r++)e[r].hidden||(e[r].columns?t=t.concat(Nt(e[r].columns)):t.push(e[r]));return t}function Kt(e){for(var t=[],r=0;r<e.length;r++)e[r].columns&&(t=t.concat(e[r].columns));return t}function Ut(e){var t=Kt(e);return t.filter((function(e){return!e.hidden}))}function jt(e){for(var t=[],r=0;r<e.length;r++)e[r].columns?t=t.concat(jt(e[r].columns)):t.push(e[r]);return t}function $t(r){var l=r.find(">tr:not(.k-filter-row)"),a=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},n=e();l.length>1&&(n=l.find("th").filter(a).filter((function(){return this.rowSpan>1}))),n=n.add(l.last().find("th").filter(a));var i=o.attr("index");return n.sort((function(r,o){r=e(r),o=e(o);var l=r.attr(i),a=o.attr(i);return l===t&&(l=e(r).index()),a===t&&(a=e(o).index()),(l=parseInt(l,10))>(a=parseInt(a,10))?1:l<a?-1:0})),n}function Qt(t){var r=t.closest("table"),o=e().add(t),l=t.closest("tr"),a=r.find("tr:not(.k-filter-row)"),n=a.index(l);if(n>0){for(var i=a.eq(n-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return!e(this).attr("rowspan")})),s=0,d=l.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return this.colSpan>1})),u=0;u<c.length;u++)s+=c[u].colSpan||1;for(d+=Math.max(s-1,0),s=0,u=0;u<i.length;u++){var p=i.eq(u);if(p.attr("data-colspan")?s+=p[0].getAttribute("data-colspan"):s+=1,d>=u&&d<s){o=Qt(p).add(o);break}}}return o}function Jt(t){var r=t.closest("thead"),l=e().add(t),a=t.closest("tr"),n=r.find("tr:not(.k-filter-row)"),i=n.index(a)+t[0].rowSpan,s=o.attr("colspan");if(i<=n.length-1){var d,c=a.next(),u=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");u=u.filter((function(){return!this.rowSpan||1===this.rowSpan}));var p=0;for(d=0;d<u.length;d++)p+=parseInt(u.eq(d).attr(s),10)||1;var h=c.find("th:not(.k-group-cell,.k-hierarchy-cell)"),f=parseInt(t.attr(s),10)||1;for(d=0;d<f;){c=h.eq(d+p),l=l.add(Jt(c));var g=parseInt(c.attr(s),10);g>1&&(f-=g-1),d++}}return l}function Yt(t,r,o,l){var a,n=t;return l&&t.empty(),s?t[0].innerHTML=o:((a=document.createElement("div")).innerHTML="<table><tbody>"+o+"</tbody></table>",t=a.firstChild.firstChild,r[0].replaceChild(t,n[0]),t=e(t)),t}function Xt(e){var t=(e=e||{}).style;return t?(t=t.replace(/display:[^;]*/i,"display:none")).match(/display:/i)||(t=t.replace(/(.*)?/i,"display:none;$1")):t="display:none",g({},e,{style:t})}function Zt(e){var t=(e=e||{}).style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function er(t,r,l,a){var n,i=t.find(">colgroup"),s=m(r,(function(e){return(n=e.width)&&0!==parseInt(n,10)?o.format('<col style="width:{0}"/>',typeof n===xe?n:n+"px"):"<col />"}));(l||i.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),i.length&&i.remove(),(i=e(new Array(a+1).join('<col class="k-group-col">')+s.join(""))).is("colgroup")||(i=e("<colgroup/>").append(i)),t.prepend(i)}function tr(e){var t,r,o,l={};for(r=0,o=e.length;r<o;r++)l[(t=e[r]).value]=t.text;return l}function rr(e,t,r,l){var a=r&&r.length&&f(r[0])&&"value"in r[0]?tr(r)[e]:e;return a=null!=a?a:"",t?o.format(t,a):!1===l?a:o.htmlEncode(a)}function or(e,t,r){for(var o=0,l=e[o];l;){if((r||"none"!==l.style.display)&&!Ge.test(l.className)&&--t<0){l.style.display=r?"":"none";break}l=e[++o]}}function lr(t,r){for(var o,l,a=0,n=t.length;a<n;a+=1)(l=t.eq(a)).is(".k-grouping-row,.k-detail-row")?(o=l.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(o.attr("colspan"),10)-1):(l.hasClass("k-grid-edit-row")&&(o=l.children(".k-edit-container")[0])&&((o=e(o)).attr("colspan",parseInt(o.attr("colspan"),10)-1),o.find("col").eq(r).remove(),l=o.find("tr:first")),or(l[0].cells,r,!1))}function ar(e){for(var t,r=[],o=0;o<e.length&&"field"in(t=e[o])&&"value"in t&&"items"in t;o++)r.push(t),t.hasSubgroups&&(r=r.concat(ar(t.items)));return r}function nr(e){for(var t,r=[],o=0;o<e.length&&"field"in(t=e[o])&&"value"in t&&"items"in t;o++)t.hasSubgroups&&(r=r.concat(nr(t.items))),r.push(t.aggregates);return r}function ir(t,r){for(var o,l,a=0,n=t.length;a<n;a+=1)(l=t.eq(a)).is(".k-grouping-row,.k-detail-row")?(o=l.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(o.attr("colspan"),10)+1):(l.hasClass("k-grid-edit-row")&&(o=l.children(".k-edit-container")[0])&&((o=e(o)).attr("colspan",parseInt(o.attr("colspan"),10)+1),er(o.find(">form>table"),mt(undefined),!1,0),l=o.find("tr:first")),or(l[0].cells,r,!0))}function sr(e,t,r){var o,l,a;for(r=r||1,l=0,a=e.length;l<a;l++)(o=e.eq(l).children().last()).attr("colspan",parseInt(o.attr("colspan"),10)+r),(o=t.eq(l).children().last()).attr("colspan",parseInt(o.attr("colspan"),10)-r)}function dr(e){var t,r,o=0,l=e.find(">colgroup>col");for(t=0,r=l.length;t<r;t+=1)o+=parseInt(l[t].style.width,10);return o}var cr=o.ui.DataBoundWidget.extend({init:function(t,r,l){var a=this;r=_(r)?{dataSource:r}:r,c.fn.init.call(a,t,r),l&&(a._events=l),Ke=o.support.isRtl(t),a._element(),a._aria(),a._columns(e.extend(!0,[],a.options.columns)),a._foreignKeyPromises?e.when.apply(null,a._foreignKeyPromises).then((function(){a._foreignKeyPromises=null,a._continueInit()})):a._continueInit()},_continueInit:function(){var t=this;t._dataSource(),t._stickyColumns(),t._tbody(),t._thead(),t._groupable(),t._toolbar(),t._pageable(),t._setContentHeight(),t._templates(),t._navigatable(),t._selectable(),t._clipboard(),t._details(),t._editable(),t._attachCustomCommandsEvent(),t._adaptiveColumns(),t._minScreenSupport(),t.options.autoBind?t.dataSource.fetch():(t._group=t._groups()>0,t._footer()),t.lockedContent&&(t.wrapper.addClass("k-grid-lockedcolumns"),t._resizeHandler=function(){t.resize()},e(window).on("resize"+F,t._resizeHandler)),o.notify(t)},events:[U,"dataBinding","cancel",J,Y,X,V,B,G,O,N,M,P,W,q,Q,K,ge,me,$,j,ke,_e,be,ve,Ce,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t,r=this,l=r.options.scrollable;r.options.dataSource=e,r._dataSource(),r._pageable(),r._thead(),l&&(l.virtual?(t=r.content.find(">.k-virtual-scrollable-wrap"),o.scrollLeft(t,_r(t,Ke))):(t=r.tbody,o.scrollLeft(r.content,_r(t,Ke)))),r.options.groupable&&r._groupable(),r.virtualScrollable&&r.virtualScrollable.setDataSource(r.options.dataSource),r.options.navigatable&&r._navigatable(),r.options.selectable&&r._selectable(),r.options.autoBind?r.dataSource.fetch():r._footer()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,encodeTitles:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",search:!1,noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:tt.create.text,cancel:tt.cancel.text,save:tt.save.text,destroy:tt.destroy.text,edit:tt.edit.text,update:tt.update.text,canceledit:tt.canceledit.text,excel:tt.excel.text,pdf:tt.pdf.text,search:tt.search.text},noRecords:"No records available.",expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup"},width:null},destroy:function(){var t,r=this;r._angularItems("cleanup"),r._destroyColumnAttachments(),c.fn.destroy.call(r),this._navigatableTables&&(this._navigatableTables.off(F),this._navigatableTables=null,this._headertables=null),r._resizeHandler&&e(window).off("resize"+F,r._resizeHandler),r.pager&&r.pager.element&&r.pager.destroy(),r.timer&&clearTimeout(r.timer),r._progressTimeOut&&clearTimeout(r._progressTimeOut),r._collapseGroupsTimeOut&&clearTimeout(r._collapseGroupsTimeOut),r._endlessFetchTimeOut&&clearTimeout(r._endlessFetchTimeOut),r.pager=null,r._destroyGroupable(),r.options.reorderable&&r.wrapper.data("kendoReorderable").destroy(),r.selectable&&r.selectable.element&&(r.selectable.destroy(),r.clearArea(),r._selectedIds=null,r.copyHandler&&(r.wrapper.off("keydown",r.copyHandler),r.unbind(r.copyHandler)),r.updateClipBoardState&&(r.unbind(r.updateClipBoardState),r.updateClipBoardState=null),r.clearAreaHandler&&r.wrapper.off("keyup",r.clearAreaHandler)),r.selectable=null,r.resizable&&(r.resizable.destroy(),r._resizeUserEvents&&(r._resizeHandleDocumentClickHandler&&e(document).off("click",r._resizeHandleDocumentClickHandler),r._resizeUserEvents.destroy(),r._resizeUserEvents=null),r.resizable=null),r._destroyVirtualScrollable(),r.editableUserEvents&&(r.editableUserEvents.destroy(),r.editableUserEvents=null),r._lockedContentUserEvents&&(r._lockedContentUserEvents.destroy(),r._lockedContentUserEvents=null),r._destroyEditable(),r.dataSource&&(r.dataSource.unbind(U,r._refreshHandler).unbind(x,r._progressHandler).unbind(H,r._errorHandler).unbind(Le,r._clearSortClasses),r._refreshHandler=r._progressHandler=r._errorHandler=r._clearSortClasses=null),t=r.element.add(r.wrapper).add(r.table).add(r.thead).add(r.wrapper.find(">.k-grid-toolbar")),r.content&&(t=t.add(r.content).add(r.content.find(">.k-virtual-scrollable-wrap"))),r.lockedHeader&&r._removeLockedContainers(),r.pane&&r.pane.destroy(),r._isMobile&&(r.wrapper.off("transitionend"+F),r.wrapper.off("contextmenu"+F)),r.minScreenResizeHandler&&e(window).off("resize",r.minScreenResizeHandler),r._detachColumnMediaResizeHandler(),r._draggableInstance&&r._draggableInstance.element&&r._draggableInstance.destroy(),r._draggableInstance=null,t.off(F),o.destroy(r.wrapper),r.rowTemplate=r.altRowTemplate=r.lockedRowTemplate=r.lockedAltRowTemplate=r.detailTemplate=r.footerTemplate=r.groupFooterTemplate=r.lockedGroupFooterTemplate=r.noRecordsTemplate=null,r.scrollables=r.thead=r.tbody=r.element=r.table=r.content=r.footer=r.wrapper=r.lockedTable=r.lockedContent=r.lockedHeader=r.lockedFooter=r._groupableClickHandler=r._groupRows=r._setContentWidthHandler=null},getOptions:function(){this.options.dataSource=null;var r=g(!0,{},this.options);r.columns=o.deepExtend([],this.columns);var l=this.dataSource,a=l.options.data&&l._data;return l.options.data=null,r.dataSource=e.extend(!0,{},l.options),l.options.data=a,r.dataSource.data=a,r.dataSource.page=l.page(),r.dataSource.filter=e.extend(!0,{},l.filter()),r.dataSource.pageSize=l.pageSize(),r.dataSource.sort=l.sort(),r.dataSource.group=l.group(),r.dataSource.aggregate=l.aggregate(),r.dataSource.transport&&(r.dataSource.transport.dataSource=null),r.pageable&&r.pageable.pageSize&&(r.pageable.pageSize=l.pageSize()),r.$angular=t,r},setOptions:function(e){var t=this.getOptions();o.deepExtend(t,e),e.dataSource?e.dataSource.filter&&(t.dataSource.filter=e.dataSource.filter):t.dataSource=this.dataSource;var r=this.wrapper,l=this._events,a=this.element;if(this.destroy(),this.options=null,this._isMobile){var n=r.closest(o.roleSelector("pane")).parent();n.after(r),n.remove(),r.removeClass("k-grid-mobile")}r[0]!==a[0]&&(r.before(a),r.remove()),a.empty(),this.init(a,t,l),this._setEvents(t)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t,r){return t.children().filter((function(){var t=e(this);return!((r?t.hasClass("k-detail-row"):t.hasClass("k-grouping-row"))||t.hasClass("k-detail-row")||t.hasClass("k-group-footer"))}))},dataItems:function(){var e=o.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(var t=e.length,r=new Array(2*t),l=t;--l>=0;)r[l]=r[l+t]=e[l];e=r}return e},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",(function(){return{elements:t.thead.get()}})),t.thead.add(t.lockedHeader).find("th").each((function(){var t=e(this),r=t.data("kendoFilterMenu"),o=t.data("kendoColumnSorter"),l=t.data("kendoColumnMenu");r&&r.destroy(),o&&o.destroy(),l&&l.destroy()})))},_attachCustomCommandsEvent:function(){var e,t,r,o=this,l=jt(o.columns||[]);for(t=0,r=l.length;t<r;t++)(e=l[t].command)&&at(o,o.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,r=t.element;r.is("table")||(r=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table")).length||(r=e("<table />").appendTo(t.element)),t.table=r.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,r){var l,a,n,i,s,d,c,u=this,h=u.options.columnResizeHandleWidth,f=u.options.scrollable,g=u.resizeHandle,m=3*h/2,k=0;g&&u.lockedContent&&g.data("th")[0]!==r[0]&&(g.off(F).remove(),g=null),g||(g=u.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(g)),s=o.scrollLeft(t),Ke&&(Ue.mozilla||Ue.webkit&&Ue.version>=85)&&(s*=-1),i=parseFloat(t.css("borderLeftWidth")),d=r.offset().left+s-parseFloat(r.css("marginLeft"))-(t.offset().left+i),Ke?f&&(k=d<=s?m:0,(l=r.closest(".k-grid-header-wrap, .k-grid-header-locked"))[0].scrollWidth,l[0].offsetWidth,n=parseFloat(l.css("marginLeft")),a=Ue.msie?2*o.scrollLeft(l)+i-n-k:0,d-=-k+(Ue.mozilla?i-n-k:0)+a):d+=r[0].offsetWidth,c=r.offset().top-parseFloat(r.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth"))),g.css({top:c,left:d-m,height:p(r),width:3*h-k}).data("th",r).show(),g.off("dblclick"+F).on("dblclick"+F,(function(){u._autoFitLeafColumn(parseInt(r.attr(o.attr("index")),10))}))},_positionColumnResizeHandle:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(r).on("mousemove"+F,"tr:not(.k-filter-row) > th",(function(r){var l=void 0!==r.buttons?r.buttons:r.which||r.button,a=e(this);a.hasClass("k-group-cell")||a.hasClass("k-hierarchy-cell")||void 0!==l&&0!==l||a[0].hasAttribute(o.attr("colSpan"))||t._createResizeHandle(a.closest("div"),a)}))},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._resetResizeHandleHeader(),this._hideResizeHandle())},_resetResizeHandleHeader:function(){var t;this.resizeHandle&&(t=e(this.resizeHandle).data("th"))&&(t.find(".k-link").find(".k-icon").show(),t.find(".k-sort-order").show(),t.find(".k-header-column-menu").show(),t.find(".k-grid-filter").show())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(F).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new o.UserEvents(r.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(r){var o=e(r.target);r.preventDefault(),t.resizeHandle&&(t.resizeHandle.data("th").removeClass("k-column-active"),t._resetResizeHandleHeader()),o.addClass("k-column-active"),o.find(".k-link").find(".k-icon").hide(),o.find(".k-sort-order").hide(),o.find(".k-header-column-menu").hide(),o.find(".k-grid-filter").hide(),t._createResizeHandle(o.closest("div"),o),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=C(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(t,r){var l,a=this,n=!!t.locked,i=!!t.hidden,s=this.options,d=o.support.mobileOS?0:o.support.scrollbar(),c=b(t,n?Gt(Nt(a.columns)):Ot(Nt(a.columns))),p=n?a.lockedTable:a.table,h=a.footer||e(),f=n?a.lockedHeader.find("table"):a.thead.closest("table"),g=t.minResizableWidth||10,m=u(n?p.find("tbody"):a.tbody);if(i)t.width=r>g?r:g;else{if(a.footer&&a.lockedContent&&(h=n?a.footer.children(".k-grid-footer-locked"):a.footer.children(".k-grid-footer-wrap")),l=s.scrollable?f.find("col:not(.k-group-col,.k-hierarchy-col):eq("+c+")").add(p.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+c+")")).add(h.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+c+")")):p.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+c+")"),s.scrollable){var k=!1,_=a.wrapper.width()-d,v=r=r>g?r:g;n&&m-r+v>_&&((v=r+(_-m-2*d))<0&&(v=r),k=!0),v>10&&v>=g&&(l.css("width",v),m&&(v=k?_-2*d:m+(r-t.width),p.add(f).add(h).css("width",v),n||(a._footerWidth=v))),a._scrollVirtualWrapperOnColumnResize()}else r>10&&r>=g&&l.css("width",r);t.width=r,a._applyLockedContainersWidth(),a._syncLockedContentHeight(),a._syncLockedHeaderHeight(),a._updateStickyColumns()}},_resizable:function(){var t,r,a,n,i,s,d,c,h=this,f=h.options,g=this._isMobile,m=o.support.mobileOS?0:o.support.scrollbar();f.resizable&&(t=f.scrollable?h.wrapper.find(".k-grid-header-wrap:first"):h.wrapper,g?h._positionColumnResizeHandleTouch(t):h._positionColumnResizeHandle(t),h.resizable&&h.resizable.destroy(),h.resizable=new l.Resizable(t.add(h.lockedHeader),{handle:(f.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:p(t.data("th"))+h.tbody.attr("clientHeight")})},start:function(t){c=e(t.currentTarget).data("th"),g&&h._hideResizeHandle();var o=c.closest("table"),l=e.inArray(c[0],$t(c.closest("thead")).filter(":visible")),p=(s=o.parent().hasClass("k-grid-header-locked"))?h.lockedTable:h.table,m=h.footer||e();h.footer&&h.lockedContent&&(m=s?h.footer.children(".k-grid-footer-locked"):h.footer.children(".k-grid-footer-wrap")),rt(h.wrapper,"col-resize"),d=f.scrollable?o.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+l+")").add(p.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+l+")")).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+l+")")):p.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+l+")");var k=e.map(h.columns,(function(e){return!e.hidden&&(s&&e.locked||!s&&!e.locked)?e:null}));r=t.x.location,a=u(c),n=jt(k)[l].minResizableWidth||10,i=u(s?p.children("tbody"):h.tbody),Ue.webkit&&h.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var o=Ke?-1:1,l=a+t.x.location*o-r*o;if(f.scrollable){var u;s&&h.lockedFooter?u=h.lockedFooter.children("table"):h.footer&&(u=h.footer.find(">.k-grid-footer-wrap>table")),u&&u[0]||(u=e());var p=c.closest("table"),g=s?h.lockedTable:h.table,k=!1,_=h.wrapper.width()-m,b=l;s&&i-a+b>_&&((b=a+(_-i-2*m))<0&&(b=l),k=!0),b>10&&b>=n&&(d.css("width",b),i&&(b=k?_-2*m:i+t.x.location*o-r*o,g.add(p).add(u).css("width",b),s||(h._footerWidth=b))),h._scrollVirtualWrapperOnColumnResize()}else l>10&&l>=n&&d.css("width",l)},resizeend:function(){var e,t,r=u(c);if(rt(h.wrapper,""),Ue.webkit&&h.wrapper.removeClass("k-grid-column-resizing"),a!=r){t=h.lockedHeader?h.lockedHeader.find("thead:first tr:first").add(h.thead.find("tr:first")):c.parent();var l=c.attr(o.attr("index"));l||(l=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(c)),(e=jt(h.columns)[l]).width=r,h.trigger(ge,{column:e,oldWidth:a,newWidth:r}),h._applyLockedContainersWidth(),h._syncLockedContentHeight(),h._syncLockedHeaderHeight(),h._updateStickyColumns()}h._resetResizeHandleHeader(),h._hideResizeHandle(),c=null}}))},_draggable:function(){var t=this;if(t.options.reorderable){t._draggableInstance&&t._draggableInstance.destroy();var r=t.wrapper.children(".k-grid-header");t._draggableInstance=t.wrapper.kendoDraggable({group:o.guid(),autoScroll:!0,filter:t.content?".k-grid-header:first "+L:"table:first>.k-grid-header "+L,dragstart:function(){r.children(".k-grid-header-wrap").unbind("scroll"+F+"scrolling").bind("scroll"+F+"scrolling",(function(e){t.virtualScrollable?o.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft):o.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)}))},dragend:function(){t._resetResizeHandleHeader(),r.children(".k-grid-header-wrap").unbind("scroll"+F+"scrolling")},drag:function(){t._hideResizeHandle()},hint:function(t){var r=t.attr(o.attr("title"));return r&&(r=o.htmlEncode(r)),e('<div class="k-header k-reorder-clue k-drag-clue" />').html(r||t.attr(o.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-i-cancel"></span>')}}).data("kendoDraggable")}},_reorderable:function(){var t=this;t.options.reorderable&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dragOverContainers:function(e,r){var o=Ht(t.columns);return!1!==o[e].lockable&&Rt(o,t.columns,e,r)>-1},inSameContainer:function(r){return e(r.source).parent()[0]===e(r.target).parent()[0]&&Rt(Ht(t.columns),t.columns,r.sourceIndex,r.targetIndex)>-1},change:function(e){var r=Ht(t.columns),o=r[e.oldIndex],l=Rt(r,t.columns,e.oldIndex,e.newIndex);t.trigger(me,{newIndex:l,oldIndex:b(o,r),column:o}),t.reorderColumn(l,o,"before"===e.position)}}))},_reorderHeader:function(e,t,r,o){for(var l,a,n=this,i=St(e[0],n.columns),s=St(t,n.columns),d=[],c=0;c<e.length;c++)e[c].columns&&(d=d.concat(e[c].columns));a=o?lt(o,o,"tr:eq("+i.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"):lt(n.lockedHeader,n.thead,"tr:eq("+i.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");var u,p,h,f,g,m,k=qt(e).length,_=qt([t]).length;d.length?(k>0&&0===_?(l="prepend",vt(e,t,d,n.columns,n.lockedHeader.find("thead"),n.thead,this._groups(),l)):0===k&&_>0&&(l=0!==s.cell||!e[0].columns||t.columns||n._group?"append":"prepend",vt(e,t,d,Vt(n.columns),n.thead,n.lockedHeader.find("thead"),this._groups(),l)),(t.columns||i.cell-s.cell>1||s.cell-i.cell>1)&&(t=Tt(n.columns,t,e[0],r,n.columns))&&(k>0&&0===_?n._reorderHeader(d,t,r,n.thead):0===k&&_>0?n._reorderHeader(d,t,r,n.lockedHead):n._reorderHeader(d,t,r))):k!==_&&(u=a[i.cell],p=n.columns,h=k,f=wt(qt(p)),g=wt(Vt(p)),m=u.rowSpan,u.rowSpan=h?f>g?m-(f-g)||1:m+(g-f):f>g?m+(f-g):m-(g-f)||1),ot(a,i.cell,s.cell,r,e.length)},_reorderContent:function(t,r,o){var l,a,n,i=this,s=e(),d=t[0],c=mt(t),u=b(d,jt(i.columns)),p=b(r,jt(i.columns)),h=b(c[0],Nt(i.columns)),f=b(r,Nt(i.columns)),g=qt(i.columns).length,m=!!r.locked,k=i.footer||i.wrapper.find(".k-grid-footer");if(l=a=f,r.hidden){var _=m?qt(i.columns):Vt(i.columns);mt(_).length>0?(l=a=f=this._findClosestVisibleColumnIndex(_,p),n=mt(_.slice(p)).length>0):m?(f=i.lockedTable.find("colgroup"),l=i.lockedHeader.find("colgroup"),a=e(i.lockedFooter).find(">table>colgroup")):(f=i.tbody.prev(),l=i.thead.prev(),a=k.find(".k-grid-footer-wrap").find(">table>colgroup"))}i._hasFilterRow()&&ot(i.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),u,p,o,t.length),h>=0&&ot(lt(i.lockedHeader,i.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),h,l,n||o,c.length),i.options.scrollable&&h>=0&&!i._hasVirtualColumns()&&ot(lt(i.lockedTable,i.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),h,f,n||o,c.length),k&&k.length&&(h>=0&&ot(lt(i.lockedFooter,k.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),h,a,n||o,c.length),ot(k.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),u,p,o,t.length));var v=i.tbody.children(":not(.k-grouping-row,.k-detail-row)");i.lockedTable&&(g>p?g<=u&&sr(i.lockedTable.find(">tbody>tr.k-grouping-row"),i.table.find(">tbody>tr.k-grouping-row"),t.length):g>u&&sr(i.table.find(">tbody>tr.k-grouping-row"),i.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),s=i.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)"));for(var C=0,w=v.length;C<w;C+=1)ot(lt(s[C],v[C],">td:not(.k-group-cell,.k-hierarchy-cell)"),u,p,o,t.length)},_findClosestVisibleColumnIndex:function(e,t){var r=mt(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),o=mt(r)[0];return b(o,mt(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(jt(this.columns)[e])},autoFitColumn:function(t){var r,l,a,n,i,s,d,c,p,h,g=this,m=g.options,_=g.columns,v=g.lockedHeader?$t(g.lockedHeader.find(">table>thead")).filter(ft).length:0,C="col:not(.k-group-col):not(.k-hierarchy-col)",w="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if((t="number"==typeof t?_[t]:f(t)?k(It(_),(function(e){return e===t}))[0]:k(It(_),(function(e){return e.field===t}))[0])&&gt(t)){s=t.minResizableWidth,r=b(t,jt(_)),p=(l=(a=(n=t.locked)?g.lockedHeader.children("table"):g.thead.parent()).find("[data-index='"+r+"']")).find("a.k-header-column-menu, a.k-grid-filter");var y=n?g.lockedTable:g.table,S=g.footer||e();g.footer&&g.lockedContent&&(S=n?g.footer.children(".k-grid-footer-locked"):g.footer.children(".k-grid-footer-wrap"));var T=S.find("table").first();g.lockedHeader&&!n&&(r-=v);for(var x=0;x<_.length&&_[x]!==t;x++)_[x].hidden&&r--;m.scrollable?(i=a.find(C).eq(r).add(y.children("colgroup").find(C).eq(r)).add(T.find("colgroup").find(C).eq(r)),n||(d=y.parent(),c=o.scrollLeft(d))):i=y.children("colgroup").find(C).eq(r);var H=a.add(y).add(T);Ue.safari&&l.css("white-space","initial");var R=u(l);i.width(""),H.css("table-layout","fixed"),i.width("auto"),H.addClass("k-autofitting"),H.css("table-layout",""),h=p.length?u(p)+u(l):u(l);var I=Math.ceil(Math.max(h,u(y.find("tr:not(.k-grouping-row)").eq(0).children(w).eq(r)),u(T.find("tr").eq(0).children(w).eq(r))))+1;if(s&&s>I&&(I=s),i.width(I),t.width=I,Ue.safari&&l.css("white-space",""),m.scrollable){for(var E,z=a.find("col"),A=0,D=0,L=z.length;D<L;D+=1)if((E=z[D].style.width)&&-1==E.indexOf("%"))A+=parseInt(E,10);else{if(!z.eq(D).hasClass("k-group-col")){A=0;break}A+=parseInt(z.eq(D).width(),10)}A&&H.each((function(){this.style.width=A+"px"}))}H.removeClass("k-autofitting"),c&&o.scrollLeft(d,c),g.trigger(ge,{column:t,oldWidth:R,newWidth:I}),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight(),g._updateStickyColumns()}},reorderColumn:function(e,r,o){var l,a=this,n=it(r,a.columns),i=n?n.columns:a.columns,s=b(r,i),d=i[e],c=a.virtualScroll||{},u=!!d.locked,p=qt(a.columns).length,h=k(jt(a.columns),(function(e){return e.groupHeaderColumnTemplate}));if(s!==e&&(r.locked||!u||1!=Vt(a.columns).length)&&(!r.locked||u||1!=p)){a._hideResizeHandle(),o===t&&(o=e<s);var f=[r];a._reorderHeader(f,d,o),a.lockedHeader&&(Dt(a.thead),Dt(a.lockedHeader)),d.columns&&(d=(d=jt(d.columns))[o?0:d.length-1]),r.columns&&(f=jt(r.columns)),a._reorderContent(f,d,o),l=(l=!!r.locked)!=u,r.locked=u,i.splice(o?e:e+1,0,r),i.splice(s<e?s:s+1,1),a._updateLockedCols(),a._updateCols(),a._templates(),a._updateColumnCellIndex(),a._updateColumnSorters(),h.length>0&&a._renderGroupRows(),a._updateTablesWidth(),a._applyLockedContainersWidth(),a._syncLockedHeaderHeight(),a._syncLockedContentHeight(),a._updateFirstColumnClass(),a._updateStickyColumns(),c.columns&&a.refresh(),l&&(u?a.trigger(ke,{column:r}):a.trigger(_e,{column:r}))}},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=Ct(this.lockedHeader.find("thead"),qt(this.columns))),Ct(this.thead,Vt(this.columns),e)},lockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:k(t,(function(t){return t.field===e}))[0])&&!e.locked&&!e.hidden){e.sticky&&this.unstickColumn(t.indexOf(e));var r=qt(t).length-1;this.reorderColumn(r,e,!1)}},unlockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:k(t,(function(t){return t.field===e}))[0])&&e.locked&&!e.hidden){var r=qt(t).length;this.reorderColumn(r,e,!0)}},stickColumn:function(e){var t=this.columns;!(e="number"==typeof e?t[e]:k(t,(function(t){return t.field===e}))[0])||e.sticky||e.hidden||e.locked&&(this.unlockColumn(t.indexOf(e)),e.locked)||(e.sticky=!0,this._updateStickyColumns())},unstickColumn:function(e){var t=this.columns;(e="number"==typeof e?t[e]:k(t,(function(t){return t.field===e}))[0])&&e.sticky&&!e.locked&&!e.hidden&&(this._removeStickyAttributes([e]),this._removeStickyStyles(Bt(t)),e.sticky=!1,this._updateStickyColumns(),0===this._anyStickyColumns()&&(this._templates(),this._hasFilterRow()&&this._updateStickyFilterCells()))},cellIndex:function(t){var r=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(r=jt(qt(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+r},_modelForContainer:function(t){(t=e(t)).is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var r=t.attr(o.attr("uid"));return this.dataSource.getByUid(r)},_calculateColumnIndex:function(t){var r=this.cellIndex(t),o=0;return this._hasVirtualColumns()&&(o=(o=parseInt(e(t).closest("tr").find("td:first").attr("colspan"),10))>1?o-1:0),r+o},_editable:function(){var t=this,r=t.options.editable;r&&(this.wrapper.addClass("k-editable"),"incell"===t._editMode()?(t.table.add(t.lockedTable).on("mousedown"+F,I+">"+E,(function(r){var l=e(r.target);"incell"===t._editMode()&&l.hasClass("k-checkbox")&&l.prev().attr(o.attr("bind"))&&r.preventDefault()})),!1!==r.update&&($e&&t.wrapper.on(we+F,".k-edit-cell > input[type='checkbox']",(function(t){e(t.target).focus()})).on(we+F,".k-edit-cell",(function(t){e(t.target).is("input")||e(t.currentTarget).find("input[type='checkbox']").focus()})).on("mousedown"+F,"tr:not(.k-grouping-row) > td",(function(r){var o=t._editContainer;o&&o[0]&&(e.contains(o[0],r.target)||o[0]===r.target)?t._mousedownOnEditCell=!0:t._mousedownOnEditCell=!1})),t.editableUserEvents=new o.UserEvents(t.wrapper,{filter:"tr:not(.k-grouping-row) > td",allowSelection:!0,tap:function(r){var o=e(r.target),l=t.lockedTable&&o.closest("table")[0]===t.lockedTable[0];t._mousedownOnEditCell=!1,o.hasClass("k-hierarchy-cell")||o.hasClass("k-detail-cell")||o.hasClass("k-group-cell")||o.hasClass("k-edit-cell")||o.has("a.k-grid-delete").length||o.has("button.k-grid-delete").length||o.closest("tbody")[0]!==t.tbody[0]&&!l||e(r.target).is(":input")||(t.editable?t.editable.end()?(e(d()).blur(),t.closeCell(),t.editCell(o)):t._scrollVirtualWrapper():t.editCell(o))}}),t.wrapper.on("focusin"+F,(function(){e.contains(this,d())||(clearTimeout(t.timer),t.timer=null)})).on("focusout"+F,(function(r){var o=!0;($e&&t._mousedownOnEditCell||t._virtualColScroll)&&(o=!1),t._mousedownOnEditCell=!1,o&&(t.timer=setTimeout((function(){var r,o;r=d(),(o=t._editContainer)&&o[0]&&!e.contains(o[0],r)&&o[0]!==r&&!e(r).closest(".k-animation-container").length&&(t.editable.end()?t.closeCell():t._scrollVirtualWrapper())}),1))})))):!1!==r.update&&(t.wrapper.on(we+F,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",(function(r){r.preventDefault(),t.editRow(e(this).closest("tr"))})),t._isVirtualInlineEditable()&&t.wrapper.on("focusout"+F,"tr:not(.k-grouping-row) > td",(function(){t.editable&&!t.editable.end()&&t._scrollVirtualWrapper()}))),!1!==r.destroy?t.wrapper.on(we+F,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",(function(r){r.preventDefault(),r.stopPropagation(),t.removeRow(e(this).closest("tr"))})):t.wrapper.on(we+F,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",(function(e){e.stopPropagation(),t._confirmation()||e.preventDefault()})))},editCell:function(t){t=e(t);var r=this,o=jt(r.columns)[r._calculateColumnIndex(t)],l=r._modelForContainer(t);if(r.closeCell(),l&&gr(o,l)&&!o.command){if(r.trigger(P,{model:l}))return;r._attachModelChange(l),r._editContainer=t,r._shouldClearEditableState&&r._clearEditableState(),r.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:o.field,format:o.format,editor:o.editor,values:o.values},model:l,target:r,change:function(e){r.trigger(W,{values:e.values,container:t,model:l})&&e.preventDefault()},skipFocus:!(!r._isVirtualIncellEditable()&&!r._hasVirtualColumns()||!r._editableState)}).data("kendoEditable");var a=t.parent().addClass("k-grid-edit-row");r.lockedContent&&(ur(a[0],r._relatedRow(a).addClass("k-grid-edit-row")[0]),r._syncLockedScroll()),r.trigger(M,{container:t,model:l})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),r=e[0].offsetWidth>t[0].clientWidth?o.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-r)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop,this.virtualScrollable&&(this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table"),t=this.thead.parent();this._adjustRowsHeight(e,t),function(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var r,o,l=e.offsetHeight,a=t.offsetHeight;l>a?(r=t.rows[t.rows.length-1],Ne.test(r.className)&&(r=t.rows[t.rows.length-2]),o=l-a):(r=e.rows[e.rows.length-1],Ne.test(r.className)&&(r=e.rows[e.rows.length-2]),o=a-l),r.style.height=r.offsetHeight+o+"px"}}(e,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(we+F,"a.k-grid-cancel",e._editCancelClickHandler),t.off(we+F,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editableIsClosing?e._editContainer.data("kendoWindow").bind("deactivate",t):(e._editableIsClosing=!0,e._editContainer.data("kendoWindow").bind("deactivate",t).close())),e._confirmDialog&&(e._confirmDialog.close(),e._confirmDialog.destroy(),e._confirmDialog=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,r=e._modelForContainer(t);r&&r.unbind(U,e._modelChangeHandler)},closeCell:function(e){var t,r,o,a=this,n=a._editContainer;n&&(o=a._modelForContainer(n),e&&a.trigger("cancel",{container:n,model:o})||(a.trigger(K,{type:e?"cancel":"save",model:o,container:n}),n.removeClass("k-edit-cell"),t=jt(a.columns)[a._calculateColumnIndex(n)],r=n.parent().removeClass("k-grid-edit-row"),a.lockedContent&&a._relatedRow(r).removeClass("k-grid-edit-row"),a._destroyEditable(),a._displayCell(n,t,o),a._shouldClearEditableState&&a._clearEditableState(),a.trigger("itemChange",{item:r,data:o,ns:l}),a.lockedContent&&ur(r.css("height","")[0],a._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,r){var l=this,a={storage:{},count:0},n=g({},o.Template,l.options.templateSettings),i=o.template(l._cellTmpl(t,a),n);a.count>0&&(i=C(i,a.storage)),e.empty().html(i(r)),l.angular("compile",(function(){return{elements:e,data:[{dataItem:r}]}}))},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var r,o,l,a=this,n=a._editMode();"incell"!==n&&a.cancelRow(),t=e(t),a.lockedContent&&(t=t.add(a._relatedRow(t))),t=t.hide(),a.dataSource._isGroupPaged()&&a._removeGroupIfEmpty(t),(r=a._modelForContainer(t))&&!a.trigger(q,{row:t,model:r})?(l=a.dataSource.options.schema,a._selectedIds&&l&&l.model&&(o=r[w(a.dataSource.options.schema.model)?a.dataSource.options.schema.model.fn.idField:a.dataSource.options.schema.model.id],delete a._selectedIds[o]),a.dataSource.remove(r),"inline"!==n&&"popup"!==n||a.dataSource.sync()):"incell"===n&&a._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var r,l=this;t instanceof i?r=t:(t=e(t),r=l._modelForContainer(t));var a,n=l._editMode();l.cancelRow(),r&&(t=l.tbody.children("["+o.attr("uid")+"="+r.uid+"]"),l._attachModelChange(r),"popup"===n?l._createPopupEditor(r):"inline"===n?l._createInlineEditor(t,r):"incell"===n&&e(t).children(R).each((function(){var t=e(this),o=jt(l.columns)[l._calculateColumnIndex(t)];if((r=l._modelForContainer(t))&&(!r.editable||r.editable(o.field))&&o.field&&!o.selectable)return l.editCell(t),!1})),(a=l.editView?l.editView.element:l._editContainer)&&(this._editCancelClickHandler||(this._editCancelClickHandler=C(this._editCancelClick,this)),a.on(we+F,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=C(this._editUpdateClick,this)),a.on(we+F,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var r=this,o=r.options.navigatable,l=r.editable.options.model,a=r.editView?r.editView.element:r._editContainer;if(t.preventDefault(),t.stopPropagation(),!r.trigger("cancel",{container:a,model:l})){var n=r.items().index(e(r.current()).parent());r.cancelRow(),o&&(r._setCurrent(r.items().eq(n).children().filter(E).first()),hr(r.table,!0))}},_createPopupEditor:function(t){var r,l,a,n,i,s,d,c,u,p,h,m,k=this,_="<div "+o.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form"><'+(k._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">'),b=[],v=jt(k.columns),w=o.guid(),y=k.options.editable,S=y.template,T=f(y)?y.window:{},x=g({},o.Template,k.options.templateSettings);if(!k.trigger(P,{model:t})){if(T=T||{},S)for(typeof S===xe&&(S=o.unescape(S)),_+=o.template(S,x)(t),a=0,n=v.length;a<n;a++)(r=v[a]).command&&(p=pr(r.command,"edit"))&&(l=p);else for(a=0,n=v.length;a<n;a++)(r=v[a]).selectable||(r.command?r.command&&(p=pr(r.command,"edit"))&&(l=p):k._isMobile?(_+='<li class="k-item k-listgroup-item">',gr(r,t)?(b.push({field:r.field,title:r.title,format:r.format,editor:r.editor,values:r.values}),_+='<label class="k-label k-listgroup-form-row">',_+='<span class="k-item-title k-listgroup-form-field-label">'+(r.title&&(k.options.encodeTitles?yr(r.title,!0):r.title)||r.field||"")+"</span>",_+='<div class="k-listgroup-form-field-wrapper" id="'+r.field+"_"+w+'" '+o.attr("container-for")+'="'+r.field+'"></div>',_+="</label>"):(m={storage:{},count:0},i=o.template(k._cellTmpl(r,m),x),m.count>0&&(i=C(i,m.storage)),_+='<label class="k-label k-listgroup-form-row k-no-click">',_+='<span class="k-item-title k-listgroup-form-field-label">'+(r.title&&(k.options.encodeTitles?yr(r.title,!0):r.title)||r.field||"")+"</span>",_+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+i(t)+"</span>",_+="</label>"),_+="</li>"):(_+='<div class="k-edit-label"><label for="'+r.field+'">'+(r.title&&(k.options.encodeTitles?yr(r.title):r.title)||r.field||"")+"</label></div>",gr(r,t)?(b.push({field:r.field,title:r.title,format:r.format,editor:r.editor,values:r.values}),_+="<div "+o.attr("container-for")+'="'+r.field+'" class="k-edit-field"></div>'):(m={storage:{},count:0},i=o.template(k._cellTmpl(r,m),x),m.count>0&&(i=C(i,m.storage)),_+='<div class="k-edit-field k-no-editor">'+i(t)+"</div>")));var H;l&&f(l)&&(f(l.text)&&(s=l.text.update,d=l.text.cancel),f(l.iconClass)&&(c=l.iconClass.update,u=l.iconClass.cancel),l.attr&&(h=l.attr)),k._isMobile?(_+="</ul></div>",k.editView=k.pane.append("<div data-"+o.ns+'role="view" class="k-grid-edit-form"><div data-'+o.ns+'role="header" class="k-header"><a href="\\#" class="k-header-cancel k-link k-grid-cancel" title="#=messages.cancel#" aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+(k.options.messages.commands.edit||"Edit")+'<a href="\\#" class="k-header-done k-link k-grid-update" title="#=messages.done#" aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a></div><div data-'+o.ns+'role="content" class="'+Qe+'">'+_+"</div></div>"),H=k._editContainer=k.editView.element.find(".k-popup-edit-form")):(_+='<div class="k-edit-buttons k-state-default">',_+=k._createButton({name:"update",text:s,attr:h,iconClass:c})+k._createButton({name:"canceledit",text:d,attr:h,iconClass:u}),_+="</div></div></div>",H=k._editContainer=e(_).appendTo(k.wrapper).eq(0).kendoWindow(g({modal:!0,resizable:!1,draggable:!0,title:k.options.messages.commands.edit||"Edit",visible:!1,close:function(r){if(r.userTriggered){if(r.sender.element.focus(),k.trigger("cancel",{container:H,model:t}))return void r.preventDefault();var o=k.items().index(e(k.current()).parent());k._editableIsClosing=!0,k.cancelRow(),k.options.navigatable&&(k._setCurrent(k.items().eq(o).children().filter(E).first()),hr(k.table,!0))}}},T))),k.editable=k._editContainer.kendoEditable({fields:b,model:t,clearContainer:!1,target:k}).data("kendoEditable"),k._openPopUpEditor(),k.trigger(M,{container:H,model:t})}},_openPopUpEditor:function(){var e=this,t=e._editContainer?e._editContainer.data("kendoWindow"):null,r=(e.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):t&&(r.position||t.center(),t.open())},_createInlineEditor:function(t,r){var l,a,n,i=this,s=[];i.trigger(P,{model:r})||(i.lockedContent&&(t=t.add(i._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each((function(){if(a=e(this),!(l=jt(i.columns)[i._calculateColumnIndex(a)]).command&&gr(l,r))s.push({field:l.field,title:l.title,format:l.format,editor:l.editor,values:l.values}),a.attr(o.attr("container-for"),l.field),a.empty();else if(l.command){var t,d,c,u,p;(n=pr(l.command,"edit"))&&(a.empty(),f(n)&&(f(n.text)&&(t=n.text.update,d=n.text.cancel),f(n.iconClass)&&(c=n.iconClass.update,u=n.iconClass.cancel),n.attr&&(p=n.attr)),e(i._createButton({name:"update",text:t,attr:p,iconClass:c})+i._createButton({name:"canceledit",text:d,attr:p,iconClass:u})).appendTo(a))}})),i._editContainer=t,i._editContainer.addClass("k-grid-edit-row"),i._shouldClearEditableState&&i._clearEditableState(),i.editable=new o.ui.Editable(i._editContainer,{target:i,fields:s,model:r,skipFocus:i._isVirtualInlineEditable()&&i._editableState&&!!i._editableState.field||i._hasVirtualColumns(),clearContainer:!1}),t.length>1&&(ur(t[0],t[1]),i._applyLockedContainersWidth()),i.trigger(M,{container:t,model:r}))},cancelRow:function(e){var t,r=this,l=r._editContainer;if(l){if(!(t=r._modelForContainer(l))||e&&r.trigger("cancel",{container:l,model:t}))return;r._destroyEditable(),r.dataSource.cancelChanges(t),r._clearEditableState(),"popup"!==r._editMode()?r._displayRow(l):r._displayRow(r.tbody.find("["+o.attr("uid")+"="+t.uid+"]"))}},saveRow:function(){var t,r=this,o=this._editContainer,l=this._modelForContainer(o),a=e.Deferred();return o&&this.editable?!(t=r.editable&&r.editable.end())||this.trigger(W,{container:o,model:l})?(t||r._scrollVirtualWrapper(),a.reject().promise()):(r._clearEditableState(),this.dataSource.sync()):a.resolve().promise()},_displayRow:function(t){var r,o,a,n=this,i=n._modelForContainer(t),s=t.hasClass("k-state-selected"),d=t.hasClass("k-alt");if(i){n.lockedContent&&(r=e((d?n.lockedAltRowTemplate:n.lockedRowTemplate)(i)),n._relatedRow(t.last()).replaceWith(r)),n.angular("cleanup",(function(){return{elements:t.get()}})),o=e((d?n.altRowTemplate:n.rowTemplate)(i)),t.is(":visible")||o.hide(),t.replaceWith(o),n.trigger("itemChange",{item:o,data:i,ns:l}),r&&r.length&&n.trigger("itemChange",{item:r,data:i,ns:l});var c=o,u=[{dataItem:i}];r&&r.length&&(c=o.add(r),u.push({dataItem:i})),n.angular("compile",(function(){return{elements:c.get(),data:u}})),s&&(n.options.selectable||n._checkBoxSelection)&&n.select(o.add(r)),r&&ur(o[0],r[0]),(a=o.next()).hasClass("k-detail-row")&&a.is(":visible")&&o.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse")}},_showMessage:function(t,r){var l=this;return l._isMobile?((l._confirmDialog=new o.ui.Confirm(e("<div />").appendTo(document.body),{modal:{preventScroll:!0},closable:!1,title:!1,content:t.title,messages:{okText:t.confirmDelete,cancel:t.cancelDelete},open:function(){l.content&&(l.content.data(De,l.content.css(De)),l.content.css(De,"hidden"))},close:function(){l.content&&l.content.css(De,l.content.data(De))}})).result.done((function(){l._removeRow(r)})).fail((function(){var e=l._confirmDialog;e&&(e.close(),e.destroy())})),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,r=t.options.editable,o=!0===r||typeof r===xe?t.options.messages.editable.confirmation:r.confirmation;return f(r)&&typeof r.mode===xe&&typeof o!==Te&&typeof o!==xe&&!1!==o&&(o=t.options.messages.editable.confirmation),!1===o||null==o||(typeof o===Te&&(o=o(t._modelForContainer(e))),t._showMessage({confirmDelete:r.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:r.cancelDelete||t.options.messages.editable.cancelDelete,title:!0===o?t.options.messages.editable.confirmation:o},e))},cancelChanges:function(){var e=this;e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop((function(){e.virtualScrollable.scrollToTop()}))},saveChanges:function(){var e=this,t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(Q)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t,r=this,o=r.dataSource,l=r._editMode(),a=r.options.editable.createAt||"",n=o.pageSize(),i=o.view()||[],s=a.toLowerCase()===He,d=r._isVirtualEditable();r.editable&&r.editable.end()||!r.editable?("incell"!=l&&r.cancelRow(),e=o.indexOf(i[0]),s&&(e+=i.length,n&&!o.options.serverPaging&&n<=i.length&&(e-=1)),e<0&&(e=o.page()>o.totalPages()?(o.page()-1)*n:0),r.options.navigatable&&"incell"==l&&r._removeCurrent(),d?r._virtualAddRow():(t=o.insert(e,{}),r._editModel(t))):r._scrollVirtualWrapper()},_editModel:function(e){var t=this,r=t.options.editable.createAt||"",l=t._editMode();if(e){var a=e.uid,n=(t.lockedContent?t.lockedTable:t.table).find("tr["+o.attr("uid")+"="+a+"]"),i=n.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(t._firstEditableColumnIndex(n));"inline"===l&&n.length?t.editRow(n):"popup"===l?t.editRow(e):i.length&&t.editCell(i),"bottom"==r.toLowerCase()&&t.lockedContent&&(t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.table[0].offsetHeight)}},_virtualAddRow:function(){var e=this,t=(e.options.editable.createAt||"").toLowerCase()===He;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e,t=this,r=t.dataSource,o=t.virtualScrollable;1===r.page()?(e=r.insert(0,{}),t._editModel(e),o.scrollToTop()):t._virtualPageToTop((function(){e=r.insert(0,{}),t._editModel(e),o.scrollToTop()}))},_virtualAddRowAtBottom:function(){var e,t=this,r=t.dataSource,o=t.virtualScrollable,l=r.total();r.at(l-1)instanceof i?(e=r.insert(l,{}),t._virtualPageToBottom((function(){t._editModel(e),o.scrollToBottom()}))):t._virtualPageToBottom((function(){e=r.insert(l,{}),t._editModel(e),o.scrollToBottom()}))},_virtualPageToTop:function(e){this._virtualPage(0,this.dataSource.take(),(function(){e()}))},_virtualPageToBottom:function(e){var t=this.dataSource,r=t.take(),o=t.total(),l=o>r?o-r:0;this._virtualPage(l,r,(function(){e()}))},_virtualPage:function(e,t,r){var o=this;o._isVirtualEditable()&&(o.virtualScrollable._preventScroll=!0,o.virtualScrollable._page(e,t,r))},_firstEditableColumnIndex:function(e){var t,r,o,l=jt(this.columns),a=this._modelForContainer(e);for(r=0,o=l.length;r<o;r++)if(t=l[r],a&&(!a.editable||a.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return r;return-1},_toolbar:function(){var t,r=this,l=r.wrapper,a=r.options.toolbar,n=r.options.editable;a&&((t=r.wrapper.find(".k-grid-toolbar")).length||(w(a)||(a=typeof a===xe?a:r._toolbarTmpl(a).replace(Ve,"\\#"),a=C(o.template(a),r)),t=e('<div class="k-toolbar k-grid-toolbar" />').html(a({})).prependTo(l),r.angular("compile",(function(){return{elements:t.get()}}))),n&&!1!==n.create&&t.on(we+F,".k-grid-add",(function(e){e.preventDefault(),r.addRow()})).on(we+F,".k-grid-cancel-changes",(function(e){e.preventDefault(),r.cancelChanges()})).on(we+F,".k-grid-save-changes",(function(e){e.preventDefault(),r.saveChanges()})),t.on(we+F,".k-grid-excel",(function(e){e.preventDefault(),r.saveAsExcel()})),t.on(we+F,".k-grid-pdf",(function(e){e.preventDefault(),r.saveAsPDF()})),t.on(Ee+F,".k-grid-search input",(function(e){var t=e.currentTarget;clearTimeout(r._searchTimeOut),r._searchTimeOut=setTimeout((function(){r._searchTimeOut=null;var e=r.options,o=e.search?e.search.fields:null,l={filters:[],logic:"or"},a=t.value;if(o||(o=function(e){var t=[];e=jt(e);for(var r=0;r<e.length;r++)"string"==typeof e[r]?t.push(e[r]):e[r].field&&t.push(e[r].field);return t}(e.columns)),r.dataSource.options.endless&&(r.dataSource.options.endless=null,r._endlessPageSize=r.dataSource.options.pageSize),a)for(var n=0;n<o.length;n++)l.filters.push({field:o[n],operator:"contains",value:a});else l={};r.dataSource.filter(l)}),300)})))},_toolbarTmpl:function(e){var t,r,o="",l="",a=this.options.messages.commands;if(_(e))for(t=0,r=e.length;t<r;t++)"search"===("string"==typeof e[t]?e[t].toLowerCase():(e[t].name||"").toLowerCase())?("string"!=typeof e[t]&&(l=e[t].text),o+="<span class='k-textbox k-grid-search k-display-flex'>",o+="<input autocomplete='off' placeholder='"+(l=l||a.search)+"' title='"+l+"' class='k-input' />",o+="<span class='k-input-icon'><span class='k-icon k-i-search'></span></span>",o+="</span>"):o+=this._createButton(e[t]);return o},_createButton:function(e){var r,l=e.template||'# if (iconClass) {#<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass#"></span>#=text#</a># } else { #<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#">#=text#</a># } #',a=typeof e===xe?e:e.name||e.text,n={className:tt[a]?tt[a].className:"k-grid-"+(a||"").replace(/\s/g,""),text:a,attr:"",iconClass:""},i=this.options.messages.commands;if(!(a||f(e)&&e.template))throw new Error("Custom commands should have name specified");return f(e)?((e=g(!0,{},e)).className&&b(n.className,e.className.split(" "))<0?e.className+=" "+n.className:e.className===t&&(e.className=n.className),"edit"===a&&((e=g(!0,{},e)).text=f(e.text)?e.text.edit:e.text,e.iconClass=f(e.iconClass)?e.iconClass.edit:e.iconClass),e.attr&&(f(e.attr)&&(e.attr=et(e.attr)),typeof e.attr===xe&&(r=e.attr.match(/class="(.+?)"/))&&b(r[1],e.className.split(" "))<0&&(e.className+=" "+r[1])),n=g(!0,n,tt[a],{text:i[a]},e)):n=g(!0,n,tt[a],{text:i[a]}),o.template(l)(n)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(we+F,t._groupableClickHandler):t._groupableClickHandler=function(r){var o=e(this),l=o.closest("tr"),a=t._groupRows?t._groupRows[t.wrapper.find(".k-grouping-row").index(l)]:{};o.hasClass("k-i-collapse")?t.trigger("groupCollapse",{group:a,element:l})||t.collapseGroup(l):t.trigger("groupExpand",{group:a,element:l})||t.expandGroup(l),r.preventDefault(),r.stopPropagation()},t._isLocked()?t.lockedTable.on(we+F,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler):t.table.on(we+F,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,r=t.wrapper,a=t.options.groupable,n=L+"["+o.attr("field")+"]",i=t.content?".k-grid-header:first "+n:"table:first>.k-grid-header "+n;a&&!1!==a.enabled&&(r.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(r),t.groupable&&t._destroyGroupable(),Ue.chrome&&(r.find("div.k-grouping-header").css("touch-action","none"),r.find(i).css("touch-action","none")),t.groupable=new l.Groupable(r,g({},a,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:i,filter:i,allowDrag:t.options.reorderable,change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize,t.dataSource._skip=0,t.dataSource._pageSize=t.dataSource._take=t._endlessPageSize,t.dataSource._page=1))}})),t._addGroupableOptionsToHeader())},_addGroupableOptionsToHeader:function(){var e,t,r,l=It(this.columns),a={},n=this._headerCells();for(r=0;r<l.length;r++)l[r].field,a[l[r].field]=l[r];for(r=0;r<n.length;r++)(t=a[(e=n.eq(r)).attr(o.attr(Ie))])&&t.groupable&&t.groupable.sort&&e.data(Fe,t.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable("destroy"),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){for(var e=this._headerCells(),t=0;t<e.length;t++)e.eq(t).removeData(Fe)},_continuousItems:function(t,r){if(this.lockedContent){for(var o=this,l=o.table.add(o.lockedTable),a=e(t,l[0]),n=e(t,l[1]),i=r?qt(o.columns).length:1,s=r?o.columns.length-i:1,d=[],c=0;c<a.length;c+=i)v.apply(d,a.slice(c,c+i)),v.apply(d,n.splice(0,s));return d}},_selectable:function(){var t,r,l=this,a=[],n=l._isLocked(),i=l.options.selectable;if(i){l.selectable&&l.selectable.destroy(),l._selectedIds={},i=o.ui.Selectable.parseOptions(i),t=i.multiple,r=i.cell,l._hasDetails()&&(a[a.length]=".k-detail-row"),(l.options.groupable||l._hasFooters()||l._groups())&&(a[a.length]=".k-grouping-row,.k-group-footer"),""!==(a=a.join(","))&&(a=":not("+a+")");var s=l.table;n&&(s=s.add(l.lockedTable));var d=">"+(r?"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)":"tbody>tr"+a);l.selectable=new o.ui.Selectable(s,{filter:d,aria:!0,multiple:t,change:function(){var e;r||l._persistSelectedRows(),l._checkBoxSelection&&(e=l.selectable.value(),l._uncheckCheckBoxes(),l._checkRows(e),e.length&&e.length===l.items().length?l._toggleHeaderCheckState(!0):l._toggleHeaderCheckState(!1)),l.trigger(U)},useAllItems:n&&t&&r,relatedTarget:function(t){if(!r&&n){for(var o,a=e(),i=0,s=t.length;i<s;i++)o=l._relatedRow(t[i]),b(o[0],t)<0&&(a=a.add(o));return a}},continuousItems:function(){return l._continuousItems(d,r)},ignoreOverlapped:l.options.selectable&&l.options.selectable.ignoreOverlapped}),l.options.navigatable&&s.on("keydown"+F,(function(o){var a=l.current(),i=o.target;if(a)if(o.keyCode===h.SPACEBAR&&!o.shiftKey&&e.inArray(i,s)>-1&&!a.is(".k-edit-cell,.k-header")&&a.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),a=r?a:a.parent(),n&&!r&&(a=a.add(l._relatedRow(a))),t)if(o.ctrlKey){if(a.hasClass(ne))return void l._deselectCheckRows(a)}else l.selectable.clear();else l.selectable.clear();r||(l.selectable._lastActive=a),l.selectable.value(a)}else!r&&(e(i).is("td")||e(i).is("table")&&b(i,this._navigatableTables))&&(o.shiftKey&&o.keyCode==h.LEFT||o.shiftKey&&o.keyCode==h.RIGHT||o.shiftKey&&o.keyCode==h.UP||o.shiftKey&&o.keyCode==h.DOWN||o.keyCode===h.SPACEBAR&&o.shiftKey)&&(o.preventDefault(),o.stopPropagation(),a=a.parent(),n&&(a=a.add(l._relatedRow(a))),t?(l.selectable._lastActive||(l.selectable._lastActive=a),l.selectable.selectRange(l.selectable._firstSelectee(),a)):(l.selectable.clear(),l.selectable.value(a)))}))}},_clipboard:function(){var e=this.options;if(e.selectable&&e.allowCopy){var t=this;e.navigatable||t.table.add(t.lockedTable).attr("tabindex",0).on("mousedown"+F+" keydown"+F,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})).on("mousedown"+F,I+">"+E,C(kr,t)),t.copyHandler=C(t.copySelection,t),t.updateClipBoardState=function(){t.areaClipBoard&&t.areaClipBoard.val(t.getTSV()).focus().select()},t.bind("change",t.updateClipBoardState),t.wrapper.on("keydown",t.copyHandler),t.clearAreaHandler=C(t.clearArea,t),t.wrapper.on("keyup",t.clearAreaHandler)}},copySelection:function(t){t instanceof n.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)),this.areaClipBoard.val(this.getTSV()).focus().select())},getTSV:function(){var t=this,r=t.select(),o="\t",l=t.options.allowCopy;e.isPlainObject(l)&&l.delimeter&&(o=l.delimeter);var a="";if(r.length){r.eq(0).is("tr")&&(r=r.find("td:not(.k-group-cell)")),r.filter(":visible");var n=[],i=this.columns.length,s=t._isLocked()&&qt(t.columns).length,d=!0;e.each(r,(function(r,o){var l=(o=e(o)).closest("tr").index(),a=o.index();a-=o.prevAll(":hidden").length,s&&d&&(d=e.contains(t.lockedTable[0],o[0])),t._groups()&&d&&(a-=t._groups()),i>(a=d?a:a+s)&&(i=a);var c=o.text();n[l]||(n[l]=[]),n[l][a]=c}));var c=n.length;n=e.each(n,(function(e,t){t&&(n[e]=t.slice(i),c>e&&(c=e))})),e.each(n.slice(c),(function(e,t){a+=t?t.join(o)+"\r\n":"\r\n"}))}return a},clearArea:function(t){this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&hr(this.options.navigatable?e(this.current()).closest("table"):this.table,!0),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return kt(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=C(t._onColumnMediaResize,t),e(window).on(fe+F,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){this._columnMediaResizeHandler&&e(window).off(fe+F,this._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){for(var t=e||[],r=0;r<t.length;r++)this._setColumnMediaVisibility(t[r])},_setColumnMediaVisibility:function(e){var t=this;_t(e.media)?t._setColumnsMediaVisibility(e.columns):ht(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),pt(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),pt(e)},_setContentMediaWidth:function(){var t,r,o=this,l=o.options,a=o._isLocked();if(l.scrollable&&l.resizable){a&&o.lockedFooter?t=o.lockedFooter.children("table"):o.footer&&(t=o.footer.find(">.k-grid-footer-wrap>table")),t&&t[0]||(t=e());var n=a?o.wrapper.find(".k-grid-header-locked").find("table"):o.wrapper.find(".k-grid-header").find("table"),i=a?o.lockedTable:o.table,s=n.find("th"),d=n.find("colgroup"),c=s.length,p=s.filter(ft).length,h=s.length-p,f=0;if(""!==n[0].style.width&&parseFloat(n[0].style.width)!==f){for(var g=n.css("width"),m=0;m<c;m++)if(r=s[m],"none"!==e(r)[0].style.display){var k,_=Math.max(m,m-h),b=d.children()[_],v=b?b.style.width:"";""!==v?k=parseFloat(v):(n.css("width","auto"),k=u(s.eq(m)),n.css("width",g)),f+=k}i.css("width",f-1),n.css("width",f),t.css("width",f),o._updateStickyColumns()}}},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=C(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,r){for(var o=!1,l=0;l<e.length;l++){var a=e[l],n=a.minScreenWidth;n!==t&&null!==n&&(o=!0,n>r?this.hideColumn(a):this.showColumn(a)),!a.hidden&&a.columns&&(o=this._iterateMinScreenCols(a.columns,r)||o)}return o},_stickyColumns:function(){this._anyStickyColumns()&&this._setStickyColumns(!1)},_updateStickyColumns:function(){var e=this,t=k(jt(e.columns),(function(e){return e.groupHeaderColumnTemplate}));e._anyStickyColumns()&&(e._setStickyColumns(!0),e._templates(),t.length>0&&e._renderGroupRows(),e._hasFilterRow()&&e._updateStickyFilterCells())},_updateStickyFilterCells:function(){var t=this.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),r=jt(this.columns);t.length&&t.each((function(){var t,o,l=e(this),a=l.find("span").first().getKendoFilterCell();a&&(t=function(e,t){for(var r=0;r<e.length;r++)if(e[r].uid==t)return e[r]}(r,a.options.column.uid),o=l.attr("style")||"",t.sticky?(l.attr("style",o+t.stickyStyle),l.addClass(ue)):(o=(o=o.replace(Be,"")).replace(Oe,""),l.attr("style",o),l.removeClass(ue)))}))},_anyStickyColumns:function(){return Bt(this.columns).length},_setStickyColumns:function(e){var t=this,r=Bt(t.columns),o=function(e){return k(e,(function(e){return e.sticky&&!e.locked&&gt(e)}))}(t.columns),l=t._calculateStickyWidths(o);t._removeStickyAttributes(r),t._setStickyClassAttributes(r),t._setStickyStyleAttributes(o,l,e),e&&t._setStickyStyles(o,l)},_calculateStickyWidths:function(e,t,r){var o,l,a,n,i=Ke?"right":"left",s=Ke?"left":"right",d={left:new Array(e.length).fill(t||0),right:new Array(e.length).fill(r||0)};for(o=0;o<e.length-1;o++)l=e[o],a=this._sumColumnWidth(l)+d[i][o],d[i][o+1]=a;for(o=e.length-1;o>0;o--)l=e[o],n=this._sumColumnWidth(l)+d[s][o],d[s][o-1]=n;return d},_setStickyClassAttributes:function(e,t){var r,o;for(r=0;r<e.length;r++)(o=e[r]).columns&&(!t&&r&&(t=r),this._setStickyClassAttributes(Kt([o]),t)),t&&Pt(o,"headerAttributes","class",he),Pt(o,"attributes","class",ce),Pt(o,"headerAttributes","class",ue),Pt(o,"footerAttributes","class",pe)},_setStickyStyleAttributes:function(e,t,r){var o,l,a,n,i,s,d,c=this;for(o=0;o<e.length;o++)l=e[o],i="left: "+(a=t.left[o])+"px; right: "+(n=t.right[o])+"px;",l.columns&&(s=Ut([l]),d=c._calculateStickyWidths(s,a,n),c._setStickyStyleAttributes(s,d,r),r&&c._setStickyStyles(s,d)),Pt(l,"attributes","style",i),Pt(l,"headerAttributes","style",i),Pt(l,"footerAttributes","style",i),l.stickyStyle=i},_removeStickyAttributes:function(e){var t,r,o=new RegExp("(\\s*k-grid-content-sticky)*","ig"),l=new RegExp("(\\s*k-grid-header-sticky)*","ig"),a=new RegExp("(\\s*k-grid-footer-sticky)*","ig"),n=new RegExp("(\\s*k-grid-no-left-border)*","ig");for(t=0;t<e.length;t++)(r=e[t]).columns&&this._removeStickyAttributes(Kt([r])),Wt(r,"attributes","class",o),Wt(r,"attributes","style",Be),Wt(r,"attributes","style",Oe),Wt(r,"headerAttributes","class",l),Wt(r,"headerAttributes","class",n),Wt(r,"headerAttributes","style",Be),Wt(r,"headerAttributes","style",Oe),Wt(r,"footerAttributes","class",a),Wt(r,"footerAttributes","style",Be),Wt(r,"footerAttributes","style",Oe)},_setStickyStyles:function(t,r){var o,l,a,n,i,s,d,c,u,p,h,f=this,g=jt(Vt(f.columns)),m=f.tbody.children(":not(.k-detail-row)");for(o=0;o<t.length;o++)if(n=t[o],s=r.left[o],d=r.right[o],i=g.indexOf(n),(c=f._getColumnHeader(n)).addClass(ue),n.headerAttributes.class&&-1!==n.headerAttributes.class.indexOf(he)&&c.addClass(he),Ft(c,s,d),!n.columns)for(f.footer&&((u=f.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i)).addClass(pe),Ft(u,s,d)),l=0;l<m.length;l++)(a=e(m[l])).hasClass("k-grouping-row")?((p=a.find("."+n.groupHeaderColumnTemplateClass)).addClass(ce),Ft(p,s,d)):((h=a.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i)).addClass(ce),Ft(h,s,d))},_removeStickyStyles:function(t){var r,o,l,a,n,i,s,d,c,u=this,p=jt(Vt(u.columns)),h=u.tbody.children(":not(.k-detail-row)");for(r=0;r<t.length;r++)if(a=t[r],n=p.indexOf(a),(i=u._getColumnHeader(a)).removeClass(ue),i.removeClass(he),Ft(i,"",""),a.columns)u._removeStickyStyles(a.columns);else for(a.footerTemplate&&u.footer&&((s=u.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(n)).removeClass(pe),Ft(s,"","")),o=0;o<h.length;o++)(l=e(h[o])).hasClass("k-grouping-row")?((d=l.find("."+a.groupHeaderColumnTemplateClass)).removeClass(ce),Ft(d,"","")):((c=l.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(n)).removeClass(ce),Ft(c,"",""))},_getColumnHeader:function(t){return e("#"+t.headerAttributes.id).length?e("#"+t.headerAttributes.id):e("#"+this._cellId)},_sumColumnWidth:function(e){return e.columns?this._sumCurrentWidths(jt([e])):this._sumCurrentWidths([e])},_sumCurrentWidths:function(e){var t,r,o,l=0,a=0,n=e.length;for(o=0;o<n;o++)t=e[o],r=this._getColumnHeader(t),!t.hidden&&ht(t)&&(l+=(a=r.is(":visible")?r.outerWidth():t.width)?parseInt(a,10):0);return l},_relatedRow:function(t){var r=this.lockedTable;if(t=e(t),!r)return t;var o=t.closest(this.table.add(this.lockedTable)),l=o.find(">tbody>tr").index(t);return(o=o[0]===this.table[0]?r:this.table).find(">tbody>tr").eq(l)},_relatedCell:function(t){var r=this.lockedTable;if(t=e(t),!r)return t;var o=t.closest(this.table.add(this.lockedTable)),l=o.find(">tbody>tr>td").index(t);return(o=o[0]===this.table[0]?r:this.table).find(">tbody>tr>td").index(l)},clearSelection:function(){var e=this;e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._checkBoxSelection?e._deselectCheckRows(e.select()):(e.options.persistSelection?e._persistSelectedRows():e._selectedIds={},e.trigger(U))},select:function(e){var t=this,r=t.selectable,l=o.ui.Selectable.parseOptions(this.options.selectable).cell;return(e=t.table.add(t.lockedTable).find(e)).length?(r&&!r.options.multiple&&(r.clear(),e=e.first()),t._isLocked()&&(e=e.add(e.map((function(){return l?t._relatedCell(this):t._relatedRow(this)})))),void(r&&!t._checkBoxSelection?r.value(e):(t._checkRows(e),t.select().length===t.items().length&&t._toggleHeaderCheckState(!0),l||t._persistSelectedRows(),t.trigger(U)))):r?r.value():t.items().filter("."+ne)},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find("tr "+se).prop("checked",!0).attr("aria-checked",!0).attr("aria-label","Deselect all rows"):t.thead.add(t.lockedHeader).find("tr "+se).prop("checked",!1).attr("aria-checked",!1).attr("aria-label","Select all rows")},_uncheckCheckBoxes:function(){this.table.add(this.lockedTable).find("tbody "+se).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")},_deselectCheckRows:function(t){var r=this;t=r.table.add(r.lockedTable).find(t),r._isLocked()&&(t=t.add(t.map((function(){return r._relatedRow(this)})))),t.each((function(){e(this).removeClass(ne).find(se).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")})),r._toggleHeaderCheckState(!1),r._persistSelectedRows(),r.trigger(U)},_checkRows:function(t){t.each((function(){e(this).addClass(ne).find(se).prop("checked",!0).attr("aria-label","Deselect row").attr("aria-checked",!0)}))},_persistSelectedRows:function(){var e,t,r,o=this,l=o.items(),a=o.dataSource.options.schema,n={};if(a&&a.model&&o._data&&(r=w(a.model)?a.model.fn.idField:a.model.id)){o.select().each((function(){t=o.dataItem(this),n[t[r]]=!0}));for(var i=0;i<l.length;i++)e=(t=o.dataItem(l[i]))[r],n[e]?o._selectedIds[e]=!0:delete o._selectedIds[e]}},selectedKeyNames:function(){var e=[];for(var t in this._selectedIds)e.push(t);return e.sort(),e},_updateCurrentAttr:function(t,r){var o,l,a=e(t).data("headerId");e(t).removeClass(le).closest("table").removeAttr("aria-activedescendant"),a?(a=a.replace(this._cellId,""),e(t).attr("id",a)):e(t).removeAttr("id"),(o=r.attr("id"))!=this._cellId&&r.data("headerId",o),r.is("th")?l=o:r.attr("id",this._cellId),r.addClass(le).closest("table").attr("aria-activedescendant",l||this._cellId),this._current=r},_scrollCurrent:function(){var t=this._current,r=this.options.scrollable;if(t&&r){var o=t.parent(),l=o.closest("table").parent(),a=l.is(".k-grid-content-locked,.k-grid-header-locked"),n=l.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),i=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];if(n)if(this.virtualScroll){var s=Math.max(b(o[0],this._items(o.parent())),0);this.virtualScroll.rows?(this._rowVirtualIndex=this.virtualScrollable.itemIndex(s),this.virtualScrollable.scrollIntoView(o)):(this._rowVirtualIndex=s,this._scrollTo(this._relatedRow(o)[0],i))}else this._scrollTo(this._relatedRow(o)[0],i);this.lockedContent&&(this.lockedContent[0].scrollTop=i.scrollTop),a||this._scrollTo(t[0],i)}},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,r,o){var l=this._current;if((t=e(t)).length&&(!l||l[0]!==t[0])){var a=t.parent(),n=a.children(R),i=parseInt(a.children().first().attr("colspan"),10);this._hasVirtualColumns()&&(this._virtualCellIndex=(i>1?i:0)+n.index(t)),this._updateCurrentAttr(l,t),o||this._scrollCurrent(),r||this.trigger(Ce,{element:t})}return t&&t.length&&(this._lastCellIndex=t.parent().children(R).index(t)),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(le),this._current=null)},_scrollTo:function(t,r){var l=t.tagName.toLowerCase(),a="td"===l||"th"===l,n=e(t).closest("table")[0],i=t[a?"offsetWidth":"offsetHeight"],s=r[a?"scrollLeft":"scrollTop"],d=r[a?"clientWidth":"clientHeight"],c="relative"===e(t).css("position")&&Ke&&a?Math.abs(n.offsetLeft-t.offsetLeft):t[a?"offsetLeft":"offsetTop"],u=c+i,p=0,h=0,f=0;Ke&&a&&(Ue.msie||Ue.edge?h=n.offsetLeft:(Ue.mozilla||Ue.webkit&&Ue.version>85)&&(f=n.offsetLeft-o.support.scrollbar())),p=(s=Math.abs(s+h-f))>c?c:u>s+d?i<=d?u-d:c:s,p=Math.abs(p+h)+f,r[a?"scrollLeft":"scrollTop"]=p},_navigatable:function(){var t=this;if(t.options.navigatable){var r=t.table.add(t.lockedTable),l=t.thead.parent().add(e(">table",t.lockedHeader)),a=r;t.options.scrollable&&(a=a.add(l),l.attr(Se,-1)),this._navigatableTables=a,this._headertables=l,a.off("mousedown"+F+" focus"+F+" focusout"+F+" keydown"+F),l.on("keydown"+F,C(t._openHeaderMenu,t)).find("a.k-link").attr("tabIndex",-1),r.attr(Se,T.max(r.attr(Se)||0,0)).on("keydown"+F,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})),a.on(o.support.touch?"touchstart"+F:"mousedown"+F,I+">"+E,C(kr,t)).on("focus"+F,C(t._tableFocus,t)).on("focusout"+F,C(t._tableBlur,t)).on("keydown"+F,t,C(t._tableKeyDown,t))}},_openHeaderMenu:function(e){e.altKey&&e.keyCode==h.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(Se,-1),e.attr(Se,0)},_tableFocus:function(t){var r=this.current(),o=e(t.currentTarget);r&&r.is(":visible")?r.addClass(le):this._virtualColScroll?this._setCurrent(o.find(D),!0,!0):this._setCurrent(o.find(D)),this._setTabIndex(o)},_tableBlur:function(){var e=this.current();e&&e.removeClass(le)},_findCellIndex:function(e,t,r){var o,l;if(r)for(l=t;l>=0&&(o=l,e[l].hidden);l--);else for(l=t;l<e.length&&(o=l,e[l].hidden);l++);return o},_scrollToColumn:function(e,r){if(this._virtualCellIndex===t)return!1;var l=this,a=l._virtualCellIndex,n=jt(Vt(l.columns)),i=0;e==(Ke?h.LEFT:h.RIGHT)&&a!==n.length-1?a=l._findCellIndex(n,a+1):e==(Ke?h.RIGHT:h.LEFT)&&a?a=l._findCellIndex(n,a-1,!0):e==h.HOME?a=l._findCellIndex(n,0):e==h.END&&(a=l._findCellIndex(n,n.length-1,!0));for(var s=0;s<a;s++)i+=n[s].width;return l._virtualCellIndex=a,r&&(r.preventDefault(),r.stopPropagation()),o.scrollLeft(l.content,i),!0},_tableKeyDown:function(t){var r=this.current(),o=this.virtualScroll||{},l=this.virtualScrollable&&this.virtualScrollable.fetching(),a=e(t.target),n=!t.isDefaultPrevented()&&!a.is(":button,a,:input,a>.k-icon");if(l)t.preventDefault();else if((!o.columns||r&&document.body.contains(r[0])||!this._scrollToColumn(t.keyCode,t))&&(r||(r=e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(D)),r.length)){var i=!1;n&&t.keyCode==h.UP&&(i=this._moveUp(r,t.shiftKey)),n&&t.keyCode==h.DOWN&&(i=this._moveDown(r,t.shiftKey)),n&&t.keyCode==(Ke?h.LEFT:h.RIGHT)&&(i=this._moveRight(r,t.altKey,t.shiftKey,t.ctrlKey,t.currentTarget)),n&&t.keyCode==(Ke?h.RIGHT:h.LEFT)&&(i=this._moveLeft(r,t.altKey,t.shiftKey,t.ctrlKey,t.currentTarget)),n&&t.keyCode==h.PAGEDOWN&&(i=this._handlePageDown()),n&&t.keyCode==h.PAGEUP&&(i=this._handlePageUp()),n&&t.keyCode==h.HOME&&(i=this._handleHome(r,t.ctrlKey)),n&&t.keyCode==h.END&&(i=this._handleEnd(r,t.ctrlKey)),n&&t.keyCode==h.SPACEBAR&&(i=this._handleSpaceKey(r,t.ctrlKey)),t.keyCode!=h.ENTER&&t.keyCode!=h.F2||(i=this._handleEnterKey(r,t.currentTarget,a)),t.keyCode==h.ESC&&(i=this._handleEscKey(r,t.currentTarget)),t.keyCode==h.TAB&&(i=this._handleTabKey(r,t.currentTarget,t.shiftKey,a)),i&&(t.preventDefault(),t.stopPropagation())}},_moveLeft:function(t,r,o,l,a){var n,i,s=t.parent(),d=s.parent();return r?this.collapseRow(s):l&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!0):(i=d.find(I).index(s),(n=this._prevHorizontalCell(d,t,i))[0]||(o?this.lockedTable?(n=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(n=n.prevAll(z+":first")),n=n.children(R+":last")):n=this._tabNext(t,a,!0):(d=this._horizontalContainer(d),(n=this._prevHorizontalCell(d,t,i))[0]!==t[0]&&hr(d.parent(),!0))),this._setCurrent(n)),!0},_moveRight:function(t,r,o,l,a){var n,i,s=t.parent(),d=s.parent();return r?this.expandRow(s):l&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!1):(i=d.find(I).index(s),(n=this._nextHorizontalCell(d,t,i))[0]||(o?this.lockedTable?(n=this._relatedRow(s),e.contains(this.table[0],s[0])&&(n=n.nextAll(z+":first")),n=n.children(R+":first")):n=this._tabNext(t,a,!1):(d=this._horizontalContainer(d,!0),(n=this._nextHorizontalCell(d,t,i))[0]!==t[0]&&hr(d.parent(),!0))),this._setCurrent(n)),!0},_moveUp:function(e,t){var r,o=e.parent().parent();t?(r=(r=e.parent()).prevAll(z+":first"),r=e.parent().is(z)?r.children().eq(e.index()):r.children(R+":last")):(r=this._prevVerticalCell(o,e))[0]||(this._lastCellIndex=0,o=this._verticalContainer(o,!0),(r=this._prevVerticalCell(o,e))[0]&&hr(o.parent(),!0));var l=this._lastCellIndex||0;return this._setCurrent(r),this._lastCellIndex=l,!0},_moveDown:function(e,t){var r,o=e.parent().parent();t?(r=(r=e.parent()).nextAll(z+":first"),r=e.parent().is(z)?r.children().eq(e.index()):r.children(R+":first")):(r=this._nextVerticalCell(o,e))[0]||(this._lastCellIndex=0,o=this._verticalContainer(o),(r=this._nextVerticalCell(o,e))[0]&&hr(o.parent(),!0));var l=this._lastCellIndex||0;return this._setCurrent(r),this._lastCellIndex=l,!0},_moveColumn:function(t,r){var o=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible"),l=mt(Ht(this.columns)),a=o.index(e(t)),n=r?-1:1,i=l[a],s=Rt(l,this.columns,a,a+n);s>=0&&(this.reorderColumn(s,i,r),this.trigger(me,{newIndex:s,oldIndex:a,column:i}))},_handleHome:function(e,t){var r,l=e.parent(),a=l.parent(),n=this.lockedTable&&this.lockedTable.children("tbody")[0]===a[0],i=a[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(o.keys.HOME),!0):(t?r=this.lockedTable?this.lockedTable.find(A+">"+E+":first"):this.table.find(A+">"+E+":first"):(i||n)&&(i&&this.lockedTable&&(l=this._relatedRow(l)),r=l.children(R+":first")),r&&r.length?(this._setCurrent(r),!0):void 0)},_handleEnd:function(e,t){var r,l=e.parent(),a=l.parent(),n=this.lockedTable&&this.lockedTable.children("tbody")[0]===a[0],i=a[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(o.keys.END),!0):(t?r=this.table.find("tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible:last>"+E+":last"):(i||n)&&(!i&&this.lockedTable&&(l=this._relatedRow(l)),r=l.children(R+":last")),r&&r.length?(this._setCurrent(r),!0):void 0)},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,r,o,l){var a;return!(!this.options.editable||"incell"!=this._editMode()||t.is("th")||(this.options.scrollable?this._headertables.filter(r).length:this.thead.filter(l).length)||((a=e(d()).closest(".k-edit-cell"))[0]&&a[0]!==t[0]&&(t=a),(a=this._tabNext(t,r,o))[0]===t[0]||!a.length||(this._handleEditing(t,a,a.closest("table")),0)))},_handleEscKey:function(t,r){var o,l=d(),a="incell"==this._editMode();if(!(o=t)||!o.hasClass("k-edit-cell")&&!o.parent().hasClass("k-grid-edit-row"))return!!t.has(l).length&&(hr(r,!0),!0);if(a)this.closeCell(!0);else{var n=e(t).parent().index();l&&l.blur(),this.cancelRow(!0),n>=0&&this._setCurrent(this.items().eq(n).children(E).first())}return hr(r,!0),!0},_toggleCurrent:function(e,t,r){var o=e.parent();return(o.is(".k-grouping-row")||!(t||!r))&&(o.find(".k-icon:first").click(),!0)},_handleSpaceKey:function(t,r){var l=this;if(r&&l.groupable&&t.hasClass("k-header")){var a=l.groupable.descriptors(),n=t.attr(o.attr("field")),i=l.groupable.aggregates(),s=t.attr(o.attr("title"))||n;return l.groupable._canDrag(t)?(a.push({field:n,dir:"asc",aggregates:i||[]}),s+=" "+l.options.messages.ungroupHeader):(a=e.grep(a,(function(e){return e.field!==n})),s+=" "+l.options.messages.groupHeader),t.attr("aria-label",s),l.dataSource.group(a),!0}},_handleEnterKey:function(t,r,o){var l,a=this.options.editable&&!1!==this.options.editable.update,n=o.closest("[role=gridcell]"),i=this._hasDetails();if(o.is("table")||e.contains(t[0],o[0])||(t=n),t.is("th"))return(l=t.find(".k-link")).length?l.click():t.find(se).focus(),!0;if(this._toggleCurrent(t,a,i))return!0;var s=t.find(":kendoFocusable:first");return s[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(s.focus(),!0):!(!a||o.is(":button,.k-button,textarea")||(n[0]||(n=t),this._handleEditing(n,!1,r),0))},_nextHorizontalCell:function(e,t,r){var o=t.nextAll(R);if(!o.length){var l=e.find(I);if(-1==l.index(t.parent())){if(t.hasClass("k-header")){var a=[];return Lt([qt(this.columns)[0]],Jt(l.eq(0).children(":visible").first()),a,0,0),a[r]?a[r][0]:t}return t.parent().hasClass("k-filter-row")?l.last().children(R).first():l.eq(r).children(R).first()}}return o.first()},_prevHorizontalCell:function(e,t,r){var o=t.prevAll(R);if(!o.length){var l=e.find(I);if(-1==l.index(t.parent())){if(t.hasClass("k-header")){var a=[],n=qt(this.columns);return Lt([n[n.length-1]],Jt(l.eq(0).children().last()),a,0,0),a[r]?a[r][0]:t}return t.parent().hasClass("k-filter-row")?l.last().children(R).last():l.eq(r).children(R).last()}}return o.first()},_currentDataIndex:function(e,r){var o=r.attr("data-index");if(!o)return t;var l=qt(this.columns).length;return l&&!e.closest("div").hasClass("k-grid-content-locked")[0]?o-l:o},_prevVerticalCell:function(t,r){var o,l=r.parent(),a=t.children(I),n=a.index(l),i=this._currentDataIndex(t,r);if(i||r.hasClass("k-header"))return(o=Qt(r)).eq(o.length-2);if(i=Math.max(l.children(R).index(r),this._lastCellIndex||0),l.hasClass("k-filter-row"))return $t(t).filter(ft).eq(i);if(-1==n){if(this._hasVirtualColumns()&&(i=this._virtualCellIndex),!(l=t.find("tr.k-filter-row:visible"))[0])return(this._hasDetails()||r.parent().find(".k-hierarchy-cell").length)&&i&&i--,$t(t).filter(ft).eq(i)}else l=0===n?e():a.eq(n-1);return(o=l.children(R)).length>i?o.eq(i):o.eq(0)},_nextVerticalCell:function(e,r){var o,l,a=r.parent(),n=e.children(I),i=n.index(a),s=this._currentDataIndex(e,r),d=this.virtualScroll||{};if(-1!=i&&s===t&&r.hasClass("k-header"))return Jt(r).eq(1);s=s?parseInt(s,10):a.children(R).index(r),s=Math.max(s,this._lastCellIndex||0),-1==i?(a=n.eq(0),d.columns&&(l=parseInt(a.children().first().attr("colspan"),10),s=this._virtualCellIndex-(l>1?l:0)),(this._hasDetails()||a.find(".k-hierarchy-cell").length)&&s++):a=n.eq(i+r[0].rowSpan);var c=s;if(this._currentDataIndex(e,r)!==t)for(var u=a.children(":not(.k-group-cell):not(.k-hierarchy-cell)"),p=u.filter(":hidden"),h=0,f=p.length;h<f;h++)u.index(p[h])<s&&c--;return s=c,(o=a.children(R)).length>s?o.eq(s):o.eq(0)},_verticalContainer:function(e,t){var r=e.parent(),o=this._navigatableTables.length,l=Math.floor(o/2),a=b(r[0],this._navigatableTables);return t&&(l*=-1),((a+=l)>=0||a<o)&&(r=this._navigatableTables.eq(a)),r.find(t?">thead":">tbody")},_horizontalContainer:function(e,t){var r=this._navigatableTables.length;if(r<=2)return e;var o=e.parent(),l=b(o[0],this._navigatableTables);return l+=t?1:-1,!t||2!=l&&l!=r?!t&&(1==l||l<0)?e:this._navigatableTables.eq(l).find("thead, tbody"):e},_tabNext:function(e,t,r){var o=!0,l=r?e.prevAll(R+":first"):e.nextAll(":visible:first");if(!l.length){if(l=e.parent(),this.lockedTable&&(o=r&&t==this.lockedTable[0]||!r&&t==this.table[0],l=this._relatedRow(l)),o){if(this._hasVirtualColumns())return e;l=l[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")}l=l.children(R+(r?":last":":first"))}return l},_handleEditing:function(t,r,o){var l,a,n=this,i=e(d()),s=n._editMode(),c=Ue.msie,u=n._editContainer,p=n.options.editable&&!1!==n.options.editable.update;if(o=e(o),a="incell"==s?t.hasClass("k-edit-cell"):t.parent().hasClass("k-grid-edit-row"),n.editable){if(e.contains(u[0],i[0])&&(i.blur(),c&&i.blur()),!n.editable)return void hr(o);if(!n.editable.end())return"incell"==s?n._setCurrent(u):n._setCurrent(u.children().filter(R).first()),void((l=u.find(":kendoFocusable:first")[0])&&l.focus());"incell"==s?n.closeCell():(n.saveRow(),a=!0)}r&&n._setCurrent(r),hr(o,!0),p&&(!a&&!r||r)&&(s===ze?e(n.current()).hasClass("k-hierarchy-cell")||n.editCell(n.current()):n.editRow(n.current().parent()))},_wrapper:function(){var e=this,t=e.table,r=e.options.height,o=e.options.width,l=e.element;l.is("div")||(l=l.wrap("<div/>").parent()),e.wrapper=l.addClass("k-grid k-widget k-grid-display-block"),r&&(e.wrapper.css(ye,r),t.css(ye,"auto")),o&&e.wrapper.css("width",o),e._initMobile()},_initMobile:function(){var e=this.options,t=this;if(this._isMobile=!0===e.mobile&&o.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile,this._isMobile){var r=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+o.ns+'stretch="true" data-'+o.ns+'role="view" data-'+o.ns+'init-widgets="false"></div>').parent();this.pane=this._createPane(r),this.view=this.pane.view(),e.height?this.pane.element.parent().css(ye,e.height):this.pane.element.parent().css(ye,this.wrapper[0].style.height),this._editAnimation="slide",t.wrapper.on("transitionend"+F,(function(e){e.stopPropagation()})),t.wrapper.on("contextmenu"+F,"th a",(function(e){return e.preventDefault(),!1})),this.view.bind("showStart",(function(){t._isLocked()&&(t._updateTablesWidth(),t._applyLockedContainersWidth(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t._syncLockedFooterHeight())}))}},_createPane:function(e){return o.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}})},_tbody:function(){var t,r=this.table;(t=r.find(">tbody")).length||(t=e("<tbody/>").appendTo(r)),this.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,r,l,a,n,i=this,s=i.options.scrollable,d=!0!==s&&s.virtual?"string"==typeof(a=s.virtual)?"true"===(n=a.toLowerCase())?{rows:!0}:{rows:n.indexOf("rows")>-1,columns:n.indexOf("columns")>-1}:!0===a?{rows:!0}:void 0:null,c=!o.support.kineticScrollNeeded||d&&d.rows?o.support.scrollbar():0;if(s){(t=i.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(i.table)),t.css(Ke?"padding-left":"padding-right",s.virtual?c+1:c),(r=e('<table role="grid" />')).width(i.table[0].style.width),r.append(i.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(r)),i.content=i.table.parent(),i.virtualScroll=d,i.content.is(".k-virtual-scrollable-wrap, ."+Je)&&(i.content=i.content.parent()),i.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(i.content=i.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),d&&d.rows&&!i.virtualScrollable&&i._createVirtualScrollable(),d&&d.columns&&i.table.css({width:zt(Nt(Ot(i.columns)))}),l=t.children(".k-grid-header-wrap"),i.scrollables=l.add(i.content);var u=i.wrapper.find(".k-grid-footer");if(u.length&&(i.scrollables=i.scrollables.add(u.children(".k-grid-footer-wrap"))),l.unbind("scroll"+F).bind("scroll"+F,(function(e){i._scrollLeft!==this.scrollLeft&&o.scrollLeft(i.scrollables.not(e.currentTarget),this.scrollLeft)})),d&&d.rows)i.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+F).bind("scroll"+F,(function(){var e=this.scrollLeft!=i._scrollLeft;i._scrollLeft=this.scrollLeft,o.scrollLeft(i.scrollables,this.scrollLeft),i.lockedContent&&(i.lockedContent[0].scrollTop=this.scrollTop),d.columns&&e&&i.refresh()}));else{var p=s.endless,h=i.dataSource.options.pageSize;p&&(i._endlessPageSize=h),i.content.unbind("scroll"+F).bind("scroll"+F,(function(e){var t=this.scrollLeft!=i._scrollLeft;i._scrollLeft=this.scrollLeft,o.scrollLeft(i.scrollables.not(e.currentTarget),i._scrollLeft),i.lockedContent&&e.currentTarget==i.content[0]&&(i.lockedContent[0].scrollTop=this.scrollTop),p&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!i._endlessFetchInProgress&&i._endlessPageSize<i.dataSource.total()&&(i._skipRerenderItemsCount=i._endlessPageSize,i._endlessPageSize=i._endlessPageSize+h,i.dataSource.options.endless=!0,i._endlessFetchInProgress=!0,i.dataSource.pageSize(i._endlessPageSize)),d&&d.columns&&t&&(i._virtualColScroll=!0,i._cacheEditableState(),i.refresh(),i._restoreEditableState(),i._virtualColScroll=!1)}));var f=i.content.data("kendoTouchScroller");f&&f.destroy(),(f=o.touchScroller(i.content))&&f.movable&&(i.touchScroller=f,f.movable.bind("change",(function(e){o.scrollLeft(i.scrollables,-e.sender.x),i.lockedContent&&i.lockedContent.scrollTop(-e.sender.y)})),i.one(J,(function(e){e.sender.wrapper.addClass("k-grid-backface")})))}}},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new Ye(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()}}),e.virtualScrollable.bind(te,C(e._onVirtualPaging,e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===Ae},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===ze},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_hasVirtualColumns:function(){return!!(this.virtualScroll||{}).columns},_scrollVirtualWrapper:function(){var e=this,t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t,r,o=this,l=o._editableState||{},a=l.model,n=o.dataSource,i=o._isVirtualInlineEditable(),s=o._isVirtualIncellEditable(),d=o._hasVirtualColumns();(i||s||d)&&a&&n._getByUid(a.uid,n.view())&&(o._editMode()===Ae?(o._shouldClearEditableState=!1,o.editRow(a),d||o._focusEditable()):o._editMode()===ze&&(t=o.tbody.children(Xe("uid",a.uid)),(r=e(t).children(Xe(Ie,l.field)))[0]&&(o._shouldClearEditableState=!1,o.editCell(r),d||o._focusEditable()))),o._shouldClearEditableState=!0},_focusEditable:function(){var e=this,t=(e._editableState||{}).field,r=e._editContainer;r&&r.length&&!S(r[0],d())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()||e._hasVirtualColumns()?r.find(Xe(Re,t)).find(ae).eq(0).focus():(e._isVirtualIncellEditable()||e._hasVirtualColumns())&&r.find(ae).eq(0).focus())},_canFocusEditable:function(){var e=this;return(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(br((e.virtualScrollable||{}).wrapper,e._editContainer)||br(e.content,e._editContainer))},_cacheEditableState:function(){var t,r,l=this,a=l._editContainer,n=a?l._modelForContainer(a):null,i=l._isVirtualInlineEditable(),s=l._isVirtualIncellEditable(),c=l._hasVirtualColumns();(i||s||c)&&n&&(l._clearEditableState(),t=e(d()),a&&t[0]&&S(a[0],t[0])&&(t.change(),(r=o.widgetInstance(t,o.ui))&&w(r.value)&&t.is(Ee)&&(r.value(t.val()),r.trigger(U))),l._editMode()===Ae?l._editableState={model:n,field:t.closest("["+o.attr(Re)+"]").attr(o.attr(Re))}:l._editMode()===ze&&(l._editableState={model:n,field:a.attr(o.attr(Ie))}))},_clearSortClasses:function(){var e=this;e.content&&e.content.find("col:not(.k-group-col):not(.k-hierarchy-col)").removeClass("k-sorted"),e.lockedContent&&e.lockedContent.find("col:not(.k-group-col):not(.k-hierarchy-col)").removeClass("k-sorted")},_clearEditableState:function(){var e=this;(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_renderNoRecordsContent:function(){var t=this;if(t.options.noRecords){var r=t.table.parent().children("."+de);r.length&&(t.angular("cleanup",(function(){return{elements:r.get()}})),r.remove()),t.dataSource&&t.dataSource.view().length||(r=e(t.noRecordsTemplate({})).insertAfter(t.table),t.angular("compile",(function(){return{elements:r.get(),data:[{}]}})))}},_setContentWidth:function(t){var r,l=this,a="k-grid-content-expander",n=l.resizable;l.options.scrollable&&l.wrapper.is(":visible")&&(r=l.table.parent().children("."+a),l._setContentWidthHandler=C(l._setContentWidth,l),l.dataSource&&l.dataSource.view().length?r[0]&&(r.remove(),n&&n.unbind("resize",l._setContentWidthHandler)):(r[0]||(r=e('<div class="k-grid-content-expander"></div>').appendTo(l.table.parent()),n&&n.bind("resize",l._setContentWidthHandler)),l.thead&&(r.width(l.thead.width()),isNaN(parseFloat(t,10))||o.scrollLeft(l.content,t))),l._applyLockedContainersWidth(),l._syncLockedContentHeight(),l.lockedHeader&&0===l.table[0].clientWidth&&(l.table[0].style.width="1px"))},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),r=t.parent(),l=this.wrapper[0].clientWidth,a=this._groups(),n=o.support.scrollbar(),i=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),d=At(i),c=At(s);a>0&&(d+=u(this.lockedHeader.find(".k-group-cell:first"))*a),d>=l&&(d=l-3*n),this.lockedHeader.add(this.lockedContent).width(d),r[0].style.width=r.parent().width()-d-2+"px",t.add(this.table).width(c),this.virtualScrollable&&!je&&(l-=n),this.content[0].style.width=l-d-1+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(d),(e=this.footer.find(".k-grid-footer-wrap"))[0].style.width=r[0].clientWidth+"px",e.children().first().width(c))}},_setContentHeight:function(){var e,t,r,l=this,a=l.options,n=l.wrapper.children(".k-grid-header"),i=o.support.scrollbar(),s=(a.scrollable||{}).height;a.scrollable&&l.wrapper.is(":visible")&&(s&&""===l.content[0].style.height&&(l.content[0].style.height=s),e=l.wrapper.innerHeight(),e-=p(n),l.pager&&l.pager.element.is(":visible")&&(e-=p(l.pager.element)),a.groupable&&(e-=p(l.wrapper.children(".k-grouping-header"))),a.toolbar&&(e-=p(l.wrapper.children(".k-grid-toolbar"))),l.footerTemplate&&(e-=p(l.wrapper.children(".k-grid-footer"))),((t=l.wrapper)[0].style.height||(r=t.height(),t.height("auto"),r!=t.height()?(t.height(""),1):(t.height(""),0)))&&(e>2*i?(l.lockedContent&&(i=l.table[0].offsetWidth>l.table.parent()[0].clientWidth?i:0,l.lockedContent.height(e-i)),l.content.height(e)):l.content.height(2*i+1)))},_averageRowHeight:function(){var e=this,t=e._items(e.tbody,!0).length,r=e._rowHeight;if(0===t)return r;e._rowHeight||(e._rowHeight=r=p(e.table)/t,e._sum=r,e._measures=1);var o=p(e.table)/t;return r!==o&&(e._measures++,e._sum+=o,e._rowHeight=e._sum/e._measures),r},_dataSource:function(){var e,r=this,o=r.options,l=o.dataSource;l=_(l)?{data:l}:l,f(l)&&(g(l,{table:r.table,fields:r.columns}),e=o.pageable,f(e)&&e.pageSize!==t&&(l.pageSize=e.pageSize)),r.dataSource&&r._refreshHandler?r.dataSource.unbind(U,r._refreshHandler).unbind(x,r._progressHandler).unbind(H,r._errorHandler).unbind(Le,r._sortHandler):(r._refreshHandler=C(r.refresh,r),r._progressHandler=C(r._requestStart,r),r._errorHandler=C(r._error,r),r._sortHandler=C(r._clearSortClasses,r)),r.dataSource=a.create(l).bind(U,r._refreshHandler).bind(x,r._progressHandler).bind(H,r._errorHandler).bind(Le,r._sortHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var r,a,n,i,s,d,c,u,p,h=this,f=h.tbody,g=t.model,m=h.tbody.find("tr["+o.attr("uid")+"="+g.uid+"]"),k=m.hasClass("k-alt"),_=h._items(f).index(m),b=h.lockedContent;if(b&&(r=h._relatedRow(m)),m.add(r).children(".k-edit-cell").length&&!h.options.rowTemplate)m.add(r).children(":not(.k-group-cell,.k-hierarchy-cell)").each((function(){a=e(this),(n=jt(h.columns)[h._calculateColumnIndex(a)]).field===t.field&&(a.hasClass("k-edit-cell")?a.addClass("k-dirty-cell"):h._displayCell(a,n,g))}));else if(!m.hasClass("k-grid-edit-row")){d=e().add(m),b&&(i=(k?h.lockedAltRowTemplate:h.lockedRowTemplate)(g),d=d.add(r),r.replaceWith(i)),h.angular("cleanup",(function(){return{elements:d.get()}})),i=(k?h.altRowTemplate:h.rowTemplate)(g),m.replaceWith(i),i=h._items(f).eq(_);var v=[{dataItem:g}];for(b&&(m=m.add(r),r=h._relatedRow(i)[0],ur(i[0],r),i=i.add(r),v.push({dataItem:g})),h.angular("compile",(function(){return{elements:i.get(),data:v}})),((s=h.options.selectable)||h._checkBoxSelection)&&m.hasClass("k-state-selected")&&h.select(i),u=d.children(":not(.k-group-cell,.k-hierarchy-cell)"),c=i.children(":not(.k-group-cell,.k-hierarchy-cell)"),_=0,p=h.columns.length;_<p;_++)n=h.columns[_],a=c.eq(_),s&&u.eq(_).hasClass("k-state-selected")&&a.addClass("k-state-selected");h.trigger("itemChange",{item:i,data:g,ns:l})}},_pageable:function(){var t,l=this,a=l.options.pageable;a&&((t=l.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager-wrap k-grid-pager"/>')),"top"===a.position?t.prependTo(l.wrapper).addClass("k-grid-pager-top"):t.appendTo(l.wrapper),l.pager&&l.pager.destroy(),"object"==typeof a&&a instanceof o.ui.Pager?l.pager=a:l.dataSource._groupPaging?l.pager=new r(t,g({},a,{dataSource:l.dataSource})):l.pager=new o.ui.Pager(t,g({},a,{dataSource:l.dataSource})),l.pager.bind("pageChange",(function(e){l.trigger("page",{page:e.index})&&e.preventDefault()})),l._togglePagerVisibility())},_footer:function(){var t,r=this,l=r.dataSource.aggregates(),a="",n=r.footerTemplate,i=r.options,s=r.footer||r.wrapper.find(".k-grid-footer");if(n){if(a=e(r._wrapFooter(n(l))),s.length){var d=a;r.angular("cleanup",(function(){return{elements:s.get()}})),s.replaceWith(d),s=r.footer=d}else s=i.scrollable?r.footer=i.pageable&&"top"!==i.pageable.position?a.insertBefore(r.wrapper.children("div.k-grid-pager")):a.appendTo(r.wrapper):r.footer=a.insertBefore(r.tbody);r.angular("compile",(function(){return{elements:s.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:m(r.columns,(function(e){return{column:e,aggregate:l[e.field]}}))}}))}else s&&!r.footer&&(r.footer=s);if(s.length&&(i.scrollable&&(t=s.attr("tabindex",-1).children(".k-grid-footer-wrap"),r.scrollables=e(r.scrollables.filter((function(){return!e(this).is(".k-grid-footer-wrap")})).toArray()).add(t)),r._footerWidth&&s.find("table").css("width",r._footerWidth),t)){var c=o.scrollLeft(r.content);!0!==i.scrollable&&r.virtualScroll&&r.virtualScroll.rows&&(c=o.scrollLeft(r.wrapper.find(".k-virtual-scrollable-wrap"))),o.scrollLeft(t,c)}r.lockedContent&&(r._appendLockedColumnFooter(),r._applyLockedContainersWidth(),r._syncLockedFooterHeight())},_wrapFooter:function(t){var r="",l=o.support.mobileOS?0:o.support.scrollbar();return this.options.scrollable?(r=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table><tbody>'+t+"</tbody></table></div></div>"),this._appendCols(r.find("table")),r.css(Ke?"padding-left":"padding-right",l),r):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,r,l,a,n,i,s=this,d=jt(s.columns),c=s.options,u=c.columnMenu,p=k(s.columns,(function(e){return e.columns!==t})).length>0,h=k(s.columns,(function(e){return!1!==e.lockable})).length>0,f=k(s.columns,(function(e){return!0===e.stickable})).length>0,m=this._isMobile,_=function(e){s.trigger(O,{field:e.field,container:e.container})},b=function(e){s.trigger(N,{field:e.field,container:e.container})},v=function(e){hr(e.closest("table"),!0)},C=function(e){s.trigger(be,{column:e.column})},w=function(e){s.trigger(ve,{column:e.column})},y=function(e){s.trigger("sort",{sort:e.sort})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&(s.dataSource.options.endless=null,s._endlessPageSize=s.dataSource.options.pageSize,s.dataSource.pageSize(s.dataSource.options.pageSize)))},S=function(e){s.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&(s.dataSource.options.endless=null,s._endlessPageSize=s.dataSource.options.pageSize,s.dataSource.pageSize(s.dataSource.options.pageSize)))},T=c.$angular;if(u){"boolean"==typeof u&&(u={}),s._setColumnsMediaVisibility(d);for(var x=0,H=(i=$t(s.thead)).length;x<H;x++){r=d[x];var R=i.eq(x);r.command||!r.field&&!R.attr("data-"+o.ns+"field")||((e=R.data("kendoColumnMenu"))&&e.destroy(),a=!1!==r.sortable&&!1!==u.sortable&&!1!==c.sortable&&g({},c.sortable,{compare:(r.sortable||{}).compare}),n=!(!c.filterable||!1===r.filterable||!1===u.filterable)&&g({pane:s.pane},c.filterable,r.filterable),r.filterable&&r.filterable.dataSource&&(n.forceUnique=!1,n.checkSource=r.filterable.dataSource),n&&(n.format=r.format),l={dataSource:s.dataSource,values:r.values,columns:u.columns,sortable:a,filterable:n,messages:u.messages,owner:s,closeCallback:v,init:_,open:b,stick:C,unstick:w,pane:s.pane,sort:y,filtering:S,filter:m?":not(.k-column-active)":"",hasLockableColumns:qt(d).length>0&&h&&!p,hasStickableColumns:f&&!p,encodeTitles:s.options.encodeTitles,componentType:u.componentType},T&&(l.$angular=T),R.kendoColumnMenu(l))}}},_headerCells:function(){return e(this.thead).find("th").filter((function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")}))},_filterable:function(){var e,t,r,l=this,a=jt(l.columns),n=function(e){l.trigger(B,{field:e.field,container:e.container})},i=function(e){hr(e.closest("table"),!0)},s=function(e){l.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(l._clearEditableState(),l.dataSource.options.endless&&(l.dataSource.options.endless=null,l._endlessPageSize=l.dataSource.options.pageSize,l.dataSource.pageSize(l.dataSource.options.pageSize)))},d=function(e){l.trigger(G,{field:e.field,container:e.container})},c=l.options.filterable;if(c&&typeof c.mode==xe&&-1==c.mode.indexOf("menu")&&(c=!1),c&&!l.options.columnMenu)for(var u=0,p=(t=$t(l.thead)).length;u<p;u++)if(r=t.eq(u),!1!==a[u].filterable&&!a[u].command&&(a[u].field||r.attr("data-"+o.ns+"field"))){(e=r.data("kendoFilterMenu"))&&e.destroy(),(e=r.data("kendoFilterMultiCheck"))&&e.destroy();var h=a[u].filterable,f=g({},c,h,{dataSource:l.dataSource,values:a[u].values,format:a[u].format,closeCallback:i,title:a[u].title||a[u].field,init:n,open:d,pane:l.pane,change:s});h&&h.messages&&(f.messages=g(!0,{},c.messages,h.messages)),h&&h.dataSource&&(f.forceUnique=!1,f.checkSource=h.dataSource),h&&h.multi?r.kendoFilterMultiCheck(f):r.kendoFilterMenu(f)}},_filterRow:function(){var t=this;if(t._hasFilterRow()){var r,l=t.options.$angular,n=jt(t.columns),i=t.options.filterable,s=t.thead.find(".k-filter-row"),d=function(e){t.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize,t.dataSource.pageSize(t.dataSource.options.pageSize)))};this._updateHeader(this.dataSource.group().length);for(var c=0;c<n.length;c++){var u,p=n[c],h=t.options.filterable.operators,f=!1,m=e("<th/>"),k=p.field;if(p.hidden&&m.hide(),s.append(m),k&&!1!==p.filterable){var _=p.filterable&&p.filterable.cell||{};(u=t.options.dataSource)instanceof a&&(u=t.options.dataSource.options);var b=g(!0,{},i.messages);if(p.filterable&&g(!0,b,p.filterable.messages),!1===_.enabled){m.html("&nbsp;");continue}_.dataSource&&(u=_.dataSource,f=!0),p.filterable&&p.filterable.operators&&(h=p.filterable.operators),r={column:p,dataSource:t.dataSource,suggestDataSource:u,customDataSource:f,field:k,messages:b,values:p.values,template:_.template,delay:_.delay,inputWidth:_.inputWidth,suggestionOperator:_.suggestionOperator,minLength:_.minLength,dataTextField:_.dataTextField,operator:_.operator,operators:h,showOperators:_.showOperators,change:d},l&&(r.$angular=l),e("<span/>").attr(o.attr("field"),k).appendTo(m).kendoFilterCell(r)}else m.html("&nbsp;")}}},_sortable:function(){var e,t,r,l=this,a=jt(l.columns),n=l.options.sortable,i=function(e){l.trigger("sort",{sort:e.sort})?e.preventDefault():l._clearEditableState()};if(n){for(var s=$t(l.thead),d=0,c=s.length;d<c;d++)!1!==(e=a[d]).sortable&&!e.command&&e.field&&((t=(r=s.eq(d)).data("kendoColumnSorter"))&&t.destroy(),r.attr("data-"+o.ns+"field",e.field).kendoColumnSorter(g({},n,e.sortable,{dataSource:l.dataSource,aria:!0,filter:":not(.k-column-active)",change:i})));s=null}},_columns:function(t){var r,l,a=this,n=a.table,i=n.find("col"),s=a.element.find("thead tr"),d=a.options.dataSource;if(t=t.length?t:m(n.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),(function(t,r){var l=(t=e(t)).attr(o.attr("sortable")),a=t.attr(o.attr("filterable")),n=t.attr(o.attr("type")),s=t.attr(o.attr("groupable")),d=t.attr(o.attr("field")),c=t.attr(o.attr("title")),u=t.attr(o.attr("menu"));return d||(d=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:d,type:n,title:c,sortable:"false"!==l,filterable:"false"!==a,groupable:"false"!==s,menu:u,template:t.attr(o.attr("template")),width:i.eq(r).css("width")}})),r=!(a.table.find("tbody tr").length>0&&(!d||!d.transport)),a.options.scrollable){var c=t;if(l=qt(t),t=Vt(t),l.length>0&&0===t.length)throw new Error("There should be at least one non locked column");(function(e,t){var r,o,l=0,a=e.find("th:not(.k-group-cell)");for(r=0,o=t.length;r<o;r++)t[r].locked&&(a.eq(r).insertBefore(a.eq(l)),a=e.find("th:not(.k-group-cell)"),l++)})(a.element.find("tr:has(th):first"),c),t=l.concat(t)}s.length&&t.length&&a._updateColumnIDs(t,s.first()),a.columns=nt(t,r),e.grep(jt(a.columns),(function(e){return e.selectable})).length&&(a._selectedIds={},a._checkBoxSelection=!0,a.wrapper.on(we+F,"tbody > tr "+se,C(a._checkboxClick,a)),a.wrapper.on(we+F,"thead > tr "+se,C(a._headerCheckboxClick,a))),a._foreignKeyBindings(a.columns)},_foreignKeyBindings:function(e){for(var t,r=e.length,o=0;o<r;o++)(t=e[o]).dataSource&&this._fetchForeignKeyValues(t)},_fetchForeignKeyValues:function(t){var r=this,o=e.Deferred();r._hasBoundForeignKey=!0,t.dataSource=a.create(t.dataSource),r._foreignKeyPromises||(r._foreignKeyPromises=[]),r._foreignKeyPromises.push(o),t.dataSource.fetch().then((function(){var e=t.dataSource.data();t.values=e.map((function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}})),o.resolve()}))},_updateColumnIDs:function(e,t){if(e.length){for(var r,o=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),l=0;l<e.length;l++)(r=o.eq(l).attr("id"))&&(e[l].headerAttributes=g(e[l].headerAttributes,{id:r}));this._updateColumnIDs(Kt(e),t.next())}},_headerCheckboxClick:function(t){var r=this,o=e(t.target),l=o.prop("checked"),a=o.closest(".k-grid.k-widget").getKendoGrid();r===a&&(l?r.select(a.items()):r.clearSelection())},_checkboxClick:function(t){var r=this,o=e(t.target).closest("tr"),l=!o.hasClass(ne);r===o.closest(".k-grid.k-widget").getKendoGrid()&&(l?r.select(o):r._deselectCheckRows(o))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,r,l){var a,n,i,s=this,d=g({},o.Template,s.options.templateSettings),c=d.paramName,u=t.length,p={storage:{},count:0},h=s._hasDetails(),f=[],m=s._groups(),k=s.options.navigatable,_=o.attr("field"),b="";if(!e){for(e="<tr",r&&f.push("k-alt"),f.push("k-master-row"),f.length&&(e+=' class="'+f.join(" ")+'"'),u&&(e+=" "+o.attr("uid")+'="#='+o.expr("uid",d.paramName)+'#"'),e+=" role='row'>",m>0&&!l&&(e+=Ze(m)),h&&(e+='<td class="k-hierarchy-cell" aria-expanded="false"><a class="k-icon k-i-expand" href="\\#" aria-label="Expand" tabindex="-1"></a></td>'),a=0;a<u;a++)(n=t[a]).template,i=n.field,s._editMode()===ze&&i&&(n.attributes=n.attributes||{},s.virtualScroll&&(n.attributes[_]=i),b=s._dirtyCellTemplate(i,c),n.attributes.class=n.attributes.class||"",n.attributes.class.indexOf(b)<0&&(n.attributes.class+=b)),n.colSpan&&n.colSpan>0&&-1!==((n.attributes||{}).style||"").indexOf("display:none")?n.attributes=Zt(n.attributes):!n.colSpan&&n.hidden&&(n.attributes=Xt(n.attributes)),n.command&&(n.attributes=n.attributes||{},void 0!==n.attributes.class?n.attributes.class+=" k-command-cell":n.attributes.class="k-command-cell"),e+="<td"+et(n.attributes),k&&(e+=" aria-describedby='"+n.headerAttributes.id+"'"),n.colSpan&&(n.colSpan>1&&(e+=" "+o.attr("virtual")),e+=" colSpan='"+n.colSpan+"'"),e+=" role='gridcell'>",e+=s._cellTmpl(n,p),e+="</td>";e+="</tr>"}return e=o.template(e,d),p.count>0?C(e,p.storage):e},_dirtyCellTemplate:function(e,t){return e&&t?"#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+("["===e.charAt(0)?o.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']")+" ? ' k-dirty-cell' : '' #":""},_headerCellText:function(e){var t=g({},o.Template,this.options.templateSettings),r=e.headerTemplate,l=typeof r,a=e.title&&(this.options.encodeTitles?yr(e.title):e.title)||e.field||"";return l===Te?a=o.template(r,t)({}):l===xe&&(a=r),a},_cellTmpl:function(e,t){var r,l,a=this,n=g({},o.Template,a.options.templateSettings),i=e.template,s=n.paramName,d=e.field,c="",u=e.format,p=typeof i,h=e.values;if(e.command){if(_(e.command)){for(r=0,l=e.command.length;r<l;r++)e.command[r].visible?c+=o.format("#= {0}(data)? '{1}':'' #",e.command[r].visible,a._createButton(e.command[r]).replace(Ve,"\\#").replace(/'/gi,"\\'")):c+=a._createButton(e.command[r]).replace(Ve,"\\#");return c}return a._createButton(e.command).replace(Ve,"\\#")}return e.selectable?'<input class="k-checkbox" data-role="checkbox" aria-label="Select row" aria-checked="false" type="checkbox">':(c+=a._dirtyIndicatorTemplate(d,s),p===Te?(t.storage["tmpl"+t.count]=i,c+="#=this.tmpl"+t.count+"("+s+")#",t.count++):p===xe?c+=i:h&&h.length&&f(h[0])&&"value"in h[0]&&d?(c+="#var v ="+o.stringify(tr(h)).replace(Ve,"\\#")+"#",c+="#var f = v[",n.useWithBlock||(c+=s+"."),c+=d+"]#",c+="${f != null ? f : ''}"):(c+=e.encoded?"#:":"#=",u&&(c+='kendo.format("'+u.replace(qe,"\\$1")+'",'),c+=d?(d=o.expr(d,s))+"==null?'':"+d:"''",u&&(c+=")"),c+="#"),c)},_dirtyIndicatorTemplate:function(e,t){return e&&t?"#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+("["===e.charAt(0)?o.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']")+" ? '<span class=\"k-dirty\"></span>' : '' #":""},_virtualCols:function(t){var r,l=this,a=e.map(t,(function(e){return e.hidden?0:parseInt(e.width,10)})),n=l.virtualScrollable?o.scrollLeft(l.content.find(">.k-virtual-scrollable-wrap")):o.scrollLeft(l.content),i=u(l.content),s=zt(t),d=[],c=0,p=0,h=0,f=0,g=0;for(f=0;f<t.length;f++){if(r=f<a.length-1?a[f+1]:0,!(g+a[f]+2*r<n)){c=1+h;break}a[f]&&h++,g+=a[f]}h=0,g=0;for(var m=t.length-1;m>=0;m--){if(!(g+3*a[m]<s-i-n)){p=1+h;for(var k=f;k<=m;k++)t[k].locked||(d.push(t[k]),t[k].colSpan&&delete t[k].colSpan);d[0].colSpan=c,d[d.length-1].colSpan=p;break}a[m]&&h++,g+=a[m]}return d[0].hidden&&d[0].colSpan--,l.virtualCols=d,d},_templates:function(){var t=this,r=t.options,o=t.dataSource,l=o.group(),a=t.footer||t.wrapper.find(".k-grid-footer"),n=o.aggregate(),i=jt(t.columns),s=jt(qt(t.columns)),d=r.scrollable?jt(Vt(t.columns)):i,c=(t.virtualScroll||{}).columns?t._virtualCols(d):d,u=k(mt(s),(function(e,t){return e.groupHeaderColumnTemplate&&0!==t})),p=k(mt(c),(function(e){return e.groupHeaderColumnTemplate}));if(r.scrollable&&s.length){if(r.rowTemplate||r.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(r.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(r.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(r.rowTemplate,c),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,c,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(r.detailTemplate||"")),(t._group&&!y(n)||!y(n)&&!a.length||k(i,(function(e){return e.footerTemplate})).length)&&(t.footerTemplate=t._footerTmpl(i,n,"footerTemplate","k-footer-template")),l&&k(i,(function(e){return e.groupFooterTemplate})).length&&(n=e.map(l,(function(e){return e.aggregates})),t.groupFooterTemplate=t._footerTmpl(c,n,"groupFooterTemplate","k-group-footer",s.length),r.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,n,"groupFooterTemplate","k-group-footer"))),l&&(u.length||p.length)?(n=e.map(l,(function(e){return e.aggregates})),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(mt(c),n,"groupHeaderColumnTemplate","k-grouping-row",s.length,p),r.scrollable&&s.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(mt(s),n,"groupHeaderColumnTemplate","k-grouping-row",0,u))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,r,l,a=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",n={storage:{},count:0},i=e.extend({},o.Template,this.options.templateSettings),s=i.paramName,d="";return"function"==(r=typeof(t=this.options.noRecords.template?this.options.noRecords.template:o.format('<div class="k-grid-norecords-template"{1}>{0}</div>',this.options.messages.noRecords,a)))?(n.storage["tmpl"+n.count]=t,d+="#=this.tmpl"+n.count+"("+s+")#",n.count++):"string"===r&&(d+=t),l=o.template(o.format('<div class="{0}">{1}</div>',de,d),i),n.count>0&&(l=e.proxy(l,n.storage)),l},_footerTmpl:function(e,t,r,l,a){var n,i,s,d,c,u=this,p=g({},o.Template,u.options.templateSettings),h=p.paramName,f="",m={},k=0,_={},b=u._groups(),v=u.dataSource._emptyAggregates(t);for(f+='<tr class="'+l+'">',b>0&&!a&&(f+=Ze(b)),u._hasDetails()&&(f+='<td class="k-hierarchy-cell">&nbsp;</td>'),n=0,i=e.length;n<i;n++)d=typeof(s=(c=e[n])[r]),f+="<td"+et(c.footerAttributes)+">",s?(d!==Te&&(_=v[c.field]?g({},p,{paramName:h+"['"+c.field+"']"}):{},s=o.template(s,_)),m["tmpl"+k]=s,f+="#=this.tmpl"+k+"("+h+")#",k++):f+="&nbsp;",f+="</td>";return f+="</tr>",f=o.template(f,p),k>0?C(f,m):f},_groupHeaderTmpl:function(e,t,r,l,a,n){var i,s,d,c,u,p,h=this,f=g({},o.Template,h.options.templateSettings),m=f.paramName,k="",_={},v=0,w={},y=h.dataSource._emptyAggregates(t),S=n.length?b(n[0],e):-1;if(k+='<tr role="row" class="'+l+'">',a||(k+='# for (var i = 0; i < data.groupCells; i++) { #<td class="k-group-cell">&nbsp;</td># } #'),h._hasDetails()&&(k+='<td class="k-hierarchy-cell">&nbsp;</td>'),!(S<0)){if(S<1&&n.length<=1&&!a)return k+=a?"":vr(e.length),o.template(k,f);for(S<1?(S=a?0:1,k+=a?"":vr(S)):k+=a?function(e){return'<td colspan="'+e+'"><p class="k-reset">&nbsp;</p></td>'}(S):vr(S),i=S,s=e.length;i<s;i++)c=typeof(d=(u=e[i])[r]),u.sticky?((p=u.groupHeaderColumnTemplateClass||"")||(p=u.groupHeaderColumnTemplateClass="group-header-column-template-"+o.guid()),k+="<td class='k-grid-content-sticky "+p+"' style='"+(u.stickyStyle||"")+"'>"):k+="<td>",d?(c!==Te&&(w=y[u.field]?g({},f,{paramName:m+"['"+u.field+"']"}):{},d=o.template(d,w)),_["tmpl"+v]=d,k+="#=this.tmpl"+v+"("+m+")#",v++):k+="&nbsp;",k+="</td>";return k+="</tr>",k=o.template(k,f),v>0?C(k,_):k}k+=a?"":vr(e.length)},_detailTmpl:function(e){var t=this,r="",l=g({},o.Template,t.options.templateSettings),a=l.paramName,n={},i=0,s=t._groups(),d=mt(jt(t.columns)).length,c=typeof e;return r+='<tr class="k-detail-row">',s>0&&(r+=Ze(s)),r+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(d?' colspan="'+d+'"':"")+">",c===Te?(n["tmpl"+i]=e,r+="#=this.tmpl"+i+"("+a+")#",i++):r+=e,r+="</td></tr>",r=o.template(r,l),i>0?C(r,n):r},_hasDetails:function(){return null!==this.options.detailTemplate||(this._events.detailInit||[]).length},_hasFilterRow:function(){var t=this.options.filterable,r=t&&typeof t.mode==xe&&-1!=t.mode.indexOf("row"),o=this.columns,l=e.grep(o,(function(e){return!1===e.filterable}));return o.length&&l.length==o.length&&(r=!1),r},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&qt(t.columns).length)throw new Error("Having both detail template and locked columns is not supported");t.table.on(we+F,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",(function(r){var o=e(this);return t._toggleDetails(o),r.preventDefault(),!1}))},_toggleDetails:function(t,r){var o,l,a,n=this,i=t.closest("td.k-hierarchy-cell"),s=t.hasClass("k-i-expand"),d=t.closest("tr.k-master-row"),c=n.detailTemplate,u=n._hasDetails(),p=s?Me:Pe,h=!!s;t.toggleClass("k-i-expand",!s).toggleClass("k-i-collapse",s).attr(We,p),i.attr("aria-expanded",h),o=d.next(),u&&!o.hasClass("k-detail-row")&&(l=n.dataItem(d),o=e(c(l)).addClass(d.hasClass("k-alt")?"k-alt":"").insertAfter(d),n.angular("compile",(function(){return{elements:o.get(),data:[{dataItem:l}]}})),n.trigger(V,{masterRow:d,detailRow:o,data:l,detailCell:o.find(".k-detail-cell")})),n.trigger(s?Y:X,{masterRow:d,detailRow:o}),r?(a=s,e(o)[0].style.display=a?"":"none"):o.toggle(s)},dataItem:function(t){if(!(t=e(t)[0]))return null;var r,o,l=this.tbody.children(),a=/k-grouping-row|k-detail-row|k-group-footer/,n=t.sectionRowIndex;for(o=n,r=0;r<n;r++)a.test(l[r].className)&&o--;return this._data[o]},expandRow:function(t,r){var o=e(t).find("> td .k-i-expand");o.length&&this._toggleDetails(o,r)},collapseRow:function(t,r){var o=e(t).find("> td .k-i-collapse");o.length&&this._toggleDetails(o,r)},_createHeaderCells:function(e,r){var l,a,n,i,s,d,c,u=this,p="",h=u.options.messages,f=jt(u.columns),g=u.dataSource.group();for(l=0,i=e.length;l<i;l++){a=e[l].column||e[l],n=u._headerCellText(a),d="";var m=b(a,f);a.selectable?(p+="<th scope='col'"+et(a.headerAttributes),r&&!e[l].colSpan&&(p+=" rowspan='"+r+"'"),m>-1&&(p+=o.attr("index")+"='"+m+"'"),p+=">"+(n=a.headerTemplate?n:o.template('<input class="k-checkbox" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox">')({}))+"</th>"):a.command?(p+="<th scope='col'"+et(a.headerAttributes),r&&!e[l].colSpan&&(p+=" rowspan='"+r+"'"),m>-1&&(p+=o.attr("index")+"='"+m+"'"),p+=">"+n+"</th>"):(a.field&&(d=o.attr("field")+"='"+a.field+"' "),p+="<th scope='col' role='columnheader' "+d,p+=" aria-haspopup='true'",r&&!e[l].colSpan&&(p+=" rowspan='"+r+"'"),e[l].colSpan>1?(p+='colspan="'+(e[l].colSpan-Et(a.columns))+'" ',p+=o.attr("colspan")+"='"+e[l].colSpan+"'"):1===e[l].colSpan&&(p+=o.attr("colspan")+"='"+e[l].colSpan+"'"),a.title&&(s=a.title&&(u.options.encodeTitles?yr(a.title,!0):a.title),p+=o.attr("title")+'="'+s+'" '),a.groupable!==t&&(p+=o.attr("groupable")+"='"+a.groupable+"' "),c=a,u.options.groupable&&(c.groupable||c.groupable===t)&&(p+="aria-label='"+(s||a.field)+" ",p+=fr(g,a.field)?h.ungroupHeader:h.groupHeader,p+="' "),a.aggregates&&a.aggregates.length&&(p+=o.attr("aggregates")+"='"+a.aggregates+"'"),m>-1&&(p+=o.attr("index")+"='"+m+"'"),p+=et(a.headerAttributes),p+=">"+n+"</th>")}return p},_appendLockedColumnContent:function(){var t,r,o,l,a,n=this.columns,i=this.table.find("colgroup"),s=i.find("col:not(.k-group-col,.k-hierarchy-col)"),d=e(),c=0,u=0;for(t=0,r=n.length;t<r;t++)if(n[t].locked)if(gt(n[t])){for(l=1,n[t].columns&&(l=jt(n[t].columns).length-Et(n[t].columns)),l=l||1,a=0;a<l;a++)d=d.add(s.eq(t+u+a-c));u+=l-1}else c++;o=e('<div class="k-grid-content-locked"><table><colgroup></colgroup><tbody></tbody></table></div>'),i.detach(),o.find("colgroup").append(d),i.insertBefore(this.table.find("tbody")),this.lockedContent=o.insertBefore(this.content),this.lockedTable=o.children("table")},_appendLockedColumnFooter:function(){var t,r,o=this,l=o.footer,a=l.find(".k-footer-template>td"),n=l.find(".k-grid-footer-wrap>table>colgroup>col"),i=e('<div class="k-grid-footer-locked"><table><colgroup></colgroup><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),s=o._groups(),d=e(),c=e();for(d=d.add(a.filter(".k-group-cell")),t=0,r=jt(qt(o.columns)).length;t<r;t++)d=d.add(a.eq(t+s));for(c=c.add(n.filter(".k-group-col")),t=0,r=mt(jt(Gt(o.columns))).length;t<r;t++)c=c.add(n.eq(t+s));d.appendTo(i.find("tr")),c.appendTo(i.find("colgroup")),o.lockedFooter=i.prependTo(l)},_appendLockedColumnHeader:function(t){var r,o,l,a,n,i,s,d,c,u=this,p=this.columns,h=[],f=0,g=e(),m=u._hasFilterRow(),k=0,_=e(),b=0,v=e();a=u.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),s=u.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),d=u.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");var C=0;for(r=0,l=p.length;r<l;r++){if(p[r].locked){if(c=s.eq(r),b=jt(p[r].columns||[]).length,gt(p[r])){var w=null;p[r].columns&&(w=b-Et(p[r].columns)),w=w||1;for(var y=0;y<w;y++)g=g.add(a.eq(r+C+y-f));C+=w-1}Lt([p[r]],Jt(c),h,0,0),b=b||1;for(var S=0;S<b;S++)_=_.add(d.eq(k+S));k+=b}p[r].columns&&(f+=Et(p[r].columns)),gt(p[r])||f++}if(h.length){for(o='<div class="k-grid-header-locked" style="width:1px"><table><colgroup></colgroup><thead>',o+=new Array(h.length+1).join("<tr></tr>"),(a=(i=e(o+=(m?'<tr class="k-filter-row"></tr>':"")+"</thead></table></div>")).find("colgroup")).append(u.thead.prev().find("col.k-group-col").add(g)),n=i.find("thead tr:not(.k-filter-row)"),r=0,l=h.length;r<l;r++)v=bt(h[r]),n.eq(r).append(u.thead.find("tr:eq("+r+") .k-group-cell").add(v));var T=Dt(this.thead);return h.length<T&&function(e,t){for(var r,o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),l=0;l<o.length;l++)(r=o[l].rowSpan)>1&&(o[l].rowSpan=r-t||1)}(i,T-h.length),i.find(".k-filter-row").append(u.thead.find(".k-filter-row .k-group-cell").add(_)),this.lockedHeader=i.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);o.destroy(e),e.off(F).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,r,l,a=this,n=a.columns,i=a._hasDetails()&&n.length,s=a._hasFilterRow(),d="",c=a.table.find(">thead"),u=a.element.find("thead:first").length>0,p=a.options.messages.expandCollapseColumnHeader;if(c.length||(c=e("<thead/>").insertBefore(a.tbody)),a.lockedHeader&&a.thead?((r=a.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),r=e(),a._removeLockedContainers()):r=u?a.element.find("thead:first tr:has(th):not(.k-filter-row)"):a.element.find("tr:has(th):first"),r.length){for(t=0;t<n.length;t++){var h=b(n[t],jt(n)),f=$t(r.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(h);n[t].hidden&&h>=0&&(f[0].style.display="none")}a._updateHeadersAttr(Kt(n))}else if(!(r=c.children().first()).length){var g=[{rowSpan:1,cells:[],index:0}];for(a._prepareColumns(g,n),t=0;t<g.length;t++)d+="<tr>",i&&(d+='<th class="k-hierarchy-cell" scope="col">'+p+"</th>"),d+=a._createHeaderCells(g[t].cells,g[t].rowSpan),d+="</tr>";r=e(d)}if(s){var k=e("<tr/>");k.addClass("k-filter-row"),(i||r.find(".k-hierarchy-cell").length)&&k.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>');var _=(a.thead||c).find(".k-filter-row");_.length&&(o.destroy(_),_.remove()),c.append(k)}r.children().length?i&&!r.find(".k-hierarchy-cell")[0]&&r.prepend('<th class="k-hierarchy-cell" scope="col">'+(p||"&nbsp;")+"</th>"):(d="",i&&(d+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),d+=a._createHeaderCells(n),r.html(d)),r.attr("role","row").find("th").addClass("k-header"),a.options.scrollable||c.addClass("k-grid-header"),r.find("script").remove().end().prependTo(c),a.thead&&a._destroyColumnAttachments(),this.angular("cleanup",(function(){return{elements:c.find("th"+E).get()}})),this.angular("compile",(function(){return{elements:c.find(L).get(),data:m(n,(function(e){return{column:e}}))}})),a.thead=c.attr("role","rowgroup"),a._sortable(),a._filterable(),a._filterRow(),a._scrollable(),a._columnMenu();var v=this.options.scrollable&&qt(this.columns).length;v&&(l=a._appendLockedColumnHeader(a.thead.closest(".k-grid-header")),a._appendLockedColumnContent(),a.lockedContent.bind("DOMMouseScroll"+F+" mousewheel"+F,C(a._wheelScroll,a)),o.support.touch&&(a._lockedContentUserEvents=new o.UserEvents(a.lockedContent,{move:function(e){a.content.scrollTop(a.content.scrollTop()+-e.y.delta),e.preventDefault()}})),a._updateLockedCols()),a._updateCols(),a._updateColumnCellIndex(),a._updateFirstColumnClass(),a._resizable(),a._draggable(),a._reorderable(),a._updateHeader(a._groups()),a._updateStickyColumns(),v&&(l&&a._syncLockedHeaderHeight(),a._applyLockedContainersWidth()),a.groupable&&a._attachGroupable()},_retrieveFirstColumn:function(t,r){var o=e();if(r.length&&t[0]){for(var l=t[0];l.columns&&l.columns.length;)l=l.columns[0],r=r.filter(":not(:first())");o=o.add(r)}return o},_updateFirstColumnClass:function(){var t=this,r=t.columns||[];if(!(t._hasDetails()&&r.length||t._groups())){var o=t.thead.find(">tr:not(.k-filter-row):not(:first)");r=Vt(r);var l=t._retrieveFirstColumn(r,o);t._isLocked()&&(o=t.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),r=qt(t.columns),l=l.add(t._retrieveFirstColumn(r,o))),l.each((function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))}},_prepareColumns:function(e,t,r,o){for(var l=o||e[e.length-1],a=e[l.index+1],n=0,i=0;i<t.length;i++){var s={column:t[i],colSpan:0};l.cells.push(s),t[i].columns&&t[i].columns.length&&(a||(a={rowSpan:0,cells:[],index:e.length},e.push(a)),s.colSpan=t[i].columns.length,this._prepareColumns(e,t[i].columns,s,a),n+=s.colSpan-1,l.rowSpan=e.length-l.index)}r&&(r.colSpan+=n)},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.content;this.virtualScroll&&this.virtualScroll.rows&&(t=this.virtualScrollable.verticalScrollbar);var r=t.scrollTop(),l=o.wheelDeltaY(e);l&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&l<0||t[0].scrollTop>0&&l>0)&&e.preventDefault(),t.scrollTop(r+-l))}},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?er(e,Nt(Ot(this.columns)),this._hasDetails(),0):er(e,Nt(mt(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e,t,r=this,o=$t(r.thead),l=jt(r.columns);if(r.options.sortable)for(var a=0,n=o.length;a<n;a++)!1!==(e=l[a]).sortable&&!e.command&&e.field&&(t=o.eq(a).data("kendoColumnSorter"))&&t.refresh()},_updateHeadersAttr:function(e){if(e.length){for(var t=0;t<e.length;t++)e[t].headerAttributes&&this.element.find("[id='"+e[t].headerAttributes.id+"']").attr("headers",e[t].headerAttributes.headers);this._updateHeadersAttr(Kt(e))}},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&er(e=e||this.lockedHeader.find("table").add(this.lockedTable),Nt(Gt(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?er(e,Nt(Ot(this.columns)),this._hasDetails(),0):er(e,Nt(mt(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,r,l=this;for(t in e=e.toJSON(),r=!(l.table.find("tbody tr").length>0&&(!l.dataSource||!l.dataSource.transport)),e)l.columns.push({field:t,encoded:r,headerAttributes:{id:o.guid()}});l._thead(),l._templates()}},_rowsHtml:function(e,t){var r,o,l=this,a="",n=t.rowTemplate,i=t.altRowTemplate;for(r=0,o=e.length;r<o;r++)l._skipRerenderItemsCount>0?l._skipRerenderItemsCount--:a+=r%2?i(e[r]):n(e[r]),l._data.push(e[r]);return a},_groupData:function(e,t,r){var o=this._groupAggregatesDefaultObject||{},l=e.items,a=g({},o,e.aggregates),n=g({},{field:e.field,value:e.value,items:l,aggregates:a},e.aggregates[r?r.field:e.field]),i={};if(!t)for(var s in a)i[s]=g({},a[s],{group:{field:e.field,value:e.value,items:l}});return g({},i,n)},_removeGroupIfEmpty:function(e){for(var t,r,o=this.dataSource._group.length,l=0;l<o;l++)t=+(e=e.prev()).attr("data-group-item-count"),r=+e.attr("data-sub-group-count"),1!=t&&1!=r||e.hide()},_groupRowHtml:function(e,t,r,l,a,n,i){var s,d,c,u=this,p="",h=e.field,f=k(jt(u.columns),(function(e){return e.field==h}))[0]||{},m=mt(u.columns)[0],_=m?m.groupHeaderColumnTemplate:null,v=f.groupHeaderTemplate?f.groupHeaderTemplate:_,C=(f.title&&(u.options.encodeTitles?yr(f.title,!0):f.title)||h)+": "+rr(e.value,f.format,f.values,f.encoded),w=e.currentItems||e.items,y=u._groups(),S=a.groupFooterTemplate,T=a.groupHeaderColumnTemplate,x=!u.dataSource._isGroupPaged()||u.dataSource._groupsState[e.uid];if(u.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()&&(x=!0),(a.groupFooterTemplate||a.groupHeaderColumnTemplate||f.groupHeaderTemplate)&&(c=u._groupData(e,!1,!(f.groupHeaderTemplate||!mt(u.columns)[0].groupHeaderColumnTemplate)&&mt(u.columns)[0])),v&&!n&&(C=typeof v===Te?v(c):o.template(v)(c)),u._skipRerenderItemsCount?l(t,r,C,x,e.uid,u.dataSource._isGroupPaged()):T?e.excludeHeader?e.excludeHeader=!1:p+=T(g({},c,{groupCells:r,colspan:y-r,text:C})):e.excludeHeader?e.excludeHeader=!1:p+=l(t,r,C,x,e.uid,u.dataSource._isGroupPaged()),x)if(e.hasSubgroups)for(s=0,d=w.length;s<d;s++)p+=u._groupRowHtml(w[s],n?t:t-1,r+1,l,a,n,i&&s===w.length-1);else p+=u._rowsHtml(w,a);return S&&(i?b(e.value,u._skippedGroups)||u._skippedGroups.push(e.value):(u._skippedGroups.length&&u._skippedGroups[0]===e.value&&u._skippedGroups.shift(),u._skipRerenderItemsCount||(p+=S(c)))),p},collapseGroup:function(t){var r,o,l,a,n,i=this,s=t,d=this.options.groupable.showFooter?0:1,c=e();if(r=(t=e(t)).find(".k-group-cell").length,this.dataSource._isGroupPaged()){var u,p=t.attr("data-group-uid"),h=i.dataSource._getGroupByUid(p),f=i.dataSource._calculateGroupsTotal([h],!0);return i.dataSource._groupsState[p]=!1,u=i.dataSource._calculateGroupsTotal([h],!0),i.dataSource._serverGroupsTotal-=f-u,i._progress(!0),void i.dataSource.range(i.dataSource._currentRangeStart,i.dataSource.take(),(function(){i._progress(!1)}),"collapseGroup")}this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?c=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(c=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),t.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td[aria-expanded='true']:first").attr("aria-expanded",!1).find("a").attr(We,Pe);var g=[];for(l=0,a=(t=t.nextAll("tr")).length;l<a&&(o=(n=t.eq(l)).find(".k-group-cell").length,n.hasClass("k-grouping-row")?d++:n.hasClass("k-group-footer")&&d--,!(o<=r||n.hasClass("k-group-footer")&&d<0));l++)c.length&&g.push(c[l]),g.push(n[0]);e(g).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(i._collapseGroupsTimeOut),i._collapseGroupsTimeOut=setTimeout((function(){i.content.scroll(),i._groupToCollapse=s})))},expandGroup:function(t){t=e(t);var r,o,l,a,n,i=this,s=i.options.groupable.showFooter,d=e(),c=[],u=1;if(r=t.find(".k-group-cell").length,this.dataSource._isGroupPaged()){var p,h=t.attr("data-group-uid"),f=i.dataSource._getGroupByUid(h),g=i.dataSource._calculateGroupsTotal([f],!0);return i.dataSource._groupsState[h]=!0,f.items&&f.items.length&&(p=i.dataSource._calculateGroupsTotal([f],!0),i.dataSource._serverGroupsTotal+=p-g),i._progress(!0),void i.dataSource.range(i.dataSource._currentRangeStart,i.dataSource.take(),(function(){i._progress(!1)}),"expandGroup")}for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?d=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(d=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),t.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td[aria-expanded='false']:first").attr("aria-expanded",!0).find("a").attr(We,Me),a=0,n=(t=t.nextAll("tr")).length;a<n&&!((l=(o=t.eq(a)).find(".k-group-cell").length)<=r);a++)if(l!=r+1||o.hasClass("k-detail-row")||(o.show(),d.eq(a).show(),o.hasClass("k-grouping-row")&&o.find(".k-icon").hasClass("k-i-collapse")&&i.expandGroup(o),o.hasClass("k-master-row")&&o.find(".k-icon").hasClass("k-i-collapse")&&(o.next().show(),d.eq(a+1).show())),o.hasClass("k-grouping-row")&&(s&&c.push(o.is(":visible")),u++),o.hasClass("k-group-footer")){if(s){var m=c.pop();o.toggle(m),d.eq(a).toggle(m)}1==u?(o.show(),d.eq(a).show()):u--}0===r&&i.options.scrollable.endless&&this._isLocked()&&i._syncLockedContentHeight()},_updateHeader:function(t){var r=this,o=r._isLocked()?r.lockedHeader.find("thead"):r.thead,l=o.find("tr.k-filter-row").find("th.k-group-cell").length,a=o.find("tr:first").find("th.k-group-cell").length,n=o.children("tr:not(:first)").filter((function(){return!e(this).children(":visible").length}));t>a?(e(new Array(t-a+1).join('<th class="k-group-cell k-header" scope="col">'+r.options.messages.expandCollapseColumnHeader+"</th>")).prependTo(o.children("tr:not(.k-filter-row)")),r.element.is(":visible")&&n.find("th.k-group-cell").hide()):t<a&&o.find("tr").each((function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()})),t>l&&e(new Array(t-l+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(o.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,r=this;r._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",r.wrapper).add(r.thead.parent()).add(r.table),r._footerWidth=dr(t.eq(0)),t.width(r._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",r.wrapper).add(r.lockedHeader.find(">table")).add(r.lockedTable)).width(dr(t.eq(0))))},hideColumn:function(t){var r,o,l,a,n,i,s,d,c=this,p=0,h=c.footer||c.wrapper.find(".k-grid-footer"),g=c.virtualScroll||{},m=c.columns,_=c.lockedHeader?$t(c.lockedHeader.find(">table>thead")).filter(ft).length:0,v=k(jt(c.columns),(function(e){return e.groupHeaderColumnTemplate}));if((t="number"==typeof t?m[t]:f(t)?k(It(m),(function(e){return e===t}))[0]:k(It(m),(function(e){return e.field===t}))[0])&&gt(t)){var C=c._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(n=xt(t,m),C(t,!1),or(lt(e(">table>thead",c.lockedHeader),c.thead,">tr:eq("+n.row+")>th"),n.cell,!1),o=0;o<t.columns.length;o++)this.hideColumn(t.columns[o]);c.trigger(j,{column:t})}else{d=b(t,mt(jt(m))),C(t,!1),c._setParentsVisibility(t,!1),c._templates(),c._updateCols(),c._updateLockedCols();var w=c.thead;if(i=d,c.lockedHeader&&_>d?w=c.lockedHeader.find(">table>thead"):i-=_,$t(w).filter(ft).eq(i)[0].style.display="none",or(lt(e(">table>thead",c.lockedHeader),c.thead,">tr.k-filter-row>th"),d,!1),h[0]&&(c._updateCols(h.find(">.k-grid-footer-wrap>table")),c._updateLockedCols(h.find(">.k-grid-footer-locked>table")),or(h.find(".k-footer-template>td"),d,!1)),g.columns&&!t.locked)return c._updateContentWidth(),void c.trigger(j,{column:t});if(c.lockedTable&&_>d?lr(c.lockedTable.find(">tbody>tr"),d):lr(c.tbody.children(),d-_),c.lockedTable)c._updateTablesWidth(),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight(),c._syncLockedFooterHeight();else{for(o=0,s=(l=c.thead.prev().find("col")).length;o<s;o+=1)if(a=l[o].style.width,l[o].className.indexOf("k-hierarchy-col")>-1)p+=u(l[o]);else if(l[o].className.indexOf("k-group-col")>-1)p+=u(l[o]);else{if(!a||-1!=a.indexOf("%")){p=0;break}p+=parseInt(a,10)}r=e(">.k-grid-header table:first,>.k-grid-footer table:first",c.wrapper).add(c.table),c._footerWidth=null,p&&(r.each((function(){this.style.width=p+"px"})),c._footerWidth=p,c._setContentWidth())}c._updateFirstColumnClass(),c._updateStickyColumns(),v.length>0&&c._renderGroupRows(),c.trigger(j,{column:t})}}},_setParentsVisibility:function(t,r){var l,a,n,i,s,d=this.columns,c=[],u=this._columnVisibilitySetter(t),p=r?function(e){return mt(e.columns).length&&e.hidden}:function(e){return!mt(e.columns).length&&!e.hidden};if(st(t,d,c)&&c.length)for(l=c.length-1;l>=0;l--)n=St(a=c[l],d),i=lt(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+n.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(n.cell),p(a)&&(u(a,r),i[0].style.display=r?"":"none"),i.filter("["+o.attr("colspan")+"]").length&&(s=parseInt(i.attr(o.attr("colspan")),10),i[0].colSpan=s-Et(a.columns)||1)},_updateContentWidth:function(){var e=this;e.table.add(e.thead.parent()).css({width:zt(Nt(Ot(e.columns)))}),e.refresh()},showColumn:function(t){var r,o,l,a,n,i,s,d,c,p,h,g=this,m=g.columns,_=g.virtualScroll||{},v=g.footer||g.wrapper.find(".k-grid-footer"),C=g.lockedHeader?$t(g.lockedHeader.find(">table>thead")).length:0,w=k(jt(g.columns),(function(e){return e.groupHeaderColumnTemplate}));if("number"==typeof t?(c=t,t=m[t]):f(t)?e.each(It(m),(function(e,r){if(r===t)return t=r,c=e,!1})):e.each(It(m),(function(e,r){if(r.field===t)return t=r,c=e,!1})),t&&!gt(t)){var y=g._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(i=St(t,m),p=It(g.options.columns)[c],y(t,!0),or(lt(e(">table>thead",g.lockedHeader),g.thead,">tr:eq("+i.row+")>th"),i.cell,!0),r=0;r<t.columns.length;r++)p.columns[r].hidden||this.showColumn(t.columns[r]);g.trigger($,{column:t})}else{h=b(t,jt(m)),y(t,!0),g._setParentsVisibility(t,!0),g._templates(),g._updateCols(),g._updateLockedCols();var S=g.thead;if(n=h,g.lockedHeader&&C>h?S=g.lockedHeader.find(">table>thead"):n-=C,$t(S).eq(n)[0].style.display="",or(lt(e(">table>thead",g.lockedHeader),g.thead,">tr.k-filter-row>th"),h,!0),v[0]&&(g._updateCols(v.find(">.k-grid-footer-wrap>table")),g._updateLockedCols(v.find(">.k-grid-footer-locked>table")),or(v.find(".k-footer-template>td"),h,!0)),_.columns&&!t.locked)return g._updateContentWidth(),void g.trigger($,{column:t});if(g.lockedTable&&C>h?ir(g.lockedTable.find(">tbody>tr"),h):ir(g.tbody.children(),h-C),g.lockedTable)g._updateTablesWidth(),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight();else if(l=e(">.k-grid-header table:first,>.k-grid-footer table:first",g.wrapper).add(g.table),t.width){for(a=0,r=0,o=(d=g.thead.prev().find("col")).length;r<o;r+=1)if(s=d[r].style.width,d[r].className.indexOf("k-hierarchy-col")>-1)a+=u(d[r]);else if(d[r].className.indexOf("k-group-col")>-1)a+=u(d[r]);else{if(s.indexOf("%")>-1){a=0;break}a+=parseInt(s,10)}g._footerWidth=null,a&&(l.each((function(){this.style.width=a+"px"})),g._footerWidth=a,g._setContentWidth())}else l.width("");g._updateFirstColumnClass(),g._updateStickyColumns(),w.length>0&&g._renderGroupRows(),g.trigger($,{column:t})}}},_columnVisibilitySetter:function(e){return _t((e||{}).media)?dt:ut},_progress:function(e){var t=this.element,r=this.options.scrollable&&this.options.scrollable.endless;this._editContainer&&"popup"===this._editMode()?t=this._editContainer:this.lockedContent||r?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),r&&e?o.ui.progress(t,e,{height:this.content.height(),top:this.content[0].offsetTop,opacity:!0}):o.ui.progress(t,e)},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&this._syncLockedScroll(),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t),this._anyStickyColumns()&&this._updateStickyColumns(!1)},_isActiveInTable:function(){var t=d();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(t){var r,l,a,n=this,i=n.dataSource.view(),s=n.options.navigatable,d=n.virtualScroll||{},c=e(n.current()),u=!1,p=(n.dataSource.group()||[]).length,h=p+Nt(mt(n.columns)).length;t&&"itemchange"===t.action&&(n.editable||n.options.scrollable.endless)&&("popup"!=this._editMode()||"popup"===this._editMode()&&!n._editableIsClosing)||(d.columns&&n._templates(),t&&"remove"===t.action&&n.editable&&n.editable.options.model&&b(n.editable.options.model,t.items)>-1&&n.editable.options.model.unbind(U,n._modelChangeHandler),t=t||{},n.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(t.action===oe&&n._isVirtualEditable()&&(n._destroyEditable(),n._clearEditableState()),n._angularItems("cleanup"),n._endlessFetchInProgress||(s&&(n._isActiveInTable()||n._editContainer&&n._editContainer.data("kendoWindow"))&&(r=(u=c.is("th"))?c.parent().children(":not(.k-group-cell)").index(c[0]):Math.max(n.cellIndex(c),0)),n._destroyEditable()),n.options.scrollable&&n.options.scrollable.endless?(clearTimeout(n._progressTimeOut),n._progressTimeOut=setTimeout((function(){n._endlessFetchInProgress||n._progress(!1)}),100)):n._progress(!1),n._hideResizeHandle(),n._data=[],n.columns.length||(n._autoColumns(n._firstDataItem(i[0],p)),h=p+n.columns.length),n._group=p>0||n._group,n._group&&(n._templates(),n._updateCols(),n._updateLockedCols(),n._virtualColScroll||n._updateHeader(p),n._group=p>0,n._groupRows=ar(i)),n.content&&(l=o.scrollLeft(n.content)),a=n._skipRerenderItemsCount,n._renderContent(i,h,p),n.options.scrollable&&n.options.scrollable.endless&&this.lockedContent&&(n._skipRerenderItemsCount=a),n._renderLockedContent(i,h,p),n._virtualColScroll||(n._footer(),n._renderNoRecordsContent(),n._togglePagerVisibility(),n._setContentHeight(),n._setContentWidth(n.content&&l)),n.lockedTable&&(d.rows?n.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):n.touchScroller?n.touchScroller.movable.trigger("change"):(n.wrapper.one("scroll",(function(e){e.stopPropagation()})),n.content.trigger("scroll"))),n._endlessFetchInProgress||n._restoreCurrent(r,u),n.touchScroller&&n.touchScroller.contentResized(),n.selectable&&n.selectable.resetTouchEvents(),n._muteAngularRebind((function(){n._angularItems("compile")})),n._checkBoxSelection&&n._toggleHeaderCheckState(!1),n.options.persistSelection&&(n.selectable&&!o.ui.Selectable.parseOptions(n.options.selectable).cell||n._checkBoxSelection)&&(n.items().length||n.dataSource._isGroupPaged())&&n._restoreSelection(),n.trigger(J)))},_restoreCurrent:function(r,o){if(!(r===t||r<0)){if(this._removeCurrent(),o)this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(r));else{var l=0,a=this.virtualScroll||{};this._rowVirtualIndex?l=a.rows?this.virtualScrollable.position(this._rowVirtualIndex):this._rowVirtualIndex:r=0;var n,i=e();this.lockedTable&&(i=this.lockedTable.find(">tbody>tr").eq(l)),i=i.add(this.tbody.children().eq(l)),this._hasVirtualColumns()&&(n=parseInt(i.find("td:first").attr("colspan"),10),r=this._virtualCellIndex-(n>1?n-1:0));var s=i.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(r);if(!s.length||r<0)return;this._hasVirtualColumns()?this._setCurrent(s,!0,!0):this._setCurrent(s)}this._current&&hr(this._current.closest("table")[0],!0)}},_restoreSelection:function(){var e,t=this,r=t.items(),o=w(t.dataSource.options.schema.model)?t.dataSource.options.schema.model.fn.idField:t.dataSource.options.schema.model.id;e=k(r,(function(e){var r=t.dataItem(e)[o];if(t._selectedIds[r])return e})),t.select(e)},_angularItems:function(e){o.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"!==e||this.dataSource&&this.dataSource.options.endless||this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",(function(){return{elements:e.tbody.children(".k-detail-row")}})),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var r=this,o=r.tbody;r.lockedContent&&(o=r.lockedTable.find("tbody")),r._group&&r.angular(t,(function(){return{elements:o.children(".k-grouping-row"),data:e.map(ar(r.dataSource.view()),(function(e){return{dataItem:e}}))}}))},_angularGroupFooterItems:function(t){var r=this,o=r.tbody;r.lockedContent&&(o=r.element),r._group&&r.groupFooterTemplate&&r.angular(t,(function(){return{elements:o.find(".k-group-footer"),data:e.map(nr(r.dataSource.view()),(function(e){return{dataItem:e}}))}}))},_renderContent:function(e,t,r){var o,l,a,n,i,s=this,d="",c=null!=s.lockedContent,u=s.options.scrollable,p={rowTemplate:s.rowTemplate,altRowTemplate:s.altRowTemplate,groupFooterTemplate:s.groupFooterTemplate,groupHeaderColumnTemplate:s.groupHeaderColumnTemplate};if(u&&u.endless&&!s.dataSource.options.endless&&(s._skipRerenderItemsCount=0,s.content&&(s.content[0].scrollTop=0)),i=s._skipRerenderItemsCount>0,t=c?t-Nt(Gt(s.columns)).length:t,r>0)for(t=c?t-r:t,s.detailTemplate&&t++,s.groupFooterTemplate&&(s._groupAggregatesDefaultObject=s.dataSource.aggregates()),s.options.scrollable.endless&&(n=s.dataSource.flatView().length),o=0,l=e.length;o<l;o++)s._skippedGroups||(s._skippedGroups=[]),a=n&&o===e.length-1&&n!==s.dataSource.total(),d+=s._groupRowHtml(e[o],t,0,c?wr:Cr,p,c,a);else d+=s._rowsHtml(e,p);i?(s.tbody.append(d),clearTimeout(s._endlessFetchTimeOut),s._endlessFetchTimeOut=setTimeout((function(){s._groupToCollapse&&(s.collapseGroup(s._groupToCollapse),s._groupToCollapse=null)})),s._endlessFetchInProgress=null):s.tbody=Yt(s.tbody,s.table,d,this.options.$angular)},_renderGroupRows:function(){var t,r,l,a,n,i,s,d,c,u,p,h,f,m,_,b,v,C=this,w=C._groupRows,y=C.wrapper.find(".k-grouping-row"),S=C._groups(),T=null!=C.lockedContent;y.each((function(y,x){m=e(x),u=m.closest("table").parent(),p=u.is(".k-grid-content-locked"),r=Nt(mt(p?qt(C.columns):Vt(C.columns))),_=m.find(".k-group-cell").length,T?(t=p?Cr:wr,l=p?r.length+S-_:r.length):(t=Cr,l=r.length+S-_),a=y>=w.length?w[y-w.length]:w[y],n=a.field,i=k(jt(C.columns),(function(e){return e.field==n}))[0]||{},v=!(i.groupHeaderTemplate||!mt(C.columns)[0].groupHeaderColumnTemplate)&&mt(C.columns)[0],s=i.groupHeaderTemplate?i.groupHeaderTemplate:mt(C.columns)[0].groupHeaderColumnTemplate,d=(i.title&&(C.options.encodeTitles?yr(i.title,!0):i.title)||n)+": "+rr(a.value,i.format,i.values,i.encoded),S=S,c=C._groupData(a,!1,v),b=p?C.lockedGroupHeaderColumnTemplate:C.groupHeaderColumnTemplate,s&&(d=typeof s===Te?s(c):o.template(s)(c)),h=m.prev().length?m.prev():m.parent(),f=e(b?b(g({},c,{groupCells:_,colspan:S-_,text:d})):t(l,_,d)),h.is("tbody")?h.prepend(f):h.after(f),m.remove()}))},_renderLockedContent:function(e,t,r){var o,l,a="",n=null,i={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){var s=this.lockedTable;if(n=this._skipRerenderItemsCount>0,r>0)for(t-=mt(jt(Vt(this.columns))).length,o=0,l=e.length;o<l;o++)a+=this._groupRowHtml(e[o],t,0,Cr,i,!1,this.options.scrollable.endless&&o===e.length-1);else a=this._rowsHtml(e,i);n?s.children("tbody").append(a):Yt(s.children("tbody"),s,a,this.options.$angular),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){!1===this.options.pageable.alwaysVisible&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var r,o=e[0].rows,l=o.length,a=t[0].rows,n=e.add(t),i=n.length,s=[];for(r=0;r<l&&a[r];r++)o[r].style.height&&(o[r].style.height=a[r].style.height="");for(r=0;r<l&&a[r];r++){var d=o[r].offsetHeight,c=a[r].offsetHeight,u=0;d>c?u=d:d<c&&(u=c),s.push(u)}for(r=0;r<i;r++)n[r].style.display="none";for(r=0;r<l;r++)s[r]&&(o[r].style.height=a[r].style.height=s[r]+1+"px");for(r=0;r<i;r++)n[r].style.display=""}});function ur(e,t){var r,o=e.offsetHeight,l=t.offsetHeight;o>l?r=o+"px":o<l&&(r=l+"px"),r&&(e.style.height=t.style.height=r)}function pr(e,t){var r,o,l;if(typeof e===xe&&e===t)return e;if(f(e)&&e.name===t)return e;if(_(e))for(r=0,o=e.length;r<o;r++)if(typeof(l=e[r])===xe&&l===t||l.name===t)return l;return null}function hr(t,r){if(!0===r){t=e(t);var l=o.scrollLeft(t.parent());o.focusElement(t),o.scrollLeft(t.parent(),l)}else e(t).one("focusin",(function(e){e.preventDefault()})).focus()}function fr(t,r){return!!e.grep(t,(function(e){return e.field===r})).length}function gr(e,t){return!(!e.field||e.selectable||t.editable&&!t.editable(e.field)||e.editable&&!e.editable(t))}function mr(t){return e(t).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown")}function kr(t){var r=e(t.currentTarget),l=r.is("th"),a=this.table.add(this.lockedTable),n=this.thead.parent().add(e(">table",this.lockedHeader)),i=mr(t.target),s=e(t.target).is(".k-checkbox"),d=e(t.target),c=r.closest("table")[0];i&&r.find(o.roleSelector("filtercell")).length?this._setCurrent(r):c!==a[0]&&c!==a[1]&&c!==n[0]&&c!==n[1]||d.is("a.k-i-expand, a.k-i-collapse")||(this.options.navigatable&&this._setCurrent(r,!1,s),!l&&i||setTimeout((function(){e(o._activeElement()).hasClass("k-widget")||!e(o._activeElement()).is(se)&&mr(o._activeElement())&&e.contains(c,o._activeElement())||hr(c,!0)})),l&&!o.support.touch&&t.preventDefault())}function _r(e,t){if(!t)return 0;var r=0;return o.support.browser.webkit&&(r=e.width()),r}function br(t,r){var o,l;return!!t&&!!((r=e(r))[0]&&S(t[0],r[0])&&(o=r.offset().top-t.offset().top,l=r.outerHeight()/2,(o>=0||T.abs(o)<=l)&&T.floor(o+l)<=t.height()))}function vr(e){return'<td colspan="#=data.colspan +'+e+'#"><p class="k-reset"><a class="k-icon k-i-collapse" href="\\#" tabindex="-1" '+'aria-label="'+'Collapse"></a>#=data.text#</p></td>'}function Cr(e,t,r,o,l,a){return'<tr role="row"'+(a?'data-group-uid="'+l+'"':"")+'class="k-grouping-row">'+Ze(t)+'<td colspan="'+e+'" aria-expanded="'+!!o+'"><p class="k-reset"><a class="k-icon '+(o?"k-i-collapse":"k-i-expand")+'" href="#" tabindex="-1" '+'aria-label="'+(o?Me:Pe)+'"></a>'+r+"</p></td></tr>"}function wr(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}function yr(e,t){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,(function(e){return t?"\\"+e:"&quot;"})).replace(/'/g,"&#39;")}o.ExcelMixin&&o.ExcelMixin.extend(cr.prototype),o.PDFMixin&&(o.PDFMixin.extend(cr.prototype),cr.prototype._drawPDF_autoPageBreak=function(r){var l,a=this,n=new e.Deferred,i=a.dataSource,s=a.options.pdf.allPages,d=a.wrapper.find('table[role$="grid"] > tbody').first(),c=e("<div>").css({position:"absolute",left:-1e4,top:-1e4});a.toggleUnexportableColumns(a.columns),(l=a.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(c)).find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"}),l.find('table[role$="grid"], .k-grid-footer table').css({height:"auto",width:"100%",overflow:"visible"}),l.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),l.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0}),this._initPDFProgress(r);var u=l.find('table[role$="grid"] > tbody').first().empty(),p=i.page();function h(){c.appendTo(document.body);var t=e.extend({},a.options.pdf,{_destructive:!0,progress:function(e){r.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});o.drawing.drawDOM(l,t).always((function(){c.remove()})).then((function(e){n.resolve(e),a.toggleUnexportableColumns(a.columns,!0)})).fail((function(e){n.reject(e)}))}function f(){var e=i.page(),r=s?i.totalPages():1;u.append(d.children("tr:not(.k-detail-row)")),e<r?i.page(e+1):(i.unbind("change",f),s&&p!==t?(i.one("change",h),i.page(p)):(a.refresh(),h()))}return s?(i.bind("change",f),i.page(1)):f(),n.promise()},cr.prototype.toggleUnexportableColumns=function(e,t){for(var r,o,l,a,n=e.length,i=0;i<n;i++)o=(r=e[i]).exportable,t?r._toggledDuringExport?(r._toggledDuringExport=!1,r.hidden?this.showColumn(r):this.hideColumn(r)):r.columns&&this.toggleUnexportableColumns(r.columns,t):("object"==typeof r.exportable&&(o=r.exportable.pdf),l=!r.hidden&&!1!==o,a=r.hidden&&!0===o,(o=l||a)||r.hidden?o&&r.hidden?(r._toggledDuringExport=!0,this.showColumn(r)):o&&r.columns&&this.toggleUnexportableColumns(r.columns):(r._toggledDuringExport=!0,this.hideColumn(r)))},cr.prototype._drawPDF=function(r){var l=this;if(l.options.pdf.paperSize&&"auto"!=l.options.pdf.paperSize)return l._drawPDF_autoPageBreak(r);var a=new e.Deferred,n=l.dataSource,i=l.options.pdf.allPages;this._initPDFProgress(r);var s=new o.drawing.Group,d=n.page();function c(){l.toggleUnexportableColumns(l.columns),l._drawPDFShadow({width:l.wrapper.width()},{avoidLinks:l.options.pdf.avoidLinks}).done((function(e){var o=n.page(),u=i?n.totalPages():1,p={page:e,pageNumber:o,progress:o/u,totalPages:u};l.toggleUnexportableColumns(l.columns,!0),r.notify(p),s.append(p.page),o<u?n.page(o+1):i&&d!==t?(n.unbind("change",c),n.one("change",(function(){a.resolve(s)})),n.page(d)):a.resolve(s)})).fail((function(e){a.reject(e)}))}return i?(n.bind("change",c),n.page(1)):c(),a.promise()},cr.prototype._initPDFProgress=function(t){var r=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>");r.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(r);var l=e("<div class='k-loading-pdf-progress'>").appendTo(r).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");t.progress((function(e){l.value(e.progress)})).always((function(){o.destroy(r),r.remove()}))}),l.plugin(cr),l.plugin(Ye)}(window.kendo.jQuery),window.kendo})?o.apply(t,l):o)||(e.exports=a)}).call(t,r(1048))},1274:function(e,t){e.exports=r(3116)},1275:function(e,t){e.exports=r(9606)},1276:function(e,t){e.exports=r(1886)},1277:function(e,t){e.exports=r(6606)},1278:function(e,t){e.exports=r(712)},1279:function(e,t){e.exports=r(8459)},1280:function(e,t){e.exports=r(7045)},1281:function(e,t){e.exports=r(9843)},1282:function(e,t){e.exports=r(4460)},1283:function(e,t){e.exports=r(2971)}})}}]);