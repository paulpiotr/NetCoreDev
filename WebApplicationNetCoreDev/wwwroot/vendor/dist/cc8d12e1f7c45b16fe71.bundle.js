(self.webpackChunk_5_112_1332=self.webpackChunk_5_112_1332||[]).push([[3829],{4302:(e,t,a)=>{e.exports=function(e){var t={};function a(s){if(t[s])return t[s].exports;var r=t[s]={exports:{},id:s,loaded:!1};return e[s].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}return a.m=e,a.c=t,a.p="",a(0)}({0:function(e,t,a){e.exports=a(1381)},3:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1377:function(e,t){e.exports=a(1034)},1381:function(e,t,a){var s,r,i;a(3),r=[a(1377)],void 0===(i="function"==typeof(s=function(){return function(e){var t=window.kendo,a=t.ui,s=".kendoAgendaView",r=t.Class.extend({init:function(e){this._view=e},_getColumns:function(e,t){return e.concat(t)},_getGroupsInDay:function(){return[]},_getSumOfItemsForDate:function(){return 0},_renderTaskGroupsCells:function(e,t,a,s){var r=this._view;0===a&&0===s&&t.length&&r._renderTaskGroupsCells(e,t)},_renderDateCell:function(e,a,s,r,i,n){var o=this._view,l=o._isMobile();e.push(t.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>',s.length,o._dateTemplate({date:r,isMobile:l}),i!=n.length-1||a.length?"":" k-last",a.length?"":" k-first"))},_renderDates:function(){},_getParents:function(e){return e.splice(0)},_getGroupsByDate:function(){},_renderTaskGroups:function(e,t,a){var s=this._view;e.append(s._renderTaskGroups(t,a))}}),i=t.Class.extend({init:function(e){this._view=e},_getColumns:function(e,t){if(this._view._isMobile())return e.concat(t);var a=t.slice(0,1),s=t.slice(1);return a.concat(e).concat(s)},_compareDateGroups:function(e,t,a){return e[a].text==t[a].text&&(0===a||this._compareDateGroups(e,t,a-1))},_getGroupsInDay:function(e,t){for(var a=[],s=null,r=0;r<e.length;r++)for(var i=0;i<e[r].items.length;i++){var n=0;if(0===a.length)for(;n<t[r].length;n++)a.push([1]);else for(;n<t[r].length;n++)if(this._compareDateGroups(t[r],s,n))a[n][a[n].length-1]++;else{for(var o=a[n][a[n].length-1]-1,l=0;l<o;l++)a[n].push(0);a[n].push(1)}s=t[r]}return a},_getSumOfItemsForDate:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a].items.length;return t},_renderTaskGroupsCells:function(e,a,s,r,i,n,o,l){var d=this._view,u=d._isMobile();if(u)0===s&&0===r&&a.length&&d._renderTaskGroupsCells(e,a);else{0===s&&0===r&&e.push(t.format('<td class="k-scheduler-datecolumn k-first" rowspan="{0}">{1}</td>',n,d._dateTemplate({date:o,isMobile:u})));for(var c=0;c<a[s].length;c++)i[c][l]&&e.push(t.format('<td class="k-scheduler-groupcolumn" rowspan="{0}">{1}</td>',i[c][l],d._groupTemplate({value:a[s][c].text,isMobile:u}),a[s][c].className))}},_renderDateCell:function(){},_renderDates:function(e){for(var t=this._view,a=t._groupsByDate.sort((function(e,t){return e.array[0].value.getTime()-t.array[0].value.getTime()})),s=0;s<a.length;s++)e.append(t._renderTaskGroups(a[s].array,a[s].groups))},_getParents:function(e){return e.slice(0)},_getGroupsByDate:function(e,t,a){var s=this._view;if(e[t].items)for(var r=0;r<e[t].items.length;r++){for(var i=e[t].items[r].value,n=!1,o=0;o<s._groupsByDate.length;o++)s._groupsByDate[o].array[0].value.getTime()===i.getTime()&&(n=!0,s._groupsByDate[o].array.push(e[t].items[r]),s._groupsByDate[o].groups.push(a));n||s._groupsByDate.push({array:[e[t].items[r]],groups:[a]})}},_renderTaskGroups:function(){}});function n(e){for(var t=0,a=0,s=e.length;a<s;a++)t+=e[a].items.length;return t}function o(e,a){return e.valuePrimitive&&(a=t.getter(e.dataValueField)(a)),a}function l(e){for(var t=[].concat(e),a=t.shift(),s=[],r=[].push;a;)a.groups?r.apply(t,a.groups):a.items?r.apply(t,a.items):r.call(s,a),a=t.shift();return s}t.ui.scheduler.AgendaGroupedView=r,t.ui.scheduler.AgendaGroupedByDateView=i,a.AgendaView=a.SchedulerView.extend({init:function(r,i){a.SchedulerView.fn.init.call(this,r,i),this._groupedView=this._getGroupedView(),(i=this.options).editable&&(i.editable=e.extend({delete:!0},i.editable,{create:!1,update:!1},{messages:i.messages})),this.title=i.title,this._eventTemplate=this._eventTmpl(i.eventTemplate,'<div class="k-task" title="#:(data.title || "").replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-non-recurrence"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #<span class="k-scheduler-task-text">{0}</span>#if (showDelete) {#<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>#}#</div>'),this._dateTemplate=t.template(i.eventDateTemplate),this._groupTemplate=t.template(i.eventGroupTemplate),this._timeTemplate=t.template(i.eventTimeTemplate),this.element.on("mouseenter"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+s,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-i-close)","_remove"),this._renderLayout(i.date),this.refreshLayout()},name:"agenda",_isVirtualized:function(){return!1},_getGroupedView:function(){return this._isGroupedByDate()?new t.ui.scheduler.AgendaGroupedByDateView(this):new t.ui.scheduler.AgendaGroupedView(this)},_mouseenter:function(t){e(t.currentTarget).addClass("k-state-hover")},_mouseleave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_remove:function(a){a.preventDefault(),this.trigger("remove",{uid:e(a.currentTarget).closest(".k-task").attr(t.attr("uid"))})},nextDate:function(){return t.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return t.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e,this._endDate=t.date.addDays(e,7),this.createLayout(this._layout()),this._footer(),this.table.addClass("k-scheduler-agenda")},_layout:function(){var e=[{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}];this._isMobile()||e.splice(0,0,{text:this.options.messages.date,className:"k-scheduler-datecolumn"});var t=this.groupedResources;if(t.length){for(var a=[],s=0;s<t.length;s++)a.push({text:"",className:"k-scheduler-groupcolumn"});e=this._groupedView._getColumns(a,e)}return{columns:e}},_tasks:function(e){for(var a=[],s=0;s<e.length;s++){var r=e[s],i=r.start,n=r.isAllDay?t.date.getDate(r.end):r.end,o=t.date.getDate(i),l=6e4*(o.getTimezoneOffset()-n.getTimezoneOffset()),d=Math.ceil((n-o+l)/t.date.MS_PER_DAY);r.isAllDay&&(d+=1);var u=r.clone();if(u.startDate=t.date.getDate(i),u.startDate>=this.startDate()&&a.push(u),d>1){u.end=t.date.nextDay(i),u.head=!0;for(var c=1;c<d;c++)i=u.end,(u=r.clone()).start=u.startDate=t.date.getDate(i),u.end=t.date.nextDay(i),c==d-1?(u.end=new Date(u.start.getFullYear(),u.start.getMonth(),u.start.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),u.tail=!0):(u.isAllDay=!0,u.middle=!0),(t.date.getDate(u.end)<=this.endDate()&&u.start>=this.startDate()||t.date.getDate(u.start).getTime()==this.endDate().getTime())&&a.push(u)}}return new t.data.Query(a).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(e,a){for(var s=[],r=this.options.editable,i=r&&!1!==r.destroy&&!this._isMobile(),n=this._isMobile(),o=this._groupedView._getSumOfItemsForDate(e),l=this._groupedView._getGroupsInDay(e,a),d=0,u=0;u<e.length;u++)for(var c=e[u].value,h=e[u].items,p=t.date.isToday(c),f=0;f<h.length;f++){var m=h[f],g=[],v=n?[]:g;this._groupedView._renderTaskGroupsCells(v,a,u,f,l,o,c,d),d++,0===f&&(n?(v.push(t.format('<td class="k-scheduler-datecolumn {1}" colspan="2">{0}</td>',this._dateTemplate({date:c,isMobile:n}),this.groupedResources.length?"":"k-first")),s.push('<tr role="row" aria-selected="false"'+(p?' class="k-today">':">")+v.join("")+"</tr>")):this._groupedView._renderDateCell(g,a,h,c,u,e)),m.head?m.format="{0:t}":m.tail?m.format="{1:t}":m.format="{0:t}-{1:t}",m.resources=this.eventResources(m),g.push(t.format('<td class="k-scheduler-timecolumn {4}"><div>{0}{1}{2}</div></td><td>{3}</td>',m.tail||m.middle?'<span class="k-icon k-i-arrow-60-left"></span>':"",this._timeTemplate(m.clone({start:m._startTime||m.start,end:m.endTime||m.end})),m.head||m.middle?'<span class="k-icon k-i-arrow-60-right"></span>':"",this._eventTemplate(m.clone({showDelete:i,messages:this.options.messages})),!this.groupedResources.length&&n?"k-first":"")),s.push('<tr role="row" aria-selected="false"'+(p?' class="k-today">':">")+g.join("")+"</tr>")}return s.join("")},_renderTaskGroupsCells:function(e,a){for(var s=this._isMobile(),r=0;r<a.length;r++)e.push(t.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',a[r].rowSpan,this._groupTemplate({value:a[r].text,isMobile:s}),a[r].className))},render:function(e){var t=this.content.find("table").empty(),a=[];if(e.length>0){var s=this.groupedResources;s.length?(a=this._createGroupConfiguration(e,s,null),this._groupsByDate=[],this._renderGroups(a,t,[]),this._groupedView._renderDates(t)):(a=this._tasks(e),t.append(this._renderTaskGroups(a,[])))}var r=this._eventsList=function(e){for(var t,a=0,s=e.length,r=[];a<s;a++)(t=e[a]).groups?(t=l(t.groups),r=r.concat(t)):r=r.concat(l(t.items));return r}(a);this._angularItems(t,r),this.refreshLayout(),this.trigger("activate")},_angularItems:function(e,a){this.angular("compile",(function(){var s=[];return{elements:a.map((function(a){return s.push({dataItem:a}),e.find(".k-task["+t.attr("uid")+"="+a.uid+"]")})),data:s}}))},_renderGroups:function(e,t,a){for(var s=0,r=e.length;s<r;s++){var i=this._groupedView._getParents(a);i.push(e[s]),this._groupedView._getGroupsByDate(e,s,i),e[s].groups?this._renderGroups(e[s].groups,t,i):this._groupedView._renderTaskGroups(t,e[s].items,i)}},_createGroupConfiguration:function(e,s,r){for(var i=s[0],l=[],d=i.dataSource.view(),u=this._isMobile(),c=0;c<d.length;c++){var h=o(i,d[c]),p=new t.data.Query(e).filter({field:i.field,operator:a.SchedulerView.groupEqFilter(h)}).toArray();if(p.length){var f=this._tasks(p),m=r?"":" k-first";c===d.length-1&&(!r||r.className.indexOf("k-last")>-1)&&(m+=" k-last");var g={text:t.getter(i.dataTextField)(d[c]),value:h,rowSpan:0,className:m};if(s.length>1)g.groups=this._createGroupConfiguration(p,s.slice(1),g),r&&(r.rowSpan+=g.rowSpan);else{g.items=f;var v=n(g.items);u&&(v+=g.items.length),g.rowSpan=v,r&&(r.rowSpan+=v)}l.push(g)}}return l},selectionByElement:function(t){var a,s;if(!(t=e(t)).hasClass("k-scheduler-datecolumn")&&this._eventsList.length){if(t.is(".k-task")&&(t=t.closest("td")),this._isMobile()){var r=t.parent();a=r.parent().children().filter((function(){return e(this).children(":not(.k-scheduler-datecolumn)").length})).index(r)}else a=t.parent().index();return{index:a,start:(s=this._eventsList[a]).start,end:s.end,isAllDay:s.isAllDay,uid:s.uid}}},select:function(e){this.clearSelection();var t=this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected").attr("aria-selected",!0)[0];this.current(t)},move:function(e,a){var s=!1,r=e.index;if(a==t.keys.UP?(r--,s=!0):a==t.keys.DOWN&&(r++,s=!0),s){var i=this._eventsList[r];i&&(e.start=i.start,e.end=i.end,e.isAllDay=i.isAllDay,e.events=[i.uid],e.index=r)}return s},moveToEvent:function(){return!1},constrainSelection:function(e){var t=this._eventsList[0];t&&(e.start=t.start,e.end=t.end,e.isAllDay=t.isAllDay,e.events=[t.uid],e.index=0)},isInRange:function(){return!0},destroy:function(){this.element&&this.element.off(s),a.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:!0,selectedDateFormat:"{0:D}-{1:D}",selectedShortDateFormat:"{0:d} - {1:d}",selectedMobileDateFormat:"{0: MMM} {0:dd} - {1:dd}",eventTemplate:"#:title#",eventTimeTemplate:"#if(data.isAllDay) {##=this.options.messages.allDay##} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'# if (!isMobile) { #<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span># } else { #<div class="k-scheduler-datecolumn-wrap"><span class="k-mobile-scheduler-agendadate"><span class="k-mobile-scheduler-agendaday">#=kendo.toString(date, "dd")#</span>&nbsp<span class="k-mobile-scheduler-agendamonth">#=kendo.toString(date, "MMMM")#</span></span><span class="k-mobile-scheduler-agendaweekday">#=kendo.toString(date, "dddd")#</span></div># } #',eventGroupTemplate:'# if (!isMobile) { #<strong class="k-scheduler-adgendagroup">#=value#</strong># } else { #<span class="k-scheduler-group-text">#=value#</span># } #',messages:{event:"Event",date:"Date",time:"Time",allDay:"all day"}}})}(window.kendo.jQuery),window.kendo})?s.apply(t,r):s)||(e.exports=i)}})},5134:(e,t,a)=>{e.exports=function(e){var t={};function a(s){if(t[s])return t[s].exports;var r=t[s]={exports:{},id:s,loaded:!1};return e[s].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}return a.m=e,a.c=t,a.p="",a(0)}({0:function(e,t,a){e.exports=a(1382)},3:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1377:function(e,t){e.exports=a(1034)},1382:function(e,t,a){var s,r,i;a(3),r=[a(1377)],void 0===(i="function"==typeof(s=function(){return function(e,t){var a=window.kendo,s=a.ui,r=a.date.setTime,i=s.SchedulerView,n=a._outerWidth,o=a._outerHeight,l=e.extend,d=e.proxy,u=a.date.getDate,c=a.date.MS_PER_MINUTE,h=a.date.MS_PER_DAY,p="k-event-inverse",f=a.date.getMilliseconds,m=".kendoMultiDayView",g=a.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),v=a.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),_=a.template("#var dateString = isMobile ? kendo.toString(date,'ddd')[0] : kendo.toString(date,'ddd M/dd'); #<span class='k-link k-nav-day'>#=dateString#</span>");function k(e){var t=new Date(1980,1,1,0,0,0);return r(t,f(e)),t}function y(e,t,a){return e>=t&&e<=a}function D(e,t,a,s){return s=s?e<=a:e<a,e>t&&s}function T(e,t,s,r){var i=e._continuousEvents,n=i[i.length-1],o=u(t.start.startDate()).getTime();if(r&&n&&u(n.start.startDate()).getTime()==o){for(var l=i.length-1;l>-1&&!(i[l].isAllDay||u(i[l].start.startDate()).getTime()<o);l--);i.splice(l+1,0,{element:s,isAllDay:!0,uid:s.attr(a.attr("uid")),start:t.start,end:t.end})}else i.push({element:s,isAllDay:r,uid:s.attr(a.attr("uid")),start:t.start,end:t.end})}var w=i.extend({init:function(e,t){var a=this;i.fn.init.call(a,e,t),a.title=a.options.title||a.options.name,a._workDays=function(e){if(e.workDays&&e.workDays.length)return e.workDays;var t=[],a=e.workWeekStart%7,s=Math.abs(e.workWeekEnd%7);for(t.push(a);s!=a;)a>6?a-=7:a++,t.push(a);return t}(a.options),a._templates(),a._editable(),a.calculateDateRange(),a._groups(),a._currentTime(!0)},_currentTimeMarkerUpdater:function(){this._updateCurrentTimeMarker(new Date)},_updateCurrentTimeMarker:function(t){var s,r,i,l,d=this.options,u="<div class='k-current-time'></div>";if(!1===d.currentTimeMarker.useLocalTimezone){var c=d.dataSource.options.schema.timezone;if(d.dataSource&&c){var h=a.timezone.offset(t,c);t=a.timezone.convert(t,t.getTimezoneOffset(),h)}}s=this.times.find(".k-current-time"),r=this.content.find(".k-current-time");var p=d.group&&"horizontal"!=d.group.orientation?this.groups.length:1,f=this.times.find("tr:first th:first"),m=this.times.find("tr:first th:last");f.length>0&&m.length>0&&(l=this._isRtl?f.position().left+o(f)-o(m):m.position().left);for(var g=0;g<p;g++){var v=this.groups[g];if(!v)return;var _=a.date.toUtcTime(t),k=v.timeSlotRanges(_,_+1);if(0===k.length)return;if(k[0].collection.slotByStartDate(t)){var y=s[g]?s.eq(g):e(u).prependTo(this.times),D=Math.round(k[0].innerRect(t,new Date(t.getTime()+1),!1).top),T={};this._isRtl?(T.right=l,y.addClass("k-current-time-arrow-left")):(T.left=l,y.addClass("k-current-time-arrow-right")),i||(i=.8666*n(y)/2),T.top=D-i,y.css(T),(r[g]?r.eq(g):e(u).prependTo(this.content)).css({top:D,height:"1px",right:0,left:0})}}},_currentTime:function(e){var a=this,s=a.options.currentTimeMarker;!1!==s&&s.updateInterval!==t&&(a._currentTimeMarkerUpdater(),e&&(a._currentTimeUpdateTimer=setInterval(d(this._currentTimeMarkerUpdater,a),s.updateInterval)))},_updateResizeHint:function(e,t,s,r){var n,o,l,d,u=e.isMultiDay(),c=this.groups[t].ranges(s,r,u,e.isAllDay);this._removeResizeHint();for(var h=0;h<c.length;h++){var p=c[h],f=p.startSlot();if(this._isGroupedByDate()&&u)for(var m=f.index;m<=p.end.index;m++){var g=p.collection._slots[m];n=g.offsetWidth,o=g.clientHeight,l=g.offsetTop,d=i.fn._createResizeHint.call(this,g.offsetLeft,l,n,o),this._resizeHint=this._resizeHint.add(d)}else{if(n=f.offsetWidth,o=f.clientHeight,l=f.offsetTop,u)n=p.innerWidth();else{var v=p.outerRect(s,r,this.options.snap);l=v.top,o=v.bottom-v.top}d=i.fn._createResizeHint.call(this,f.offsetLeft,l,n,o),this._resizeHint=this._resizeHint.add(d)}}var _="t",k=this.content;u&&(_="M/dd",(k=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length||(k=this.content)),this._resizeHint.appendTo(k),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(s),_)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(r),_))},_updateMoveHint:function(t,s,r){var i=t.isMultiDay(),n=this.groups[s],o=a.date.toUtcTime(t.start)+r,l=o+t.duration(),d=n.ranges(o,l,i,t.isAllDay);o=a.timezone.toLocalDate(o),l=a.timezone.toLocalDate(l),this._removeMoveHint(t.uid),!i&&(0===f(l)||f(l)<f(this.startTime()))&&d.length>1&&d.pop();for(var u=e(),c=0;c<d.length;c++){var h,m=d[c],g=m.start,v={left:g.offsetLeft+2,top:g.offsetTop};if(this._isGroupedByDate()&&i)for(var _=g.index;_<=m.end.index;_++){var k=m.collection._slots[_];v.left=this._isRtl?.1*k.clientWidth+k.offsetLeft+2:k.offsetLeft+2,v.height=k.offsetHeight,v.width=.9*k.clientWidth-2,h=this._createEventElement(t.clone({start:o,end:l}),!i),t.inverseColor&&h.addClass(p),this._appendMoveHint(h,v),u=u.add(h)}else{if(this._isRtl&&(v.left=.1*g.clientWidth+g.offsetLeft+2),i)v.width=m.innerWidth()-2;else{var y=m.outerRect(o,l,this.options.snap);v.top=y.top,v.height=y.bottom-y.top,v.width=.9*g.clientWidth-2}h=this._createEventElement(t.clone({start:o,end:l}),!i),t.inverseColor&&h.addClass(p),this._appendMoveHint(h,v),u=u.add(h)}}var D=this.content;i&&((D=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length||(D=this.content)),u.appendTo(D)},_appendMoveHint:function(e,t){e.addClass("k-event-drag-hint"),e.css(t),this._moveHint=this._moveHint.add(e)},_slotByPosition:function(e,t){var a,s,r;for(this._isVerticallyGrouped()?(s=this.content.offset(),t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft):s=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),s&&(e-=s.left,t-=s.top),e=Math.ceil(e),t=Math.ceil(t),r=0;r<this.groups.length;r++)if(a=this.groups[r].daySlotByPosition(e,t,this._isGroupedByDate()))return a;for(s&&(e+=s.left,t+=s.top),e-=(s=this.content.offset()).left,t-=s.top,this._isVerticallyGrouped()||(t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft),e=Math.ceil(e),t=Math.ceil(t),r=0;r<this.groups.length;r++)if(a=this.groups[r].timeSlotByPosition(e,t))return a;return null},_groupCount:function(){var e=this.groupedResources,t=this._isGroupedByDate();return e.length?"vertical"===this._groupOrientation()?t?this._columnCountForLevel(e.length-1):this._rowCountForLevel(e.length-1):t?this._columnCountForLevel(e.length)/this._columnCountForLevel(0):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources,t=this._isGroupedByDate();return!e.length||this._isVerticallyGrouped()?t?this._rowCountForLevel(0):this._columnCountForLevel(0):t?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var a,s,r,i,n=this._timeSlotInterval(),o=e,l=this._isGroupedByDate(),d=this.content.find("tr:not(.k-scheduler-header-all-day)");d.attr("role","row");var u=d.length;this._isVerticallyGrouped()&&(l&&(o=t),u=Math.floor(u/o));for(var c=0;c<o;c++){var h=0,p=0;for(this._isVerticallyGrouped()?h=c:p=c,r=h*u;r<(h+1)*u;){var m=d[r].children;r%u==0&&(s=f(new Date(+this.startTime())));var g=0;if(l)if(this._isVerticallyGrouped())for(i=0;i<e;i++)a=this.groups[i],this._addTimeSlotGroup(a,m,i,s,n,c);else for(a=this.groups[c],i=p;i<e*t;i+=e)this._addTimeSlotGroup(a,m,i,s,n,g),g++;else for(a=this.groups[c],i=p*t;i<(p+1)*t;i++)this._addTimeSlotGroup(a,m,i,s,n,g),g++;s+=n,r++}}},_addTimeSlotGroup:function(e,t,a,s,r,i){var n=t[a],o=e.getTimeSlotCollection(i),l=this._dates[i];if(l&&n){var d=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate())+s,u=d+r;n.setAttribute("role","gridcell"),n.setAttribute("aria-selected",!1),o.addTimeSlot(n,d,u)}},_addDaySlotGroup:function(e,t,s,r,i){var n=t[s],o=this._dates[i];if(o){var l=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate());n.setAttribute("role","gridcell"),n.setAttribute("aria-selected",!1),e.addDaySlot(n,l,l+a.date.MS_PER_DAY)}},_daySlotGroups:function(e,t){var a,s,r=e,i=this._isGroupedByDate();this._isVerticallyGrouped()?(i&&(r=t),a=this.element.find(".k-scheduler-header-all-day")):a=this.element.find(".k-scheduler-header-all-day tr"),a.attr("role","row");for(var n=0;n<r;n++){var o,l=0;this._isVerticallyGrouped()&&(l=n);var d=a[l].children,u=0;this._isVerticallyGrouped()||(u=n);var c=0;if(i)if(this._isVerticallyGrouped())for(s=0;s<e;s++)o=this.groups[s].getDaySlotCollection(0),this._addDaySlotGroup(o,d,s,t,n);else for(o=this.groups[n].getDaySlotCollection(0),s=u;s<e*t;s+=e)this._addDaySlotGroup(o,d,s,t,c),c++;else for(o=this.groups[n].getDaySlotCollection(0),s=u*t;s<(u+1)*t;s++)this._addDaySlotGroup(o,d,s,t,c),c++}},_groups:function(){var e=this._groupCount(),t=this._columnCountInResourceView();this.groups=[];for(var s=0;s<e;s++){for(var r=this._addResourceView(s),i=0;i<t;i++)this._dates[i]&&r.addTimeSlotCollection(this._dates[i],a.date.addDays(this._dates[i],1));this.options.allDaySlot&&r.addDaySlotCollection(this._dates[0],a.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(e,t),this.options.allDaySlot&&this._daySlotGroups(e,t)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",selectedMobileDateFormat:"{0:MMM} {0:dd} - {1:dd}",allDaySlot:!0,showWorkHours:!1,title:"",startTime:a.date.today(),endTime:a.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"<span>#=kendo.toString(date, 't')#</span>",minorTimeHeaderTemplate:"&\\#8203;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:g,allDayEventTemplate:v,dateHeaderTemplate:_,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=l({},a.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-non-recurrence"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-60-up"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-60-down"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>'),this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-60-left"></span>#}## if(data.isException()) {#<span class="k-icon k-i-non-recurrence"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-60-right"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>'),this.majorTimeHeaderTemplate=a.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=a.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=a.template(e.dateHeaderTemplate,t),this.slotTemplate=a.template(e.slotTemplate,t),this.allDaySlotTemplate=a.template(e.allDaySlotTemplate,t),this.groupHeaderTemplate=a.template(e.groupHeaderTemplate,t)},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+m,".k-event a:has(.k-i-close)",(function(s){t.trigger("remove",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),s.preventDefault()})),!1!==t.options.editable.create&&t.element.on("dblclick"+m,".k-scheduler-content > table td",(function(a){if(!e(this).parent().hasClass("k-scheduler-header-all-day")){var s=t._slotByPosition(a.pageX,a.pageY);if(s){var r=t._resourceBySlot(s);t.trigger("add",{eventInfo:l({start:s.startDate(),end:s.endDate()},r)})}a.preventDefault()}})).on("dblclick"+m,".k-scheduler-header-all-day td",(function(e){var s=t._slotByPosition(e.pageX,e.pageY);if(s){var r=t._resourceBySlot(s);t.trigger("add",{eventInfo:l({},{isAllDay:!0,start:a.date.getDate(s.startDate()),end:a.date.getDate(s.startDate())},r)})}e.preventDefault()})),!1!==t.options.editable.update&&t.element.on("dblclick"+m,".k-event",(function(s){t.trigger("edit",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),s.preventDefault()}))},_touchEditable:function(){var s=this,r=0;a.support.mobileOS.android&&(r=5),!1!==s.options.editable.create&&(s._addUserEvents=new a.UserEvents(s.element,{threshold:r,filter:".k-scheduler-content td",useClickAsTap:!a.support.browser.edge,tap:function(a){if(!s._scrolling&&!e(a.target).parent().hasClass("k-scheduler-header-all-day")){var r=a.x.location!==t?a.x.location:a.x,i=a.y.location!==t?a.y.location:a.y,n=s._slotByPosition(r,i);if(n){var o=s._resourceBySlot(n);s.trigger("add",{eventInfo:l({start:n.startDate(),end:n.endDate()},o)})}a.preventDefault()}}}),s._allDayUserEvents=new a.UserEvents(s.element,{threshold:r,useClickAsTap:!a.support.browser.edge,filter:".k-scheduler-header-all-day td",tap:function(e){if(!s._scrolling){var r=e.x.location!==t?e.x.location:e.x,i=e.y.location!==t?e.y.location:e.y,n=s._slotByPosition(r,i);if(n){var o=s._resourceBySlot(n);s.trigger("add",{eventInfo:l({},{isAllDay:!0,start:a.date.getDate(n.startDate()),end:a.date.getDate(n.startDate())},o)})}e.preventDefault()}}})),!1!==s.options.editable.update&&(s._editUserEvents=new a.UserEvents(s.element,{threshold:r,useClickAsTap:!a.support.browser.edge,filter:".k-event",tap:function(t){if(!s._scrolling){var r=e(t.target).closest(".k-event");e(t.touch.initialTouch).hasClass("k-i-close")?s.trigger("remove",{uid:r.attr(a.attr("uid"))}):r.hasClass("k-event-active")||s.trigger("edit",{uid:r.attr(a.attr("uid"))}),t.preventDefault()}}}))},_layout:function(e){for(var t=[],s=[],r=this.options,i=this,n=i._isGroupedByDate(),o=0;o<e.length;o++){var l={};l.text=i.dateHeaderTemplate({date:e[o],isMobile:i._isMobile()}),a.date.isToday(e[o])&&(l.className="k-today"),t.push(l)}var d=this.groupedResources;return r.allDaySlot&&s.push({text:r.messages.allDay,allDay:!0,cellContent:function(t){var a=t;return t=d.length&&"vertical"!==i._groupOrientation()?t%e.length:t,i.allDaySlotTemplate({date:e[t],resources:function(){return i._resourceBySlot({groupIndex:a})}})}}),this._forTimeRange(this.startTime(),this.endTime(),(function(e,t,a,r){var n={text:(t?i.majorTimeHeaderTemplate:i.minorTimeHeaderTemplate)({date:e}),className:r?"k-slot-cell":""};s.push(n)})),d.length&&("vertical"===this._groupOrientation()?n?(s=this._createDateLayout(t,s),t=this._createColumnsLayout(d,null,this.groupHeaderTemplate)):s=this._createRowsLayout(d,s,this.groupHeaderTemplate):t=n?this._createColumnsLayout(d,t,this.groupHeaderTemplate,t):this._createColumnsLayout(d,t,this.groupHeaderTemplate)),{columns:t,rows:s}},_footer:function(){var t=this.options;if(!1!==t.footer){var s='<div class="k-scheduler-footer k-toolbar">',r=t.footer.command;this._isMobile()&&(s+='<span class="k-state-default k-scheduler-today"><a href="#" class="k-link">',s+=t.messages.today+"</a></span>"),r&&"workDay"===r&&(this._isMobile()?(s+='<span class="k-state-default k-scheduler-fullday"><a href="#" class="k-link">',s+=(t.showWorkHours?t.messages.showFullDay:t.messages.showWorkDay)+"</a></span>"):(s+='<button type="button" class="k-button k-scheduler-fullday">',s+='<span class="k-icon k-i-clock"></span>',s+='<span class="k-button-text">',s+=t.showWorkHours?t.messages.showFullDay:t.messages.showWorkDay,s+="</span>",s+="</button>")),s+="</div>",this.footer=e(s).appendTo(this.element);var i=this;this.footer.on("click"+m,".k-scheduler-fullday",(function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||t.name,date:t.date,isWorkDay:!t.showWorkHours})})),this.footer.on("click"+m,".k-scheduler-today",(function(e){e.preventDefault();var s,r=i.options.timezone,n=new Date;if(r){var o=a.timezone.offset(n,r);s=a.timezone.convert(n,n.getTimezoneOffset(),o)}else s=n;i.trigger("navigate",{view:i.name||t.name,action:"today",date:s})}))}},_forTimeRange:function(e,t,a,s){e=k(e),t=k(t);var i,n,o=f(e),l=f(t),d=this.options.minorTickCount,u=this.options.majorTick*c,p=u/d||1,m=new Date(+e),g=m.getDate(),v=0,_="";for(n=h/p,o!=l&&(o>l&&(l+=h),n=(l-o)/p),n=Math.round(n);v<n;v++){var y=v%(u/p);_+=a(m,0===y,y<d-1,y===d-1),r(m,p,!1)}return l&&(i=f(m),g<m.getDate()&&(i+=h),i>l&&(m=new Date(+t))),s&&(_+=s(m)),_},_content:function(e){var t=this,a="";a+="<tbody>",a+=t._renderRows(e,t.rowLevels,t.columnLevels),a+="</tbody>",this.content.find("table").append(a)},_virtualContent:function(e,t){var a=this,s="",r=a._dates;s+=a._renderRows(r,e,t),a.content.find("table tbody").append(s)},_renderRows:function(e,t,a){var s=this,r="vertical"===s._groupOrientation(),i=s._isGroupedByDate(),n=0,o=e.length,l=s.options,d=s.startTime(),u=this.endTime(),c=1,h=1,p="";if(this.groupedResources.length){var f=s._recalculateLevels(t,a);h=f.rowCount,c=f.groupsCount}for(var m=function(t,a,l){var d,u,h="",p=0;if(h="<tr"+(l?' class="k-middle-row"':"")+">",i)for(d=0,u=o;d<u;d++){for(p=0;p<c;p++){var f=d;r&&(f=n),h=s._addCellsToContent(h,e,t,f,p,g)}if(r)break}else for(;p<c;p++)for(d=0,u=o;d<u;d++)h=s._addCellsToContent(h,e,t,d,p,g);return h+"</tr>"},g=0;g<h;g++)p+=l.allDaySlot&&r?this._allDayVerticalGroupRow(e,g,c,n):"",p+=this._forTimeRange(d,u,m),r&&n++;return p},_recalculateLevels:function(e,t){var a=this,s=a._isGroupedByDate(),r=1,i=1;return"vertical"===a._groupOrientation()?(i=a._rowCountForLevel(e.length-2,e),s&&(r=a._columnCountForLevel(t.length-1))):r=s?a._columnCountForLevel(t.length-1)/this._columnCountForLevel(0):a._columnCountForLevel(t.length-2),{rowCount:i,groupsCount:r}},_allDayVerticalGroupRow:function(e,t,a,s){var r=this,i='<tr class="k-scheduler-header-all-day">',n=r._isGroupedByDate(),o=n?0:t,l=r.allDaySlotTemplate,d=function(){return r._resourceBySlot({groupIndex:o})};if(n)for(;o<a;o++)i+="<td>"+l({date:e[s],resources:d})+"</td>";else for(var u=0;u<e.length;u++)i+="<td>"+l({date:e[u],resources:d})+"</td>";return i+"</tr>"},_addCellsToContent:function(e,t,s,r,i,n){var o,l,d=this,u="",c=this.slotTemplate,h="vertical"===this._groupOrientation();return a.date.isToday(t[r])&&(u+="k-today"),(a.date.getMilliseconds(s)<a.date.getMilliseconds(this.options.workDayStart)||a.date.getMilliseconds(s)>=a.date.getMilliseconds(this.options.workDayEnd)||!this._isWorkDay(t[r]))&&(u+=" k-nonwork-hour"),e+="<td"+(""!==u?' class="'+u+'"':"")+">",o=a.date.getDate(t[r]),a.date.setTime(o,a.date.getMilliseconds(s)),(e+=c({date:o,resources:(l=h&&!d._isGroupedByDate()?n:i,function(){return d._resourceBySlot({groupIndex:l})})}))+"</td>"},_isWorkDay:function(e){for(var t=e.getDay(),a=this._workDays,s=0;s<a.length;s++)if(a[s]===t)return!0;return!1},_render:function(t){var a=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout(),this._isVirtualized()&&this._tryRenderContent();var s=this.element.find(".k-scheduler-header-all-day td");s.length&&(this._allDayHeaderHeight=s.first()[0].clientHeight),a.element.on("click"+m,".k-nav-day",(function(t){var s=e(t.currentTarget).closest("th"),r=s.offset(),i=0,l=o(s);a._isGroupedByDate()&&(a._isVerticallyGrouped()?(i=n(a.times),l=0):l=o(a.datesHeader));var d=a._slotByPosition(r.left+i,r.top+l);a.trigger("navigate",{view:"day",date:d.startDate()})}))},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=f(this.endTime())||h;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),e.datesHeader&&e.datesHeader.off(m),e.element&&e.element.off(m),e.footer&&e.footer.remove(),i.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(!1!==e.options.editable.create&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),!1!==e.options.editable.update&&e._editUserEvents.destroy())},inRange:function(e){var t=i.fn.inRange.call(this,e);if(e.isAllDay)return t;var s=f(this.startTime()),r=f(this.endTime())||a.date.MS_PER_DAY,n=f(e.start),o=f(e.end)||a.date.MS_PER_DAY;return t&&s<=n&&o<=r},selectionByElement:function(e){var t=e.offset(),a=Math.round(e.innerHeight())-5;return this._slotByPosition(t.left,t.top+a)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*c},_timeSlotIndex:function(e){var t=this.options;return(f(e)-f(this.startTime()))/(t.majorTick/t.minorTickCount*c)},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var s,r,i=this._dates||[];for(s=0,r=i.length;s<r;s++)if(y(e,a.date.getDate(i[s]),new Date(a.date.getDate(i[s]).getTime()+h-(t?0:1))))return 1*s;return-1},_positionAllDayEvent:function(t,a){var s=a.innerWidth(),r=a.start.index,n=a.end.index,o=i.collidingEvents(a.events(),r,n),l=this._headerColumnCount||0,d=r!==n?3:2,u=this._allDayHeaderHeight,c=a.startSlot();t.css({left:c.offsetLeft+2,width:s-d}),a.addEvent({slotIndex:r,start:r,end:n,element:t}),o.push({slotIndex:r,start:r,end:n,element:t});var h=i.createRows(o);h.length&&h.length>l&&(this._headerColumnCount=h.length);for(var p=a.start.offsetTop,f=0,m=h.length;f<m;f++)for(var g=h[f].events,v=0,_=g.length;v<_;v++)e(g[v].element).css({top:p+f*u,height:u-2})},_arrangeColumns:function(e,t,a,s){var r=s.start;e={element:e,slotIndex:r.index,start:t,end:t+a};var n,o,l=r.clientWidth,d=.1*l,u=s.events(),c=i.collidingEvents(u,e.start,e.end);s.addEvent(e),c.push(e);for(var h=(l-d)/(n=i.createColumns(c)).length,p=0,f=n.length;p<f;p++)for(var m=0,g=(o=n[p].events).length;m<g;m++){var v=h-2;o[m].element[0].style.width=(v>0?v:h)+"px",o[m].element[0].style.left=(this._isRtl?d:0)+r.offsetLeft+p*h+2+"px"}},_positionEvent:function(e,t,s){var r=e._startTime||e.start,i=e._endTime||e.end,n=a.getComputedStyles(s.start.element,["border-top-width","border-bottom-width"]),o=s.innerRect(r,i,!1),l=o.bottom-o.top-parseFloat(n["border-top-width"])-parseFloat(n["border-bottom-width"]);l<0&&(l=0),t.css({top:o.top,height:l}),this._arrangeColumns(t,o.top,t[0].clientHeight,s)},_createEventElement:function(t,s,r,i){var n,o=s?this.eventTemplate:this.allDayEventTemplate,d=this.options,c=d.editable,p=this._isMobile(),m=c&&!1!==c.destroy&&!p,g=c&&!1!==c.resize,v=u(this.startDate()),_=u(this.endDate()),k=f(this.startTime()),D=f(this.endTime()),T=t._time("start"),w=t._time("end");k>=D&&(D=f(new Date(this.endTime().getTime()+h-1))),s||t.isAllDay||(_=new Date(_.getTime()+h));var b=t.start,S=t.end;t.isAllDay&&(S=u(t.end)),!y(u(b),v,_)&&!y(S,v,_)||s&&T<k&&w>D?n=!0:u(b)<v||s&&T<k?i=!0:(S>_&&!s||s&&w>D)&&(r=!0);var x=this.eventResources(t);t._startTime&&T!==a.date.getMilliseconds(t.start)&&(b=new Date(T),b=a.timezone.apply(b,"Etc/UTC")),t._endTime&&w!==a.date.getMilliseconds(t.end)&&(S=new Date(w),S=a.timezone.apply(S,"Etc/UTC"));var C=l({},{ns:a.ns,resizable:g,showDelete:m,middle:n,head:r,tail:i,singleDay:1==this._dates.length,resources:x,inverseColor:!1,messages:d.messages},t,{start:b,end:S}),M=e(o(C));return this.angular("compile",(function(){return{elements:M,data:[{dataItem:C}]}})),M},_isInTimeSlot:function(e){var t=this.startTime(),s=this.endTime(),i=e._startTime||e.start,n=e._endTime||e.end;if(f(s)===f(a.date.getDate(s))&&(s=a.date.getDate(s),r(s,h-1)),e._date("end")>e._date("start")&&(n=+e._date("end")+(h-1)),n=e._endTime?n-e._date("end"):f(new Date(n)),i=e._startTime?i-e._date("start"):f(new Date(i)),s=f(s),(t=f(t))===i&&i===n)return!0;var o=i!==s;return D(i,t,s,o)||D(n,t,s,o)||D(t,i,n)||D(s,i,n)},_isInDateSlot:function(e){var t=this.groups[0],s=t.firstSlot().start,r=t.lastSlot().end-1,i=a.date.toUtcTime(e.start),n=a.date.toUtcTime(e.end);return(y(i,s,r)||y(n,s,r)||y(s,i,n)||y(r,i,n))&&(!y(n,s,s)||y(n,i,i)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){if(this._height!==e){this._height=e;var t=this.element.find(".k-scheduler-header-all-day td");if(t.length){t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e);for(var a=0;a<this.groups.length;a++)this.groups[a].refresh()}}},_renderEvents:function(e,t){var s,r,i,n=this.datesHeader.find(".k-scheduler-header-wrap > div"),o=this._isGroupedByDate();for(r=0,i=e.length;r<i;r++)if(s=e[r],this._isInDateSlot(s)){var l,d,u,c,p,f,m=s.isAllDay||s.duration()>=h,g=m&&!this._isVerticallyGrouped()?n:this.content;if(m){if(this.options.allDaySlot){if(!(f=this.groups[t]))continue;if(f._continuousEvents||(f._continuousEvents=[]),(d=f.slotRanges(s)).length){var v=(u=d[0]).start.index,_=u.end.index;if(o&&v!==_){c=u.start.start,p=u.end.end;for(var k=c,y=c,D=u.start.index;D<=u.end.index;D++){l=this._createEventElement(s,!m,D!==_,D!==v);var w=f.daySlotRanges(k,y,!0)[0];k=y+=a.date.MS_PER_DAY,this._positionAllDayEvent(l,w),T(f,w,l,!0),l.appendTo(g),this._inverseEventColor(l)}}else l=this._createEventElement(s,!m),this._positionAllDayEvent(l,d[0]),T(f,d[0],l,!0),l.appendTo(g),this._inverseEventColor(l)}}}else if(this._isInTimeSlot(s)){if(!(f=this.groups[t]))continue;f._continuousEvents||(f._continuousEvents=[]);for(var b=(d=f.slotRanges(s)).length,S=0;S<b;S++){u=d[S],c=s.start,p=s.end,b>1&&(0===S?p=u.end.endDate():S==b-1?c=u.start.startDate():(c=u.start.startDate(),p=u.end.endDate()));var x=s.clone({start:c,end:p,_startTime:s._startTime,_endTime:s.endTime});if(this._isInTimeSlot(x)){var C=u.head;(l=this._createEventElement(s,!m,C,u.tail)).appendTo(g),this._inverseEventColor(l),this._positionEvent(x,l,u),T(f,u,l,!1)}}}}},render:function(t){this._headerColumnCount=0,this._cachedEvents=t,this._groups(),this.element.find(".k-event").remove(),t=new a.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var s=[];this._eventsByResource(t,this.groupedResources,s);var r=e.map(this._dates,(function(t){return Math.max.apply(null,e.map(s,(function(a){return e.grep(a,(function(e){return e.isMultiDay()&&y(t,u(e.start),u(e.end))})).length})))})),i=Math.max.apply(null,r);this._updateAllDayHeaderHeight((i+1)*this._allDayHeaderHeight);for(var n=0;n<s.length;n++)this._renderEvents(s[n],n);this.refreshLayout(),this._currentTime(!1),this.trigger("activate")},_eventsByResource:function(e,t,s){var r=t[0];if(r)for(var n=r.dataSource.view(),o=0;o<n.length;o++){var l=this._resourceValue(r,n[o]),d=new a.data.Query(e).filter({field:r.field,operator:i.groupEqFilter(l)}).toArray();t.length>1?this._eventsByResource(d,t.slice(1),s):s.push(d)}else s.push(e)},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e,t){var a=(t=t||this.rowLevels)[e];return a?a.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(e,t,a,s,r){var i=e.isAllDay,n=t[0].start,o=t[t.length-1].end;a&&(r?i||n.index!==o.index||n.collectionIndex!==o.collectionIndex||(e.backward=s):(i&&n.index===o.index||!i&&n.collectionIndex===o.collectionIndex)&&(e.backward=s))},_changeViewPeriod:function(e,t,a){if(!a){var s,i,n,o=t?this.previousDate():this.nextDate(),l=e.start,d=e.end,u=this._isGroupedByDate()&&this._isVerticallyGrouped(),c=this.groups[e.groupIndex],p=t?c._timeSlotCollections:c._getCollections(c.daySlotCollectionCount()),m=p[p.length-1]._slots,g=t||c.daySlotCollectionCount()?m.length-1:0;if(i=new Date(o),n=new Date(o),this._isInRange(i,n))return!1;if(e.start=i,e.end=n,u){var v=new Date(m[g].startDate()),_=new Date(m[g].endDate());s=f(_)?f(_):h,r(e.start,f(v)),r(e.end,s),c.daySlotCollectionCount()&&(e.isAllDay=!e.isAllDay)}else s=e.isAllDay||!f(d)?h:f(d),r(e.start,f(l)),r(e.end,s);return this._isVerticallyGrouped()||(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0}}});l(!0,s,{MultiDayView:w,DayView:w.extend({options:{name:"DayView",title:"Day",selectedMobileDateFormat:"{0:MMM d}"},name:"day"}),WeekView:w.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"week",calculateDateRange:function(){var e,t=this.options.date,s=a.date.dayOfWeek(t,this.calendarInfo().firstDay,-1),r=[];for(e=0,7;e<7;e++)r.push(s),s=a.date.nextDay(s);this._render(r)}}),WorkWeekView:w.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"workWeek",nextDate:function(){var e=a.date.dayOfWeek(a.date.nextDay(this.startDate()),this.calendarInfo().firstDay,1);return a.date.addDays(e,this._workDays[0])},previousDate:function(){var e=a.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1),t=this._workDays;return a.date.addDays(e,t[t.length-1]-7)},calculateDateRange:function(){var e=this.options,t=e.date,s=a.date.dayOfWeek,r=s(t,this.calendarInfo().firstDay,-1),i=s(r,e.workWeekStart,1),n=s(i,e.workWeekEnd,1),o=[],l=e.workDays&&e.workDays.length?e.workDays.map((function(e){return s(r,e,1).getTime()})):null;for(l&&(n=s(i=r,this.calendarInfo().firstDay+6,1));i<=n;)l&&l.indexOf(i.getTime())>-1?o.push(i):l||o.push(i),i=a.date.nextDay(i);this._render(o)}})})}(window.kendo.jQuery),window.kendo})?s.apply(t,r):s)||(e.exports=i)}})}}]);