(self.webpackChunk_5_112_1332=self.webpackChunk_5_112_1332||[]).push([[7674],{1060:(e,t,o)=>{e.exports=function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}return o.m=e,o.c=t,o.p="",o(0)}({0:function(e,t,o){o(1034),e.exports=o(1034)},3:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1034:function(e,t,o){var i,n,a;o(3),n=[o(1035),o(1036)],void 0===(a="function"==typeof(i=function(){return e=window.kendo.jQuery,t=window.kendo,o=t.ui.imageeditor,i=e.extend,n=e.proxy,r=(a=t.Class.extend({init:function(e){this.options=i({},e,this.options),this.imageeditor=e.imageeditor}})).extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this.imageeditor;new o.panes[this.options.value](e).open()}}),d=a.extend({options:{zoomStep:.05,spacing:20},init:function(e){a.fn.init.call(this,e)},exec:function(){var t,o=this,i=o.options.value,n=o.imageeditor,a=n._image.height,r=n.getZoomLevel();isNaN(i)?"string"==typeof i&&(i=o._processStringValue(i,r)):i=parseFloat(i),(t=Math.round(a*i))>0&&(e(n._canvas).css("height",t),n._zoomLevel=i),n.currentPaneTool&&n.currentPaneTool.refresh()},_processStringValue:function(e,t){var o=this.options,i=this.imageeditor,n=i._image.height,a=i.canvasWrapper.height()-o.spacing,r=o.zoomStep;switch(e){case"zoomIn":return t+r;case"zoomOut":return t-r;case"fitToScreen":return Math.round(a/n*100)/100;default:return 1}}}),s=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this.options,t=this.imageeditor,o=t.getCanvasElement(),i=t.getCurrent2dContext(),n=i.getImageData(e.left,e.top,e.width,e.height);i.clearRect(0,0,o.width,o.height),o.width=e.width,o.height=e.height,i.putImageData(n,0,0),t.drawImage(o.toDataURL()).done((function(e){t.drawCanvas(e)})).fail((function(e){t.trigger("error",e)}))}}),l=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this.options,t=this.imageeditor,o=t.getCanvasElement(),i=t.getCurrent2dContext(),n=t.getCurrentImage();i.clearRect(0,0,o.width,o.height),o.width=e.width,o.height=e.height,i.drawImage(n,0,0,e.width,e.height),t.drawImage(o.toDataURL()).done((function(e){t.drawCanvas(e)})).fail((function(e){t.trigger("error",e)}))}}),m=a.extend({exec:function(){var e=this.imageeditor,t=e.getCanvasElement(),o=e.getCurrent2dContext(),i=e.undoStack.pop();i&&(e.redoStack.push(e.getCurrentImage()),delete e._image,o.clearRect(0,0,t.width,t.height),t.width=i.width,t.height=i.height,o.drawImage(i,0,0,i.width,i.height),e.drawImage(t.toDataURL()).done((function(t){e.drawCanvas(t)})).fail((function(t){e.trigger("error",t)})))}}),c=a.extend({exec:function(){var e=this.imageeditor,t=e.getCanvasElement(),o=e.getCurrent2dContext(),i=e.redoStack.pop();i&&(e.undoStack.push(e.getCurrentImage()),delete e._image,o.clearRect(0,0,t.width,t.height),t.width=i.width,t.height=i.height,o.drawImage(i,0,0,i.width,i.height),e.drawImage(t.toDataURL()).done((function(t){e.drawCanvas(t)})).fail((function(t){e.trigger("error",t)})))}}),h=a.extend({exec:function(){var e=this.imageeditor,o=e.getCanvasElement();t.saveAs(i({},e.options.saveAs,{dataURI:o.toDataURL()}))}}),p=a.extend({exec:function(){var t=this,o=t.imageeditor,i=o._upload;if(!i){var a=e("<input type='file' />");a.kendoUpload({select:n(t.onSelect,t),error:n(t.onError,t),multiple:!1,validation:{allowedExtensions:[".jpg",".jpeg",".gif",".png",".bmp",".tiff",".webp"]}}),o._upload=i=a.getKendoUpload()}i.element.click()},onSelect:function(e){var t=this.imageeditor,o=e.files[0].rawFile,i=new FileReader;i.addEventListener("load",(function(){t.drawImage(i.result).done((function(e){t.trigger("imageLoaded",{image:e})||(t.drawCanvas(e),t._initUndoRedoStack(),t._toggleTools())})).fail((function(e){t.trigger("error",e)}))}),!1),o&&i.readAsDataURL(o)},onError:function(e){this.imageeditor.trigger("error",e)}}),i(t.ui.imageeditor,{ImageEditorCommand:a,commands:{OpenPaneImageEditorCommand:r,ZoomImageEditorCommand:d,CropImageEditorCommand:s,ResizeImageEditorCommand:l,UndoImageEditorCommand:m,RedoImageEditorCommand:c,SaveImageEditorCommand:h,OpenImageEditorCommand:p}}),window.kendo;var e,t,o,i,n,a,r,d,s,l,m,c,h,p})?i.apply(t,n):i)||(e.exports=a)},1035:function(e,t){e.exports=o(4048)},1036:function(e,t){e.exports=o(667)}})},4048:(e,t,o)=>{e.exports=function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}return o.m=e,o.c=t,o.p="",o(0)}({0:function(e,t,o){o(1037),e.exports=o(1037)},3:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},20:function(e,t){e.exports=o(1657)},23:function(e,t){e.exports=o(2565)},1037:function(e,t,o){var i,n,a;o(3),n=[o(20),o(1038),o(1039),o(23)],void 0===(a="function"==typeof(i=function(){return e=window.kendo.jQuery,t=window.kendo,o=e.extend,i=e.proxy,n=t.Class,a=".k-imageeditor-pane","click",r={form:"k-imageeditor-pane-form",button:"k-imageeditor-pane-button",confirmButton:"k-imageeditor-pane-confirm-button",cropOverlay:"k-imageeditor-crop-overlay",crop:"k-imageeditor-crop",resizeHandle:"k-resize-handle",resizeHandlePrefix:"k-resize-"},d=function(e){return Math.round(1e3*e)/1e3},l=(s=n.extend({init:function(t){var o=this;o.imageeditor=t,o.imageeditor.currentPaneTool&&o.imageeditor.currentPaneTool.destroy(),o.element=e("<div></div>").addClass(r.form)},open:function(){var e=this,i=e.imageeditor,n=i.options.messages.common;i.paneWrapper.append(e.element),e.formWidget=new t.ui.Form(e.element,o(e.formSettings(),{buttonsTemplate:t.format("<button class='{0} k-button' data-action='cancel'>{2}</button><button class='{0} {1} k-button k-primary' data-action='confirm'>{3}</button>",r.button,r.confirmButton,n.cancel,n.confirm)})),e.bindButtonEvents(),i.paneWrapper.show(),i.currentPaneTool=e},bindButtonEvents:function(){var e=this,t=e.formWidget.element.find("."+r.button);e._clickHandler=i(e._click,e),t.on("click"+a,e._clickHandler)},_click:function(t){var o=e(t.target).data("action");this[o]&&this[o]()},cancel:function(){this.destroy()},confirm:function(){window.console.error("Pane's confirm method is not implemented!"),this.destroy()},refresh:function(){},destroy:function(){var e=this,t=e.imageeditor;e.formWidget.element.find("."+r.button).off(a),e.formWidget.destroy(),t.paneWrapper.html(""),t.paneWrapper.hide(),delete t.currentPaneTool}})).extend({init:function(e){var t=this;s.fn.init.call(t,e),t.buildCropModel(),t.canvasUI()},confirm:function(){var e=this,t=e.formWidget._model.toJSON();e.destroy(),e.imageeditor.executeCommand({command:"CropImageEditorCommand",options:t})},formSettings:function(){var t=this,o=t.imageeditor.options.messages.panes.crop,n=t.imageeditor.options.messages.common,a=o.aspectRatioItems,r=[];if(a)for(var d in a)r.push({value:d,text:a[d]});else r=[{value:"originalRatio",text:"Original ratio"},{value:"1:1",text:"1:1 (Square)"},{value:"4:5",text:"4:5 (8:10)"},{value:"5:7",text:"5:7"},{value:"2:3",text:"2:3 (4:6)"},{value:"16:9",text:"16:9"}];return{formData:t._model,change:i(t.onChange,t),items:[{type:"group",label:o.title||"Crop Image",layout:"grid",grid:{cols:2,gutter:"0 8px"},items:[{label:o.aspectRatio||"Aspect ratio:",field:"aspectRatio",editor:"DropDownList",editorOptions:{dataValueField:"value",dataTextField:"text",dataSource:r},colSpan:2},{label:o.orientation,field:"orientation",editor:e.proxy(t._orientationEditor,t),colSpan:2},{label:n.width||"Width:",field:"width",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",max:t._model.width,min:0},colSpan:1},{label:n.height||"Height:",field:"height",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",max:t._model.height,min:0},colSpan:1},{label:n.lockAspectRatio||"Lock aspect ratio",field:"lockAspectRatio",colSpan:2}]}]}},_orientationEditor:function(t,o){var i=this.imageeditor.options.messages.panes.crop,n=o.model[o.field];e("<div name='"+o.field+"'></div>").appendTo(t).kendoButtonGroup({items:[{text:i.portrait||"Portrait",attributes:{"data-value":"portrait"},selected:"portrait"===n},{text:i.landscape||"Landscape",attributes:{"data-value":"landscape"},selected:"landscape"===n}],select:function(e){var t=e.sender.wrapper.find(".k-state-active").data("value");o.model.set(o.field,t)}})},buildCropModel:function(){var e=this.imageeditor.getCanvasElement(),t=e.width,o=e.height;this._model={top:0,left:0,aspectRatio:"originalRatio",width:t,height:o,orientation:t-o<0?"portrait":"landscape",lockAspectRatio:!0}},canvasUI:function(){for(var o=this,i=o.imageeditor,n=o.imageeditor.canvasContainer,a=e("<div></div>").addClass(r.cropOverlay),d=e("<div></div>").addClass(r.crop),s="<span class='"+r.resizeHandle+"'></span>",l=["nw","n","ne","w","e","sw","s","se"],m=i.getZoomLevel(),c=0;c<l.length;c++){var h=e(s).addClass(r.resizeHandlePrefix+l[c]).attr("data-orientation",l[c]);o._initResizeHandle(h),d.append(h)}o.cropElement=d,o._canvasUI=a.append(d).appendTo(n);var p=Math.round(o._model.width*m),u=Math.round(o._model.height*m),g=parseInt(o.cropElement.css("border-top-width"),10);o.cropElement.css({width:p,height:u,backgroundImage:"url('"+i._image.src+"')",backgroundSize:t.format("{0}px {1}px",p,u),backgroundClip:"content-box",backgroundPosition:t.format("-{0}px -{0}px",g)}),o.cropElement.kendoDraggable({ignore:"."+r.resizeHandle,drag:function(e){o._adjustTopLeft(e.target.offsetTop+e.y.delta,e.target.offsetLeft+e.x.delta)}})},refresh:function(){var e=this,o=e.formWidget._model,i=e.imageeditor.getZoomLevel(),n=Math.round(o.width*i),a=Math.round(o.height*i),r=Math.round(o.top*i),d=Math.round(o.left*i),s=parseInt(e.cropElement.css("border-top-width"),10);e.cropElement.css({top:r,left:d,width:n,height:a,backgroundSize:t.format("{0}px {1}px",e._model.width*i,e._model.height*i),backgroundPosition:t.format("-{0}px -{1}px",d+s,r+s)})},_initResizeHandle:function(t){var o=this;t.kendoDraggable({drag:function(t){var i=e(t.sender.element),n=o.formWidget._model,a=o._model,r=i.data("orientation"),d={},s=o.imageeditor.getZoomLevel(),l=n.left*s,m=n.top*s;r.indexOf("w")>=0?(d.left=o.cropElement[0].offsetLeft+t.x.delta,d.width=o.cropElement[0].offsetWidth-t.x.delta):r.indexOf("e")>=0&&(d.width=o.cropElement[0].offsetWidth+t.x.delta),r.indexOf("n")>=0?(d.top=o.cropElement[0].offsetTop+t.y.delta,d.height=o.cropElement[0].offsetHeight-t.y.delta):r.indexOf("s")>=0&&(d.height=o.cropElement[0].offsetHeight+t.y.delta),d.width&&(d.left||l)+d.width<=a.width*s&&n.set("width",Math.round(d.width/s)),d.height&&(d.top||m)+d.height<=a.height*s&&n.set("height",Math.round(d.height/s)),(d.top||d.left)&&o._adjustTopLeft(d.top,d.left)}})},_adjustTopLeft:function(e,t,o){var i=this,n=o||i.formWidget._model,a=i.formWidget._model,r=i._model,d=i.imageeditor.getZoomLevel();e>=0&&e/d+n.height<=r.height&&a.set("top",Math.round(e/d)),t>=0&&t/d+n.width<=r.width&&a.set("left",Math.round(t/d))},onChange:function(e){var i=this,n=i.imageeditor.getZoomLevel(),a=e.sender._model,r=i._model,d=r.width,s=r.height,l=(r.width,r.height),m=i._gcd(r.width,r.height);if(l=r.width/m+":"+r.height/m,"aspectRatio"===e.field&&"originalRatio"===e.value)a.set("top",0),a.set("left",0),a.set("width",r.width),a.set("height",r.height),a.set("orientation",r.orientation);else if("orientation"===e.field){var c=o({},a,{width:a.height,height:a.width}),h=i._calcSize(c,l,d,s);a.set("width",h.width),a.set("height",h.height)}else if(a.lockAspectRatio){var p=e.field,u=i._calcSize(a,l,d,s,p);a.set("width",u.width),a.set("height",u.height)}var g=Math.round(a.width*n),f=Math.round(a.height*n),x=Math.round(a.top*n),w=Math.round(a.left*n),v=parseInt(i.cropElement.css("border-top-width"),10);i.cropElement.css({top:x,left:w,width:g,height:f,backgroundPosition:t.format("-{0}px -{1}px",w+v,x+v)})},_calcSize:function(e,t,o,i,n){var a=Math.min(e.width,o),r=Math.min(e.height,i),s="portrait"===e.orientation,l=e.aspectRatio;l.indexOf(":")<0&&(l=t),l=l.split(":").map((function(e){return parseInt(e,10)}));var m=s?Math.min(l[0],l[1]):Math.max(l[0],l[1]),c=s?Math.max(l[0],l[1]):Math.min(l[0],l[1]),h=d(m/c),p=d(a/r),u={width:Math.round(r*h),height:Math.round(a/h)};return"width"===n?{width:a,height:u.height}:"height"===n?{width:u.width,height:r}:(p>h?a=u.width:p<h&&(r=u.height),{width:a,height:r})},_gcd:function(e,t){return 0===t?e:this._gcd(t,e%t)},destroy:function(){t.destroy(this._canvasUI),this._canvasUI.remove(),s.fn.destroy.call(this)}}),m=s.extend({init:function(e){s.fn.init.call(this,e),this.buildResizeModel()},confirm:function(){var e=this,t=e._model.width,o=e._model.height,i=e.formWidget._model.toJSON();"percents"===i.measure&&(i.width=t*(i.width/100),i.height=o*(i.height/100)),e.imageeditor.executeCommand({command:"ResizeImageEditorCommand",options:i}),e.destroy()},formSettings:function(){var e=this,t=e.imageeditor.options.messages.panes.resize,o=e.imageeditor.options.messages.common;return{formData:e._model,change:i(e.onChange,e),items:[{type:"group",label:t.title||"Resize image",layout:"grid",grid:{cols:2,gutter:"0 8px"},items:[{label:o.width||"Width:",field:"width",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",min:0},colSpan:1},{field:"measureW",editor:"DropDownList",attributes:{style:"max-width: 100px;"},label:{text:"&nbsp;",encoded:!1},editorOptions:{dataTextField:"text",dataValueField:"value",dataSource:[{text:t.pixels||"Pixels",value:"pixels"},{text:t.percents||"Percents",value:"percents"}]},colSpan:1},{label:o.height||"Height:",field:"height",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",min:0},colSpan:1},{field:"measureH",label:{text:"&nbsp;",encoded:!1},attributes:{style:"max-width: 100px;"},editor:"DropDownList",editorOptions:{dataTextField:"text",dataValueField:"value",dataSource:[{text:t.pixels||"Pixels",value:"pixels"},{text:t.percents||"Percents",value:"percents"}]},colSpan:1},{label:o.lockAspectRatio||"Lock aspect ratio",field:"lockAspectRatio",colSpan:2}]}]}},buildResizeModel:function(){var e=this.imageeditor.getCanvasElement(),t=e.width,o=e.height;this._model={width:t,height:o,measure:"pixels",measureW:"pixels",measureH:"pixels",lockAspectRatio:!0,ratio:d(t/o)}},onChange:function(e){var t=this,o=e.sender._model,i=o.lockAspectRatio;"measureW"===e.field||"measureH"===e.field?(o.set("measureW",e.value),o.set("measureH",e.value),o.set("measure",e.value)):"measure"===e.field?t.resetNumericsTo(e.value):"width"===e.field&&i&&!t._preventChange?o.set("height",o.width/o.ratio):"height"===e.field&&i&&!t._preventChange&&o.set("width",o.height*o.ratio),o.set("ratio",d(o.width/o.height))},resetNumericsTo:function(e){var t=this,o=t._model.width,i=t._model.height,n=t.formWidget,a=n._model,r=n.element.find("[name=width]").data("kendoNumericTextBox"),d=n.element.find("[name=height]").data("kendoNumericTextBox"),s="percents"===e,l={percents:{format:"#\\%"},pixels:{format:"n0"}};r.setOptions(l[e]),d.setOptions(l[e]),t._preventChange=!0,a.set("width",s?o/r.value()*100:o*(r.value()/100)),a.set("height",s?i/d.value()*100:i*(d.value()/100)),t._preventChange=!1}}),o(t.ui.imageeditor,{ImageEditorPane:s,panes:{crop:l,resize:m}}),window.kendo;var e,t,o,i,n,a,r,d,s,l,m})?i.apply(t,n):i)||(e.exports=a)},1038:function(e,t){e.exports=o(7182)},1039:function(e,t){e.exports=o(6743)}})},3050:(e,t,o)=>{e.exports=function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}return o.m=e,o.c=t,o.p="",o(0)}({0:function(e,t,o){o(1040),e.exports=o(1040)},3:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},967:function(e,t){e.exports=o(3696)},1030:function(e,t){e.exports=o(3566)},1040:function(e,t,o){var i,n,a;o(3),n=[o(1030),o(967)],void 0===(a="function"==typeof(i=function(){return e=window.kendo.jQuery,t=window.kendo,o=t.ui,i=e.extend,n=e.proxy,a=t.ui.ToolBar,r=t.toolbar.Item,"click",d="dropDownChange",s="action",l=a.extend({init:function(e,t){var o=this;o._extendOptions(t),a.fn.init.call(o,e,t),o._attachEvents(),o.toggleTools()},events:a.fn.events.concat([d,s]),defaultTools:{open:{type:"button",icon:"upload",name:"open",command:"OpenImageEditorCommand",showText:"overflow"},save:{type:"button",icon:"download",name:"save",command:"SaveImageEditorCommand",showText:"overflow",toggleCondition:"canExport"},separator:{type:"separator"},undo:{type:"button",icon:"undo",name:"undo",command:"UndoImageEditorCommand",showText:"overflow",toggleCondition:"undo"},redo:{type:"button",icon:"redo",name:"redo",command:"RedoImageEditorCommand",showText:"overflow",toggleCondition:"redo"},separator1:{type:"separator"},crop:{type:"button",icon:"crop",name:"crop",command:"OpenPaneImageEditorCommand",options:"crop",showText:"overflow",toggleCondition:"canExport"},resize:{type:"button",icon:"image-resize",name:"resize",command:"OpenPaneImageEditorCommand",options:"resize",showText:"overflow",toggleCondition:"canExport"},zoomIn:{type:"button",icon:"zoom-in",name:"zoomIn",command:"ZoomImageEditorCommand",showText:"overflow",options:"zoomIn",toggleCondition:"enable"},zoomOut:{type:"button",icon:"zoom-out",name:"zoomOut",command:"ZoomImageEditorCommand",showText:"overflow",options:"zoomOut",toggleCondition:"enable"},zoomDropdown:{type:"imageEditorZoomDropDown",name:"zoomDropdown",command:"ZoomImageEditorCommand",text:"Zoom options",toggleCondition:"enable",items:[{name:"zoomActualSize",icon:"zoom-actual-size",text:"Show actual size",options:"actualSize"},{name:"zoomFitToScreen",icon:"zoom-best-fit",text:"Fit to screen",options:"fitToScreen"}]}},_attachEvents:function(){var e=this;e.bind(d,n(e._dropDownChange,e)),e.bind("click",n(e._click,e))},_extendOptions:function(e){var t=this,o=e.items?e.items:Object.keys(t.defaultTools);t.options=e,t.options.items=t._extendToolsOptions(o)},_extendToolsOptions:function(o){var n=this,a=n.options.messages;if(o.length)return o.map((function(o){var r,d;return o=e.isPlainObject(o)&&1===Object.keys(o).length&&o.name?o.name:o,r=e.isPlainObject(o)?o:i({},n.defaultTools[o]),d=a[r.name]||r.text,t.deepExtend(r,{id:r.name+"-"+t.guid(),name:r.name,text:d,attributes:{"aria-label":d,title:d,"data-command":r.command,"data-options":r.options,"data-toggle":r.toggleCondition},overflow:r.overflow}),"imageEditorZoomDropDown"===r.type&&(r.items=n._extendToolsOptions(r.items)),r}),n)},_click:function(t){var o=e(t.target).data("command"),i=e(t.target).data("options");o&&this.action({command:o,options:i})},_dropDownChange:function(e){e.command&&this.action({command:e.command,options:e.options})},action:function(e){this.trigger(s,e)},toggleTools:function(o){var i=this;i.element.find("[data-toggle]").each((function(n,a){var r=e(a),d=null,s=r.data("toggle"),l=o&&o[s];r.is("[data-role]")&&(d=t.widgetInstance(r)),d&&d.enable?d.enable(l||!1):i.enable(r,l)}))},destroy:function(){this.zoomDropdown&&this.zoomDropdown.destroy(),a.fn.destroy.call(this)}}),m=r.extend({init:function(t,i){var a=this,r=e("<div></div>"),d=e("<input />").attr(t.attributes);a.element=r,a.input=d,a.toolbar=i,a.dropDown=new o.DropDownList(a.input,{optionLabel:{text:t.text,icon:""},dataTextField:"text",dataSource:t.items,template:'<span class="k-icon k-i-#:icon#"></span> #:text#',change:n(a._change,a)}),a.element.append(a.dropDown.wrapper),a.dropDown.list.find(".k-list-optionlabel").hide(),a.toolbar.zoomDropdown=a},_change:function(e){this.toolbar.trigger(d,{command:e.sender.element.data("command"),options:e.sender.dataItem().options})},destroy:function(){this.dropDown.destroy()}}),t.toolbar.registerComponent("imageEditorZoomDropDown",m),i(t.ui,{imageeditor:{ToolBar:l,ZoomDropDown:m}}),window.kendo;var e,t,o,i,n,a,r,d,s,l,m})?i.apply(t,n):i)||(e.exports=a)}})}}]);