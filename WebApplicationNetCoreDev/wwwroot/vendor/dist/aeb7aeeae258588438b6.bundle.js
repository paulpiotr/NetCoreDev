(self.webpackChunk_5_112_1332=self.webpackChunk_5_112_1332||[]).push([[5128],{1218:(e,t,s)=>{e.exports=function(e){var t={};function s(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}return s.m=e,s.c=t,s.p="",s(0)}({0:function(e,t,s){e.exports=s(1269)},3:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1265:function(e,t){e.exports=s(8208)},1269:function(e,t,s){var n,a,i;s(3),a=[s(1265),s(1270)],void 0===(i="function"==typeof(n=function(){return e=window.kendo.jQuery,t=e.extend,s=e.map,n=e.proxy,a=e.isFunction,i=kendo.ui,o=i.TreeList,r=kendo._outerHeight,d=kendo._activeElement,l=kendo.keys,h=kendo.support.mobileOS,p=kendo.attr("type"),c=kendo.attr("bind"),u=kendo.attr("format"),f="string",k=".kendoGanttList","dblclick","focusin","focusout","keydown","keyup","mousedown","beforeEdit","edit","save","cancel","render",".",g="{0:"+kendo.getCulture().calendar.patterns.d+"}",m={title:"Title",start:"Start Time",end:"End Time",percentComplete:"% Done",parentId:"Predecessor ID",id:"ID",orderId:"Order ID"},"<table style='visibility: hidden;'><tbody><tr style='height:{0}'><td>&nbsp;</td></tr></tbody></table>",_={gridHeader:"k-grid-header",gridContentWrap:"k-grid-content",editCell:"k-edit-cell",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand"},v=i.GanttList=o.extend({init:function(e,t){0===this.options.columns.length&&this.options.columns.push("title"),o.fn.init.call(this,e,t),this._unbindDataSource(),this._setWidth()},options:{name:"GanttList",autoBind:!1,sortable:!0,selectable:!0,navigatable:!1,editable:{move:!0,mode:"incell"},resizable:!1,renderAllRows:!1},destroy:function(){o.fn.destroy.call(this),kendo.destroy(this.element)},closeCell:function(e){var t,s,n=this,a=(n.editor||{}).element;a&&a[0]&&n._isIncellEditable()&&(s=n.dataItem(a),n._cancelEditor(),a.removeClass(_.editCell),t=a.parent().removeClass(_.editRow),n.lockedContent&&n._relatedRow(t).removeClass(_.editRow),e&&n._render(),n.trigger("itemChange",{item:t,data:s,ns:i}),n.lockedContent&&n._adjustRowHeight(t.css("height","")[0],n._relatedRow(t).css("height","")[0]))},insertAfter:function(e,t){if(e&&t){var s=t.orderId,n={parentId:t.parentId};t.parentId===e.parentId&&t.orderId>e.orderId?n.orderId=s:n.orderId=s+1,this.trigger("reorder",{task:e,updateInfo:n})}},insertBefore:function(e,t){if(e&&t){var s=t.orderId,n={parentId:t.parentId};t.parentId===e.parentId&&t.orderId>e.orderId?n.orderId=s-1:n.orderId=s,this.trigger("reorder",{task:e,updateInfo:n})}},_adjustHeight:function(){var e,t=this.element,s=t.find("."+_.gridContentWrap),n=t.find("."+_.gridHeader),a=kendo.support.scrollbar();this._isHeightSet(t)&&(e=t.height()-r(n),s.height(e),this._hasLockedColumns&&(a=this.table[0].offsetWidth>this.table.parent()[0].clientWidth?a:0,this.lockedContent.height(e-a)))},_adjustRowHeight:function(e,t){var s,n=e.offsetHeight,a=t.offsetHeight;n>a?s=n+"px":n<a&&(s=a+"px"),s&&(e.style.height=t.style.height=s)},_isHeightSet:function(e){var t,s;return!!e[0].style.height||(t=e.height(),e.height("auto"),s=e.height(),e.height(""),t!=s)},_attachCellEditingEventHandlers:function(){var t=this,s=t.options.editable;t._isIncellEditable()&&!1!==s.update&&(t._startEditHandler=function(s){var n=s.currentTarget?e(s.currentTarget):s,a=t._columnFromElement(n);t.editable||a&&a.editable()&&t._editCell(n,a,t._modelFromElement(n))},t.content.on("focusin"+k,n(t._focusInEditableHandler,t)).on("focusout"+k,n(t._focusoutCellHandler,t)).on("keydown"+k,"tr:not(.k-grouping-row) > td",n(t._keydownHandler,t)).on("keyup"+k,"tr:not(.k-grouping-row) > td",n(t._keyupHandler,t)),h?t.touch=t.content.kendoTouch({filter:"td",touchstart:function(e){t._mouseDownHandler(e.touch)},doubletap:function(e){e.event.target.classList.contains("k-icon")||t._openEditorHandler(e.touch)}}).data("kendoTouch"):t.content.on("mousedown"+k,"tr:not(.k-grouping-row) > td",n(t._mouseDownHandler,t)).on("dblclick"+k,"tr:not(.k-grouping-row) > td",n(t._openEditorHandler,t)))},_blurActiveElement:function(){var t=kendo._activeElement();t&&"body"!==t.nodeName.toLowerCase()&&e(t).blur()},_closeCellTimeouted:function(){var t=d(),s=this.editor||{},n=s.element;n&&n[0]&&t&&!e.contains(n[0],t)&&n[0]!==t&&!e(t).closest(".k-animation-container").length&&s.end()&&this.closeCell()},_columns:function(){var e=this,t=this.options.columns;e._hasExpandable=!1,t.forEach((function(t){t.expandable&&(e._hasExpandable=!0)})),e.columns=e.options.columns=s(t,n(e._eachColumn,e)),o.fn._columns.call(e)},_columnEditor:function(t){var s={name:t.field,required:!0};return s[c]="value:"+t.field,s[p]="date",s[u]=kendo._extractFormat(t.format),function(n,i){var o=i.model,r=(o.fields[t.field]||o[t.field]).validation;r&&r.dateCompare&&a(r.dateCompare)&&r.message&&(e("<span "+kendo.attr("for")+'="'+t.field+'" class="k-invalid-msg"/>').hide().appendTo(n),s[kendo.attr("dateCompare-msg")]=r.message),e('<input type="text"/>').attr(s).prependTo(n).kendoDateTimePicker({format:i.format})}},_columnFromElement:function(e){var t=e.closest("td"),s=t.parent().children().index(t);return this.columns[s]},_eachColumn:function(e){var a=this,i=a.options.resourcesField,o=this.options.sortable;return e.columns&&(a.hasNestedColumns=!0,e.columns=s(e.columns,n(this._eachColumn,this))),typeof e===f&&(e={field:e,title:m[e]}),!0===e.editable?e.editable=function(){return!0}:e.editable=function(){return!1},"start"!==e.field&&"end"!==e.field||(e.format=kendo.getCulture().calendar.patterns[e.format]||e.format||g,e.editor||(e.format===g||e.format.toLowerCase().indexOf("h")>-1)&&(e.editor=a._columnEditor(e))),e.field===i&&(e.sortable=!1,e.template=e.template||function(e){for(var t=e.get(i)||[],s=[],n=0;n<t.length;n++)s.push(kendo.format("{0} [{1}]",t[n].get("name"),t[n].get("formatedValue")));return s.join(", ")}),a._hasExpandable||"title"!==e.field||(e.expandable=!0),o&&!e.sortable&&(e.sortable=!1),t(new function(){this.field="",this.title="",this.editable=function(){return!1},this.sortable=!1},e)},_editCell:function(e,t,s){var n,a=this,i=a.options.resourcesField,o=a.dataSource._createNewModel(s.toJSON());t.field!==i?a.trigger("beforeEdit",{model:s,container:e})?a.dataSource._restorePageSizeAfterAddChild():(a.closeCell(),s._edit=!0,a._cancelEditor(),a._render({editedColumn:t,editedColumnIndex:e.index()}),n=a.table.add(a.lockedTable).find("."+_.editCell).first(),a.editor=a._createIncellEditor(n,{columns:[t],model:s,change:function(t){a.trigger("save",{values:t.values,container:e,model:s})&&t.preventDefault()}}),a._current=n,a.trigger("edit",{container:e,model:s})):t.editor(e,o)},_focusInEditableHandler:function(t){var s=t.target;e.contains(s,d())||(clearTimeout(this._closeCellTimeout),this._closeCellTimeout=null)},_focusoutCellHandler:function(e){var t=this;t._closeCellTimeout=setTimeout((function(){t._closeCellTimeouted(e)}),1)},_keydownHandler:function(e){e.keyCode===l.ENTER&&e.preventDefault()},_keyupHandler:function(t){var s,n,a=this;switch(t.keyCode){case l.ENTER:a._blurActiveElement(),a._closeCellTimeouted(t);break;case l.ESC:a.editor&&(s=e(t.target),n=a._modelFromElement(s),a.trigger("cancel",{model:n,cell:s}))}},_modelFromElement:function(e){var t=e.closest("tr");return this.dataSource.getByUid(t.attr(kendo.attr("uid")))},_mouseDownHandler:function(t){e(t.currentTarget).hasClass(_.editCell)||this._blurActiveElement()},_openEditorHandler:function(t){var s=this,n=e(t.currentTarget),a=s.lockedTable&&n.closest("table")[0]===s.lockedTable[0],i=s.selectable&&s.selectable.options.multiple;n.hasClass(_.editCell)||n.has("a.k-grid-delete").length||n.has("button.k-grid-delete").length||n.closest("tbody")[0]!==s.tbody[0]&&!a||e(t.target).is(":input")||e(t.target).hasClass(_.iconExpand)||e(t.target).hasClass(_.iconCollapse)||(s.editor?s.editor.end()&&(i&&e(d()).blur(),s.closeCell(),s.editCell(n)):s.editCell(n))},_renderTree:function(e){o.fn._render.call(this),this.hasNestedColumns&&this.element.addClass("k-gantt-treelist-nested-columns"),e&&e.length&&!e.editedColumn&&(this.options.rowHeight&&this._rowHeight(e),this.trigger("render")),this._adjustHeight()},_rowHeight:function(t){var s,n=this.content,a=this.options,i=typeof a.rowHeight===f?a.rowHeight:a.rowHeight+"px",o=e(kendo.format("<table style='visibility: hidden;'><tbody><tr style='height:{0}'><td>&nbsp;</td></tr></tbody></table>",i));n.append(o),s=r(o.find("tr")),o.remove(),this.element.find('[role="treegrid"]').css("height",t.length*s+"px")},_setData:function(e){this.dataSource.data(e)},_setWidth:function(){this.element.find(".k-grid-header table").css("minWidth",this.options.listWidth),this.content.find("table").css("minWidth",this.options.listWidth)}}),i.plugin(v),window.kendo;var e,t,s,n,a,i,o,r,d,l,h,p,c,u,f,k,g,m,_,v})?n.apply(t,a):n)||(e.exports=i)},1270:function(e,t){e.exports=s(7126)}})},1420:(e,t,s)=>{e.exports=function(e){var t={};function s(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}return s.m=e,s.c=t,s.p="",s(0)}({0:function(e,t,s){e.exports=s(1271)},3:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1046:function(e,t){e.exports=s(1906)},1113:function(e,t){e.exports=s(2565)},1271:function(e,t,s){var n,a,i;s(3),a=[s(1046),s(1272),s(1113)],void 0===(i="function"==typeof(n=function(){return function(e){var t=kendo.ui.Widget,s=kendo.dom.element,n=kendo.dom.text,a=kendo.dom.html,i=e.isPlainObject,o=kendo._outerWidth,r=kendo._outerHeight,d=e.extend,l=e.proxy,h=!1,p=kendo.keys,c=kendo.data.Query,u=".kendoGanttTimeline",f="click",k="mousemove",g="mouseenter",m="mouseleave",_=".",v=kendo.template("#=kendo.toString(start, 't')#"),y=kendo.template("#=kendo.toString(start, 'ddd M/dd')#"),w=kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#"),T=kendo.template("#=kendo.toString(start, 'MMM')#"),b=kendo.template("#=kendo.toString(start, 'yyyy')#"),D=kendo.template('<div class="#=styles.marquee#"><div class="#=styles.marqueeColor#"></div></div>'),H=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper# k-gantt-resize-hint"><div class="#=styles.tooltipContent#"><div>#=messages.start#: #=kendo.toString(start, format)#</div><div>#=messages.end#: #=kendo.toString(end, format)#</div></div></div>'),x=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" ><div class="#=styles.tooltipContent#">#=text#%</div><div class="#=styles.tooltipCallout#" style="left:13px;"></div></div>'),W=kendo.template('<div class="#=kendo.htmlEncode(styles.taskDetails)#"><strong>#=kendo.htmlEncode(task.title)#</strong><div class="#=styles.taskDetailsPercent#">#=kendo.toString(task.percentComplete, "p0")#</div><ul class="#=styles.reset#"><li>#=messages.start#: #=kendo.toString(task.start, "h:mm tt ddd, MMM d")#</li><li>#=messages.end#: #=kendo.toString(task.end, "h:mm tt ddd, MMM d")#</li></ul></div>'),C=kendo.template("<span>#=offsetPrefix#: #=offsetText#</span>"),M=kendo.template('<div class="k-task-content"><div>#=plannedStart#: #=startDate#</div><div>#=plannedEnd#: #=endDate#</div></div>'),S={day:{type:"kendo.ui.GanttDayView"},week:{type:"kendo.ui.GanttWeekView"},month:{type:"kendo.ui.GanttMonthView"},year:{type:"kendo.ui.GanttYearView"}};function E(){var t=kendo._activeElement();t&&"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var z=kendo.ui.GanttView=t.extend({init:function(e,s){t.fn.init.call(this,e,s),this.title=this.options.title||this.options.name,this.header=this.element.find(_+z.styles.gridHeader),this.content=this.element.find(_+z.styles.gridContent),this.contentWidth=this.content.width(),this._workDays=function(e){var t=[],s=e.workWeekStart;for(t.push(s);e.workWeekEnd!=s;)s>6?s-=7:s++,t.push(s);return t}(this.options),this._headerTree=s.headerTree,this._taskTree=s.taskTree,this._taskTemplate=s.taskTemplate?kendo.template(s.taskTemplate,d({},kendo.Template,s.templateSettings)):null,this._dependencyTree=s.dependencyTree,this._taskCoordinates={},this._currentTime()},destroy:function(){t.fn.destroy.call(this),clearTimeout(this._tooltipTimeout),this.headerRow=null,this.header=null,this.content=null,this._dragHint=null,this._resizeHint=null,this._resizeTooltip=null,this._taskTooltip=null,this._percentCompleteResizeTooltip=null,this._headerTree=null,this._taskTree=null,this._dependencyTree=null},options:{showWorkHours:!1,showWorkDays:!1,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,slotSize:100,currentTimeMarker:{updateInterval:1e4}},renderLayout:function(){this._slots=this._createSlots(),this._tableWidth=this._calculateTableWidth(),this.createLayout(this._layout()),this._slotDimensions(),this._adjustHeight(),this.content.find(_+z.styles.dependenciesWrapper).width(this._tableWidth)},_adjustHeight:function(){this.content&&this.content.height(this.element.height()-r(this.header))},createLayout:function(e){var t=this._headers(e),n=this._colgroup(),a=this._headerTree,i=s("tbody",null,t),o=s("table",{style:{width:this._tableWidth+"px"},role:"presentation"},[n,i]);a.render([o]),this.headerRow=this.header.find("table:first tr").last()},_slotDimensions:function(){for(var e,t,s=this.headerRow[0].children,n=this._timeSlots(),a=0,i=s.length;a<i;a++)t=s[a],(e=n[a]).offsetLeft=t.offsetLeft,e.offsetWidth=t.offsetWidth},render:function(e){var t,s,n=e.length,a=z.styles,i=this._rowsTable(n),o=this._columnsTable(n),r=this._tasksTable(e),d=this.options.currentTimeMarker,l=this.options.calculatedSize;this._taskTree.render([i,o,r]),t=this.content.find(_+a.rowsTable),l&&(s=l.row*e.length,this.content.find(_+a.tasksTable).height(s),t.height(s)),this._contentHeight=t.height(),this._rowHeight=l?l.row:this._contentHeight/t.find("tr").length,this.content.find(_+a.columnsTable).height(this._contentHeight),!1!==d&&void 0!==d.updateInterval&&this._renderCurrentTime()},_rowsTable:function(e){for(var t,a=[],i=z.styles,o=[null,{className:i.alt}],r=0;r<e;r++)t=s("tr",o[r%2],[s("td",null,[n(" ")])]),a.push(t);return this._createTable(1,a,{className:i.rowsTable})},_columnsTable:function(){for(var e,t,a,i,o=[],r=z.styles,d=this._timeSlots(),l=d.length,h=0,p=0;p<l;p++)i={},h+=a=(t=d[p]).span,1!==a&&(i.colspan=a),t.isNonWorking&&(i.className=r.nonWorking),o.push(s("td",i,[n(" ")]));return e=s("tr",null,o),this._createTable(h,[e],{className:r.columnsTable})},_tasksTable:function(e){for(var t,n,a,i,o,r,d,l=[],p=z.styles,c=this._taskCoordinates={},u=this._calculateMilestoneWidth(),f=Math.round(u.width),k=this.options.resourcesField,g=[p.resource,p.resourceAlt],m=this.options.calculatedSize,_=this._calculateResourcesMargin(),v=this._calculateTaskBorderWidth(),y=this.options.showPlannedTasks,w=0,T=e.length;w<T;w++)o=e[w],a=this._taskPosition(o),y&&((i=this._taskPositionPlanned(o)).borderWidth=v),a.borderWidth=v,t=s("tr",null),n=s("td"),o.start<=this.end&&o.end>=this.start&&(n.children.push(this._renderTask(e[w],a,i)),o[k]&&o[k].length&&(r=h?this._tableWidth-a.left:Math.max(a.width||u.clientWidth,0)+a.left,(d={width:this._tableWidth-(r+_)+"px"})[h?"right":"left"]=r+"px",m&&(d.height=m.cell+"px"),n.children.push(s("div",{className:p.resourcesWrap,style:d},this._renderResources(o[k],g[w%2])))),b=w,D=void 0,H=void 0,H=(D=a.left)+a.width,o.isMilestone()&&(H=(D-=f/2)+f),c[o.id]={start:D,end:H,rowIndex:b}),t.children.push(n),l.push(t);var b,D,H;return this._createTable(1,l,{className:z.styles.tasksTable})},_createTable:function(e,t,n){for(var a,i,o=[],r=0;r<e;r++)o.push(s("col"));return a=s("colgroup",null,o),i=s("tbody",null,t),n.style||(n.style={}),n.style.width=this._tableWidth+"px",n.role="presentation",s("table",n,[a,i])},_calculateTableWidth:function(){for(var e,t=this._timeSlots(),s=0,n=0,a=0,i=t.length;a<i;a++)n+=e=t[a].span,e>s&&(s=e);return Math.round(n*this.options.slotSize/s)},_calculateMilestoneWidth:function(){var t,s,n=z.styles.task+" "+z.styles.taskMilestone,a=e("<div class='"+n+"' style='visibility: hidden; position: absolute'>");return this.content.append(a),t={width:(s=a[0].getBoundingClientRect()).right-s.left,clientWidth:a[0].clientWidth},a.remove(),t},_calculateResourcesMargin:function(){var t,s=e("<div class='"+z.styles.resourcesWrap+"' style='visibility: hidden; position: absolute'>");return this.content.append(s),t=parseInt(s.css(h?"margin-right":"margin-left"),10),s.remove(),t},_calculateTaskBorderWidth:function(){var t,s,n=z.styles.task+" "+z.styles.taskSingle,a=e("<div class='"+n+"' style='visibility: hidden; position: absolute'>");return this.content.append(a),s=kendo.getComputedStyles(a[0],["border-left-width"]),t=parseFloat(s["border-left-width"],10),a.remove(),t},_renderTask:function(e,t,n){var a,i,o,r,d,l,p,c,u=this.options.editable,f=t.left,k=z.styles,g=k.taskWrap,m=this.options.calculatedSize,_={},v={className:g,style:{left:f+"px"}},y=[],w=0,T=t.width;return m&&(v.style.height=m.cell+"px"),n&&(r=e.isMilestone()?this._renderPlannedMilestone(t,n):this._renderPlannedSingleTask(t,n,e),y.push(r),h&&n.left<=t.left&&(v.style.left=n.left+"px")),e.summary?(i=this._renderSummary(e,t,n),v.className+=" "+k.taskSummaryWrap):e.isMilestone()?(i=this._renderMilestone(e,t),v.className+=" "+k.taskMilestoneWrap):i=this._renderSingleTask(e,t,n),n&&!e.isMilestone()&&e.plannedStart<e.end&&e.plannedEnd>e.start&&e.plannedEnd<e.end?(T=h?t.left+t.width-n.left:n.left+n.width-t.left,c=h?n.left-t.left:t.left+t.width-(n.left+n.width),p=s("div",{className:k.taskOffset,style:{width:c-2*n.borderWidth+"px"}}),u&&!1!==u.resize&&!1!==u.update&&!e.summary&&(!1!==u.destroy&&p.children.push(s("span",{className:k.taskActions},[s("a",{className:k.link+" "+k.taskDelete,href:"#","aria-label":"Delete"},[s("span",{className:k.icon+" "+k.iconDelete})])])),h?p.children.push(s("span",{className:k.taskResizeHandle+" "+k.taskResizeHandleWest,style:{right:t.width-5+"px"}})):p.children.push(s("span",{className:k.taskResizeHandle+" "+k.taskResizeHandleEast}))),l=s("div",{className:k.taskOffsetWrap+" "+k.taskInnerWrap},[i,p]),y.push(l)):n?y.push(s("div",{className:k.taskInnerWrap},[i])):y.push(i),a=s("div",v,y),u&&!1!==u.dependencyCreate&&(n&&e.plannedEnd>e.end&&(w=n.left+n.width-t.left-t.width-3+"px"),a.children.push(s("div",{className:k.taskDot+" "+k.taskDotStart})),h&&(w="auto",n&&e.plannedEnd>e.end&&(d=t.left-n.left+"px")),a.children.push(s("div",{className:k.taskDot+" "+k.taskDotEnd,style:{right:w,left:d}}))),e.summary||e.isMilestone()||!u||!1===u.dragPercentComplete||!1===u.update||null!==this._taskTemplate||(o=Math.round(T*e.percentComplete),_[h?"right":"left"]=o+"px",a.children.push(s("div",{className:k.taskDragHandle,style:_}))),a},_renderSingleTask:function(e,t,i){var o,r,d=z.styles,l=[],p=this.options.editable,c=d.task+" "+d.taskSingle,u=t.width;i&&(e.plannedEnd&&e.plannedEnd<=e.start?c+=" "+d.taskDelayed:e.plannedEnd&&e.plannedEnd>e.end?c+=" "+d.taskAdvanced:e.plannedEnd&&e.plannedEnd<e.end&&(h?u=u+t.left-i.left:u-=t.left+t.width-i.left-i.width)),o=Math.round(u*e.percentComplete),null!==this._taskTemplate?r=a(this._taskTemplate(e)):(r=n(e.title),l.push(s("div",{className:d.taskComplete,style:{width:o+"px"}})));var f=s("div",{className:d.taskContent},[s("div",{className:d.taskTemplate},[r])]);return l.push(f),p&&(!1!==p.destroy&&(!i||!e.plannedEnd||e.end<=e.plannedEnd||e.start>=e.plannedEnd)&&f.children.push(s("span",{className:d.taskActions},[s("a",{className:d.link+" "+d.taskDelete,href:"#","aria-label":"Delete"},[s("span",{className:d.icon+" "+d.iconDelete})])])),!1!==p.resize&&!1!==p.update&&(f.children.push(s("span",{className:d.taskResizeHandle+" "+d.taskResizeHandleWest})),f.children.push(s("span",{className:d.taskResizeHandle+" "+d.taskResizeHandleEast})))),s("div",{className:c,"data-uid":e.uid,style:{width:Math.max(u-2*t.borderWidth,0)+"px"}},l)},_renderMilestone:function(e){var t=z.styles,n=t.task+" "+t.taskMilestone;return this.options.showPlannedTasks&&e.plannedEnd&&e.plannedEnd<e.start?n+=" "+t.taskDelayed:e.plannedStart&&e.plannedStart>e.end&&(n+=" "+t.taskAdvanced),s("div",{className:n,"data-uid":e.uid})},_renderSummary:function(e,t,n){var a,i=z.styles,o=t.width,r=i.task+" "+i.taskSummary;return n&&(e.plannedEnd&&e.plannedEnd<=e.start?r+=" "+i.taskDelayed:e.plannedEnd&&e.plannedEnd>e.end?r+=" "+i.taskAdvanced:e.plannedEnd&&e.plannedEnd<e.end&&(h?o=o+t.left-n.left:o-=t.left+t.width-n.left-n.width)),a=Math.round(o*e.percentComplete),s("div",{className:r,"data-uid":e.uid,style:{width:o+"px"}},[s("div",{className:i.taskSummaryProgress,style:{width:a+"px"}},[s("div",{className:i.taskSummaryComplete,style:{width:t.width+"px"}})])])},_renderPlannedSingleTask:function(e,t,n){var a,i=z.styles,o=[];return n.plannedStart&&n.plannedEnd?(o.push(s("div",{className:i.taskPlannedMoment+" "+i.taskPlannedMomentLeft})),o.push(s("div",{className:i.taskPlannedDuration,style:{width:Math.max(t.width-2*t.borderWidth-16,0)+"px"}})),o.push(s("div",{className:i.taskPlannedMoment}))):n.plannedStart?o.push(s("div",{className:i.taskPlannedMoment+" "+i.taskPlannedMomentLeft})):n.plannedEnd&&o.push(s("div",{className:i.taskPlannedMoment,style:{"margin-left":Math.max(t.width-5,0)+"px"}})),a=h?{"margin-right":e.left-t.left+e.width-t.width+"px"}:{"margin-left":t.left-e.left+"px"},s("div",{className:i.taskPlanned,style:a},o)},_renderPlannedMilestone:function(e,t){var n,a=z.styles;return n=h?{"margin-right":e.left-t.left+"px"}:{"margin-left":t.left-e.left+"px"},s("div",{className:a.taskPlanned,style:n},[s("div",{className:a.taskPlannedMoment})])},_renderResources:function(e,t){for(var a,i=[],o=0,r=e.length;o<r;o++)a=e[o],i.push(s("span",{className:t,style:{color:a.get("color")}},[n(a.get("name"))]));return h&&i.reverse(),i},_taskPosition:function(e){var t=Math.round,s=t(this._offset(h?e.end:e.start));return{left:s,width:t(this._offset(h?e.start:e.end))-s}},_taskPositionPlanned:function(e){var t=Math.round,s=t(this._offset(h?e.plannedEnd:e.plannedStart));return{left:s,width:t(this._offset(h?e.plannedStart:e.plannedEnd))-s}},_offset:function(e){var t,s=this._timeSlots(),n=0;return s.length?((t=s[this._slotIndex("start",e)]).end<e?n=t.offsetWidth:t.start<=e&&(n=(e-t.start)/(t.end-t.start)*t.offsetWidth),h&&(n=t.offsetWidth+1-n),t.offsetLeft+n):0},_slotIndex:function(e,t,s){var n,a=this._timeSlots(),i=0,o=a.length-1;s&&(a=[].slice.call(a).reverse());do{a[n=Math.ceil((o+i)/2)][e]<t?i=n:(n===o&&n--,o=n)}while(i!==o);return s&&(i=a.length-1-i),i},_timeByPosition:function(e,t,s){var n=this._slotByPosition(e);if(t)return s?n.end:n.start;var a=e-this.element.find(_+z.styles.tasksTable).offset().left,i=n.end-n.start,o=a-n.offsetLeft;return h&&(o=n.offsetWidth-o),new Date(n.start.getTime()+i*(o/n.offsetWidth))},_slotByPosition:function(e){var t=e-this.element.find(_+z.styles.tasksTable).offset().left,s=this._slotIndex("offsetLeft",t,h);return this._timeSlots()[s]},_renderDependencies:function(e){for(var t=[],s=this._dependencyTree,n=0,a=e.length;n<a;n++)t.push.apply(t,this._renderDependency(e[n]));s.render(t)},_renderDependency:function(e){var t,s=this._taskCoordinates[e.predecessorId],n=this._taskCoordinates[e.successorId];if(!s||!n)return[];for(var a=0,i=(t=this["_render"+["FF","FS","SF","SS"][h?3-e.type:e.type]](s,n)).length;a<i;a++)t[a].attr["data-uid"]=e.uid;return t},_renderFF:function(e,t){var s=this._dependencyFF(e,t,!1);return s[s.length-1].children[0]=this._arrow(!0),s},_renderSS:function(e,t){var s=this._dependencyFF(t,e,!0);return s[0].children[0]=this._arrow(!1),s.reverse()},_renderFS:function(e,t){var s=this._dependencyFS(e,t,!1);return s[s.length-1].children[0]=this._arrow(!1),s},_renderSF:function(e,t){var s=this._dependencyFS(t,e,!0);return s[0].children[0]=this._arrow(!0),s.reverse()},_dependencyFF:function(e,t,s){var n,a=this,i=[],o=0,r=0,d=0,l=0,h=s?"start":"end",p=this._rowHeight,c=e.rowIndex*p+Math.floor(p/2)-1,u=t.rowIndex*p+Math.floor(p/2)-1,f=z.styles,k=function(){i.push(a._line(f.line+" "+f.lineHorizontal,{left:o+"px",top:r+"px",width:d+"px"}))},g=function(){i.push(a._line(f.line+" "+f.lineVertical,{left:o+"px",top:r+"px",height:l+"px"}))};return o=e[h],r=c,d=10,(n=t[h]-e[h])>0!==s&&(d=Math.abs(n)+10),s?(o-=d,d-=1,k()):(k(),o+=d-2),u<r?(l=r-u,l+=2,r=u,g()):(l=u-r,l+=2,g(),r+=l-2),d=Math.abs(o-t[h]),s||(o-=d-=1),k(),i},_dependencyFS:function(e,t,s){var n=this,a=[],i=0,o=0,r=0,d=0,l=this._rowHeight,h=Math.floor(l/2),p=t.start-e.end,c=e.rowIndex*l+Math.floor(l/2)-1,u=t.rowIndex*l+Math.floor(l/2)-1,f=z.styles,k=function(){a.push(n._line(f.line+" "+f.lineHorizontal,{left:i+"px",top:o+"px",width:r+"px"}))},g=function(){a.push(n._line(f.line+" "+f.lineVertical,{left:i+"px",top:o+"px",height:d+"px"}))};return i=e.end,o=c,r=10,s&&(i+=1,p>20&&(r=p-8),r-=1),k(),i+=r-2,p<=20&&(d=s?Math.abs(u-c)-h:h,u<c?(o-=d,d+=2,g()):(g(),o+=d),(r=e.end-t.start+20)<10&&(r=10),i-=r-2,k()),u<c?(d=o-u,o=u,d+=2,g()):(d=u-o,g(),o+=d),r=t.start-i,s||(r-=1),k(),a},_line:function(e,t){return s("div",{className:e,style:t})},_arrow:function(e){return s("span",{className:e?z.styles.arrowWest:z.styles.arrowEast})},_colgroup:function(){for(var e=this._timeSlots(),t=e.length,n=[],a=0;a<t;a++)for(var i=0,o=e[a].span;i<o;i++)n.push(s("col"));return s("colgroup",null,n)},_createDragHint:function(e){var t,s=z.styles;this._dragHint=e.clone().addClass(s.dragHint).css({cursor:"move"}),(t=this._dragHint.find(_+s.taskPlanned)).css({visibility:"hidden"}),h&&e.find(_+s.taskAdvanced).length>0&&(t.css({"margin-right":"auto",width:0}),this._dragHint.find(_+s.taskDotEnd).css({left:0})),e.closest("td").append(this._dragHint)},_updateDragHint:function(e){var t=this._offset(e);this._dragHint.css({left:t})},_removeDragHint:function(){this._dragHint.remove(),this._dragHint=null},_createResizeHint:function(t){var s,n=z.styles,a=this._taskCoordinates[t.id].rowIndex*this._rowHeight,i=this.options,d=i.messages;this._resizeHint=e(D({styles:n})).css({top:0,height:this._contentHeight}),this.content.append(this._resizeHint),this._resizeTooltip=e(H({styles:n,start:t.start,end:t.end,messages:d.views,format:i.resizeTooltipFormat})).css({top:0,left:0}),this.content.append(this._resizeTooltip),this._resizeTooltipWidth=o(this._resizeTooltip),(s=a-r(this._resizeTooltip))<0&&(s=a+this._rowHeight),this._resizeTooltipTop=s},_updateResizeHint:function(t,s,n){var a=this._offset(h?s:t),i=this._offset(h?t:s),o=i-a,r=n!==h?a:i,d=this._tableWidth-kendo.support.scrollbar(),l=this._resizeTooltipWidth,p=this.options,c=p.messages,u=this.element.find(_+z.styles.tasksTable).offset().left-this.element.find(_+z.styles.tasksWrapper).offset().left;h&&(a+=u),this._resizeHint.css({left:a,width:o}),this._resizeTooltip&&this._resizeTooltip.remove(),(r-=Math.round(l/2))<0?r=0:r+l>d&&(r=d-l),h&&(r+=u),this._resizeTooltip=e(H({styles:z.styles,start:t,end:s,messages:c.views,format:p.resizeTooltipFormat})).css({top:this._resizeTooltipTop,left:r,"min-width":l}).appendTo(this.content)},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=null,this._resizeTooltip.remove(),this._resizeTooltip=null},_updatePercentCompleteTooltip:function(t,s,n){this._removePercentCompleteTooltip();var a=this._percentCompleteResizeTooltip=e(x({styles:z.styles,text:n})).appendTo(this.element),i=Math.round(o(a)/2),d=a.find(_+z.styles.callout),l=Math.round(o(d)/2);a.css({top:t-(r(a)+l),left:s-i}),d.css("left",i-l)},_removePercentCompleteTooltip:function(){this._percentCompleteResizeTooltip&&this._percentCompleteResizeTooltip.remove(),this._percentCompleteResizeTooltip=null},_updateDependencyDragHint:function(e,t){this._removeDependencyDragHint(),this._creteDependencyDragHint(e,t)},_creteDependencyDragHint:function(t,s){var n=z.styles,a=s.x-t.x,i=s.y-t.y,o=Math.sqrt(a*a+i*i),r=Math.atan(i/a);a<0&&(r+=Math.PI),e("<div class='"+n.line+" "+n.lineHorizontal+" "+n.dependencyHint+"'></div>").css({top:t.y,left:t.x,width:o,"transform-origin":"0% 0","-ms-transform-origin":"0% 0","-webkit-transform-origin":"0% 0",transform:"rotate("+r+"rad)","-ms-transform":"rotate("+r+"rad)","-webkit-transform":"rotate("+r+"rad)"}).appendTo(this.content)},_removeDependencyDragHint:function(){this.content.find(_+z.styles.dependencyHint).remove()},_createTaskTooltip:function(t,s,n){var a=z.styles,i=this.options,o=this.content,d=o.offset(),l=kendo.scrollLeft(o),p=e(s).parents("tr").first(),c=p.offset(),u=i.tooltip&&i.tooltip.template?kendo.template(i.tooltip.template):W,f=h?n-(d.left+l+kendo.support.scrollbar()):n-(d.left-l),k=c.top+r(p)-d.top+o.scrollTop(),g=this._taskTooltip=e('<div style="z-index: 100002;" class="'+a.tooltipWrapper+'" ><div class="'+a.taskContent+'"></div></div>');g.css({left:f,top:k}).appendTo(o).find(_+a.taskContent).append(u({styles:a,task:t,messages:i.messages.views})),this._adjustTooltipDimensions(g,c,d,f,l)},_removeTaskTooltip:function(){this._taskTooltip&&this._taskTooltip.remove(),this._taskTooltip=null},_createOffsetTooltip:function(t,s,n){var a,i=z.styles,o=this.content,d=o.offset(),l=kendo.scrollLeft(o),p=s.parents("tr").first(),c=p.offset(),u=h?n-(d.left+l+kendo.support.scrollbar()):n-(d.left-l),f=c.top+r(p)-d.top+o.scrollTop(),k=this._offsetTooltip=e('<div style="z-index: 100002;" class="'+i.tooltipWrapper+'" ></div>'),g=Math.round((t.end.getTime()-t.plannedEnd.getTime())/6e4),m=this.options.messages.plannedTasks,_=g%60,v=_+" "+m.minutes;g>=60&&(v=(a=g=Math.floor(g/60))+" "+m.hours,0!==_&&(v+=" "+_+" "+m.minutes),g>=24&&(a=g%24,v=(g=Math.floor(g/24))+" "+m.days,0!==a&&(v+=" "+a+" "+m.hours))),k.css({left:u,top:f}).addClass(i.offsetTooltipDelay).appendTo(o).append(C({offsetPrefix:m.offsetTooltipDelay,offsetText:v})),this._adjustTooltipDimensions(k,c,d,u,l)},_removeOffsetTooltip:function(){this._offsetTooltip&&this._offsetTooltip.remove(),this._offsetTooltip=null},_createPlannedTooltip:function(t,s,n){var a=z.styles,i=this.content,o=i.offset(),d=kendo.scrollLeft(i),l=s.parents("tr").first(),p=l.offset(),c=h?n-(o.left+d+kendo.support.scrollbar()):n-(o.left-d),u=p.top+r(l)-o.top+i.scrollTop(),f=this._plannedTooltip=e('<div style="z-index: 100002;" class="'+a.tooltipWrapper+" "+a.plannedTooltip+'" ></div>'),k=this.options.messages.editor;f.css({left:c,top:u}).appendTo(i).append(M({plannedStart:k.plannedStart,startDate:kendo.toString(t.plannedStart,"H:mm tt ddd, MMM dd"),plannedEnd:k.plannedEnd,endDate:kendo.toString(t.plannedEnd,"H:mm tt ddd, MMM dd")})),this._adjustTooltipDimensions(f,p,o,c,d)},_removePlannedTooltip:function(){this._plannedTooltip&&this._plannedTooltip.remove(),this._plannedTooltip=null},_adjustTooltipDimensions:function(e,t,s,n,a){var i,d=this.content,l=d.width();r(e)<t.top-s.top&&e.css("top",t.top-s.top-r(e)+d.scrollTop()),(i=o(e))+n-a>l&&((n-=i)<a&&(n=a+l-(i+17)),e.css("left",n))},_scrollTo:function(e){var t=e.offset().left,s=e.width(),n=t+s,a=e.closest("tr"),i=a.offset().top,o=i+a.height(),r=this.content,d=r.offset(),l=d.top,h=l+r.height(),p=d.left,c=r.width(),u=p+c,f=kendo.support.scrollbar();i<l?r.scrollTop(r.scrollTop()+(i-l)):o>h&&r.scrollTop(r.scrollTop()+(o+f-h)),t<p&&s>c&&n<u||n>u&&s<c?kendo.scrollLeft(r,kendo.scrollLeft(r)+(n+f-u)):(n>u&&s>c&&t>p||t<p&&s<c)&&kendo.scrollLeft(r,kendo.scrollLeft(r)+(t-p))},_scrollToDate:function(e){var t,s=this.start,n=this.end;e>=s&&e<n&&(t=this._offset(e),kendo.support.isRtl(this.element)&&(t=this._tableWidth-t),kendo.scrollLeft(this.content,t))},_timeSlots:function(){return this._slots&&this._slots.length?this._slots[this._slots.length-1]:[]},_headers:function(e){for(var t,n,i,o,r=[],d=z.styles,l=0,h=e.length;l<h;l++){n=[];for(var p=0,c=(t=e[l]).length;p<c;p++)i=t[p],o=a(i.text),n.push(s("td",{colspan:i.span,className:d.header+(i.isNonWorking?" "+d.nonWorking:"")},[o]));r.push(s("tr",null,n))}return r},_hours:function(e,t){var s,n,a,i=[],o=this.options,r=o.workDayStart.getHours(),d=o.workDayEnd.getHours(),l=o.hourSpan;for(e=new Date(e),t=new Date(t),o.showWorkHours&&e.setHours(r);e<t;)n=(a=(s=new Date(e)).getHours())>=r&&a<d,s.setHours(s.getHours()+l),a==s.getHours()&&s.setHours(s.getHours()+2*l),o.showWorkHours&&!n||i.push({start:e,end:s,isNonWorking:!n,span:1}),e=s;return i},_days:function(e,t){var s,n,a=[];for(e=new Date(e),t=new Date(t);e<t;)s=t<kendo.date.nextDay(e)?t:kendo.date.nextDay(e),n=this._isWorkDay(e),this.options.showWorkDays&&!n||a.push({start:e,end:s,isNonWorking:!n,span:1}),e=s;return a},_weeks:function(e,t){var s,n,a,i=[],o=this.calendarInfo().firstDay;for(e=new Date(e),t=new Date(t);e<t;)(s=kendo.date.dayOfWeek(kendo.date.addDays(e,1),o,1))>t&&(s=t),(a=(n=this._days(e,s)).length)>0&&i.push({start:n[0].start,end:n[a-1].end,span:a}),e=s;return i},_months:function(e,t){var s,n,a,i,o=[];for(e=new Date(e),t=new Date(t);e<t;)s=new Date(e),n=kendo.date.firstDayOfMonth(new Date(s.setMonth(s.getMonth()+1))),s=t<n?t:n,(i=(a=this._days(e,s)).length)>0&&o.push({start:a[0].start,end:a[i-1].end,span:i}),e=s;return o},_years:function(e,t){var s,n,a=[];for(e=new Date(e),t=new Date(t);e<t;)s=new Date(e),(s=kendo.date.firstDayOfMonth(new Date(s.setMonth(12))))>=t&&(s=t),n=(s.getMonth()||12)-e.getMonth(),a.push({start:e,end:s,span:n}),e=s;return a},_slotHeaders:function(e,t){for(var s,n=[],a=0,i=e.length;a<i;a++)s=e[a],n.push({text:t(s),isNonWorking:!!s.isNonWorking,span:s.span});return n},_isWorkDay:function(e){for(var t=e.getDay(),s=this._workDays,n=0,a=s.length;n<a;n++)if(s[n]===t)return!0;return!1},calendarInfo:function(){return kendo.getCulture().calendars.standard},_renderCurrentTime:function(){var t,s=this._getCurrentTime(),n=this._offset(s),a=e("<div class='k-current-time'></div>"),i=z.styles,o=this.element.find(_+i.tasksWrapper),r=this.element.find(_+i.tasksTable);this.content&&this._timeSlots().length&&(this.content.find(".k-current-time").remove(),s<(t=this._timeSlots()[this._slotIndex("start",s)]).start||s>t.end||(o.length&&r.length&&(n+=r.offset().left-o.offset().left),a.css({left:n+"px",top:"0px",width:"1px",height:this._contentHeight+"px"}).appendTo(this.content)))},_getCurrentTime:function(){return new Date},_currentTime:function(){var e=this.options.currentTimeMarker;!1!==e&&void 0!==e.updateInterval&&(this._renderCurrentTime(),this._currentTimeUpdateTimer=setInterval(l(this._renderCurrentTime,this),e.updateInterval))}});d(!0,z,{styles:{alt:"k-alt",reset:"k-reset",nonWorking:"k-nonwork-hour",header:"k-header",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",tasksWrapper:"k-gantt-tables",rowsTable:"k-gantt-rows",columnsTable:"k-gantt-columns",tasksTable:"k-gantt-tasks",dependenciesWrapper:"k-gantt-dependencies",resource:"k-resource",resourceAlt:"k-resource k-alt",task:"k-task",taskSingle:"k-task-single",taskMilestone:"k-task-milestone",taskSummary:"k-task-summary",taskWrap:"k-task-wrap",taskMilestoneWrap:"k-milestone-wrap",taskSummaryWrap:"k-summary-wrap",taskPlanned:"k-task-planned",taskPlannedMoment:"k-task-moment",taskPlannedDuration:"k-task-duration",taskPlannedMomentLeft:"k-moment-left",taskAdvanced:"k-task-advanced",taskDelayed:"k-task-delayed",taskOffset:"k-task-offset",taskOffsetWrap:"k-task-offset-wrap",taskInnerWrap:"k-task-inner-wrap",resourcesWrap:"k-resources-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",taskDragHandle:"k-task-draghandle",taskContent:"k-task-content",taskTemplate:"k-task-template",taskActions:"k-task-actions",taskDelete:"k-task-delete",taskComplete:"k-task-complete",taskDetails:"k-task-details",taskDetailsPercent:"k-task-pct",link:"k-link",icon:"k-icon",iconDelete:"k-i-close",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskResizeHandleEast:"k-resize-e",taskSummaryProgress:"k-task-summary-progress",taskSummaryComplete:"k-task-summary-complete",line:"k-gantt-line",lineHorizontal:"k-gantt-line-h",lineVertical:"k-gantt-line-v",arrowWest:"k-arrow-w",arrowEast:"k-arrow-e",dragHint:"k-drag-hint",dependencyHint:"k-gantt-dependency-hint",tooltipWrapper:"k-tooltip",tooltipContent:"k-tooltip-content",tooltipCallout:"k-callout k-callout-s",callout:"k-callout",marquee:"k-marquee k-gantt-marquee",marqueeColor:"k-marquee-color",offsetTooltipAdvanced:"k-offset-tooltip-advanced",offsetTooltipDelay:"k-offset-tooltip-delayed",plannedTooltip:"k-planned-tooltip"}}),kendo.ui.GanttDayView=z.extend({name:"day",options:{timeHeaderTemplate:v,dayHeaderTemplate:y,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(e){var t=this.options.range;this.start=kendo.date.getDate(e.start),this.end=kendo.date.getDate(e.end),(kendo.date.getMilliseconds(e.end)>0||this.end.getTime()===this.start.getTime())&&(this.end=kendo.date.addDays(this.end,1)),t&&t.start&&(this.start=kendo.date.getDate(t.start),this.start.setHours(t.start.getHours())),t&&t.end&&(this.end=kendo.date.getDate(t.end),this.end.setHours(t.end.getHours()))},_createSlots:function(){var e,t,s,n,a=[];s=[];for(var i=0,o=(e=this._days(this.start,this.end)).length;i<o;i++)t=e[i],n=this._hours(t.start,t.end),t.span=n.length,s.push.apply(s,n);return a.push(e),a.push(s),a},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.dayHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.timeHeaderTemplate))),e}}),kendo.ui.GanttWeekView=z.extend({name:"week",options:{dayHeaderTemplate:y,weekHeaderTemplate:w,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(e){var t,s=this.options.range,n=this.calendarInfo().firstDay,a=e.end;n===a.getDay()&&a.setDate(a.getDate()+7),this.start=kendo.date.getDate(kendo.date.dayOfWeek(e.start,n,-1)),this.end=kendo.date.getDate(kendo.date.dayOfWeek(a,n,1)),s&&s.start&&(this.start=kendo.date.getDate(s.start)),s&&s.end&&(t=new Date(s.end),kendo.date.getDate(t)<s.end?this.end=kendo.date.getDate(new Date(t.setDate(t.getDate()+1))):this.end=kendo.date.getDate(t))},_createSlots:function(){var e=[];return e.push(this._weeks(this.start,this.end)),e.push(this._days(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.weekHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.dayHeaderTemplate))),e}}),kendo.ui.GanttMonthView=z.extend({name:"month",options:{weekHeaderTemplate:w,monthHeaderTemplate:T,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(e){var t,s=this.options.range;this.start=kendo.date.firstDayOfMonth(e.start),this.end=kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(e.end)),1),s&&s.start&&(this.start=kendo.date.getDate(s.start)),s&&s.end&&(t=new Date(s.end),kendo.date.getDate(t)<s.end?this.end=kendo.date.getDate(new Date(t.setDate(t.getDate()+1))):this.end=kendo.date.getDate(t))},_createSlots:function(){var e=[];return e.push(this._months(this.start,this.end)),e.push(this._weeks(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.monthHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.weekHeaderTemplate))),e}}),kendo.ui.GanttYearView=z.extend({name:"year",options:{yearHeaderTemplate:b,monthHeaderTemplate:T,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(e){var t,s=this.options.range;this.start=kendo.date.firstDayOfMonth(new Date(e.start.setMonth(0))),this.end=kendo.date.firstDayOfMonth(new Date(e.end.setMonth(12))),s&&s.start&&(this.start=kendo.date.firstDayOfMonth(s.start)),s&&s.end&&(t=kendo.date.firstDayOfMonth(s.end),this.end=kendo.date.getDate(new Date(t.setMonth(t.getMonth()+1))))},_createSlots:function(){var t=[],s=this._months(this.start,this.end);return e(s).each((function(e,t){t.span=1})),t.push(this._years(this.start,this.end)),t.push(s),t},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.yearHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.monthHeaderTemplate))),e}});var P=kendo.ui.GanttTimeline=t.extend({init:function(e,s){t.fn.init.call(this,e,s),this.options.views&&this.options.views.length||(this.options.views=["day","week","month"]),h=kendo.support.isRtl(e),this._wrapper(),this._domTrees(),this._views(),this._selectable(),this._draggable(),this._resizable(),this._percentResizeDraggable(),this._createDependencyDraggable(),this._attachEvents(),this._tooltip()},options:{name:"GanttTimeline",messages:{views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"}},snap:!0,selectable:!0,editable:!0},destroy:function(){t.fn.destroy.call(this),clearTimeout(this._tooltipTimeout),this._currentTimeUpdateTimer&&clearInterval(this._currentTimeUpdateTimer),this._unbindView(this._selectedView),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this._percentDraggable&&this._percentDraggable.destroy(),this._dependencyDraggable&&this._dependencyDraggable.destroy(),this.touch&&this.touch.destroy(),this._headerTree=null,this._taskTree=null,this._dependencyTree=null,this.wrapper.off(u),kendo.destroy(this.wrapper)},_wrapper:function(){var t,s,n,a,i=P.styles,o=this,d=this.options;this.wrapper=this.element.addClass(i.wrapper).append("<div class='"+i.gridHeader+"'><div class='"+i.gridHeaderWrap+"'></div></div>").append("<div class='"+i.gridContentWrap+"'><div class='"+i.tasksWrapper+"'></div><div class='"+i.dependenciesWrapper+"'></div></div>"),d.rowHeight&&(this._calculatedSize=(n="string"==typeof d.rowHeight?d.rowHeight:d.rowHeight+"px",a=e(kendo.format("<table style='visibility: hidden;'><tbody><tr style='height:{0}'><td>&nbsp;</td></tr></tbody></table>",n)),o.wrapper.find(_+i.tasksWrapper).append(a),t=r(a.find("tr")),s=a.find("td").height(),a.remove(),{row:t,cell:s}))},_domTrees:function(){var e=P.styles,t=kendo.dom.Tree,s=this.wrapper;this._headerTree=new t(s.find(_+e.gridHeaderWrap)[0]),this._taskTree=new t(s.find(_+e.tasksWrapper)[0]),this._dependencyTree=new t(s.find(_+e.dependenciesWrapper)[0])},_views:function(){var e,t,s,n,a,o=this.options.views;this.views={};for(var r=0,l=o.length;r<l;r++)e=o[r],(t=i(e))&&!1===e.selectable||(s=t?"string"!=typeof e.type?e.title:e.type:e,(n=S[s])&&(t&&(e.type=n.type),n.title=this.options.messages.views[s]),e=d({title:s},n,t?e:{}),s&&(this.views[s]=e,a&&!e.selected||(a=s)));a&&(this._selectedViewName=a)},view:function(e){return e&&(this._selectView(e),this.trigger("navigate",{view:e,action:"changeView"})),this._selectedView},_selectView:function(e){e&&this.views[e]&&(this._selectedView&&this._unbindView(this._selectedView),this._selectedView=this._initializeView(e),this._selectedViewName=e)},_viewByIndex:function(e){var t,s=this.views;for(t in s){if(!e)return t;e--}},_initializeView:function(e){var t,s=this.views[e];if(s){var n=s.type;if("string"==typeof n&&(n=kendo.getter(s.type)(window)),!n)throw new Error("There is no such view");var a={};d(a,this.options.range,s.range);var i=s.date||this.options.date;s=new n(this.wrapper,(delete(t=d(!0,{headerTree:this._headerTree,taskTree:this._taskTree,dependencyTree:this._dependencyTree,calculatedSize:this._calculatedSize},s,this.options,{date:i,range:a})).name,delete t.prefix,delete t.views,t))}return s},_unbindView:function(e){e&&e.destroy()},_range:function(e){if(!e||!e.length)return{start:new Date,end:new Date};var t=new c(e).sort({field:"start",dir:"asc"}).toArray()[0].start||new Date,s=new c(e).sort({field:"end",dir:"desc"}).toArray()[0].end||new Date;return{start:new Date(t),end:new Date(s)}},_render:function(e){var t=this.view(),s=this._range(e),n=t.options.date;this._tasks=e,t.range(s),t.renderLayout(),t.render(e),n&&t._scrollToDate(n)},_renderDependencies:function(e){this.view()._renderDependencies(e)},_taskByUid:function(e){for(var t,s=this._tasks,n=s.length,a=0;a<n;a++)if((t=s[a]).uid===e)return t},_draggable:function(){var e,t,s,n,a=this,i=this.options.snap,o=P.styles,r=this.options.editable,d=function(){a.view()._removeDragHint(),e&&e.css("opacity",1),e=null,t=null,a.dragInProgress=!1};r&&!1!==r.move&&!1!==r.update&&(this._moveDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+o.task+","+_+o.taskOffset,holdToDrag:kendo.support.mobileOS,ignore:_+o.taskResizeHandle}),this._moveDraggable.bind("dragstart",(function(r){var d=a.view();e=r.currentTarget.closest(_+o.taskWrap),t=a._taskByUid(r.currentTarget.parent().find(_+o.task).attr("data-uid")),a.trigger("moveStart",{task:t})?r.preventDefault():(s=t.start,n=d._timeByPosition(r.x.location,i)-s,d._createDragHint(e),e.css("opacity",.5),clearTimeout(a._tooltipTimeout),a.dragInProgress=!0)})).bind("drag",kendo.throttle((function(e){if(a.dragInProgress){var o=a.view(),r=new Date(o._timeByPosition(e.x.location,i)-n),d=r;a.trigger("move",{task:t,start:r})||(s=r,h&&(d=new Date(s.getTime()+t.duration())),o._updateDragHint(d))}}),15)).bind("dragend",(function(){a.trigger("moveEnd",{task:t,start:s}),d()})).bind("dragcancel",(function(){d()})).userEvents.bind("select",(function(){E()})))},_resizable:function(){var e,t,s,n,a,i=this,o=this.options.snap,r=P.styles,d=this.options.editable,l=function(){i.view()._removeResizeHint(),e=null,t=null,i.dragInProgress=!1};d&&!1!==d.resize&&!1!==d.update&&(this._resizeDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+r.taskResizeHandle,holdToDrag:!1}),this._resizeDraggable.bind("dragstart",(function(o){a=o.currentTarget.hasClass(r.taskResizeHandleWest),h&&(a=!a),e=o.currentTarget.closest(_+r.taskWrap).find(_+r.task),t=i._taskByUid(e.attr("data-uid")),i.trigger("resizeStart",{task:t})?o.preventDefault():(s=t.start,n=t.end,i.view()._createResizeHint(t),clearTimeout(i._tooltipTimeout),i.dragInProgress=!0)})).bind("drag",kendo.throttle((function(e){if(i.dragInProgress){var r=i.view(),d=r._timeByPosition(e.x.location,o,!a);a?s=d<n?d:n:n=d>s?d:s,i.trigger("resize",{task:t,start:s,end:n})||r._updateResizeHint(s,n,a)}}),15)).bind("dragend",(function(){i.trigger("resizeEnd",{task:t,resizeStart:a,start:s,end:n}),l()})).bind("dragcancel",(function(){l()})).userEvents.bind("select",(function(){E()})))},_percentResizeDraggable:function(){var e,t,s,n,a,i,r,d,l,p,c=this,u=P.styles,f=this.options.editable,k=function(){c.view()._removePercentCompleteTooltip(),t=null,e=null,c.dragInProgress=!1},g=function(e){var s=t.siblings(_+u.taskDragHandle);s.length||(s=t.closest(_+u.taskWrap).find(_+u.taskDragHandle)),s.css(h?"right":"left",e),t.find(_+u.taskComplete).width(e)};f&&!1!==f.dragPercentComplete&&!1!==f.update&&(this._percentDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+u.taskDragHandle,holdToDrag:!1}),this._percentDraggable.bind("dragstart",(function(d){c.trigger("percentResizeStart")?d.preventDefault():((t=d.currentTarget.siblings(_+u.task)).length||(t=d.currentTarget.closest(_+u.taskWrap).find(_+u.task)),e=c._taskByUid(t.attr("data-uid")),r=e.percentComplete,s=t.offset(),n=this.element.offset(),a=t.find(_+u.taskComplete).width(),i=o(t),clearTimeout(c._tooltipTimeout),c.dragInProgress=!0)})).bind("drag",kendo.throttle((function(e){if(c.dragInProgress){p=h?-e.x.initialDelta:e.x.initialDelta;var t=Math.max(0,Math.min(i,a+p));r=Math.round(t/i*100),g(t),d=s.top-n.top,l=s.left+t-n.left,h&&(l+=i-2*t),c.view()._updatePercentCompleteTooltip(d,l,r)}}),15)).bind("dragend",(function(){c.trigger("percentResizeEnd",{task:e,percentComplete:r/100}),k()})).bind("dragcancel",(function(){g(a),k()})).userEvents.bind("select",(function(){E()})))},_createDependencyDraggable:function(){var t,s,n,a=this,i=e(),d=e(),l=P.styles,h=this.options.editable,p=function(){t.css("display","").removeClass(l.hovered),t.parent().removeClass(l.origin),t=null,c(!1),d=e(),i=e(),a.view()._removeDependencyDragHint(),a.dragInProgress=!1},c=function(e){d.hasClass(l.origin)||(d.find(_+l.taskDot).css("display",e?"block":""),i.toggleClass(l.hovered,e))};h&&!1!==h.dependencyCreate&&(this._dependencyDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+l.taskDot,holdToDrag:!1}),this._dependencyDraggable.bind("dragstart",(function(e){if(a.trigger("dependencyDragStart"))e.preventDefault();else{(t=e.currentTarget.css("display","block").addClass(l.hovered)).parent().addClass(l.origin);var i=t.offset(),d=a.wrapper.find(_+l.tasksWrapper).offset();s=Math.round(i.left-d.left+r(t)/2),n=Math.round(i.top-d.top+o(t)/2),clearTimeout(a._tooltipTimeout),a.dragInProgress=!0}})).bind("drag",kendo.throttle((function(t){if(a.dragInProgress){a.view()._removeDependencyDragHint();var o=e(kendo.elementUnderCursor(t)),r=a.wrapper.find(_+l.tasksWrapper).offset(),h=t.x.location-r.left,p=t.y.location-r.top;a.view()._updateDependencyDragHint({x:s,y:n},{x:h,y:p}),c(!1),i=o.hasClass(l.taskDot)?o:e(),d=o.closest(_+l.taskWrap),c(!0)}}),15)).bind("dragend",(function(){if(i.length){var e=t.hasClass(l.taskDotStart),s=i.hasClass(l.taskDotStart),n=e?s?3:2:s?1:0,o=t.siblings(_+l.task);o.length||(o=t.closest(_+l.taskWrap).find(_+l.task));var r=a._taskByUid(o.attr("data-uid")),d=i.siblings(_+l.task);d.length||(d=i.closest(_+l.taskWrap).find(_+l.task));var h=a._taskByUid(d.attr("data-uid"));r!==h&&a.trigger("dependencyDragEnd",{type:n,predecessor:r,successor:h})}p()})).bind("dragcancel",(function(){p()})).userEvents.bind("select",(function(){E()})))},_selectable:function(){var t=this,s=P.styles;this.options.selectable&&this.wrapper.on(f+u,_+s.task+","+_+s.taskOffset,(function(n){n.stopPropagation();var a=e(this).attr("data-uid");a||(a=e(this).closest(_+s.taskWrap).find(_+s.task).data("uid")),n.ctrlKey?t.trigger("clear"):t.trigger("select",{uid:a})})).on(f+u,_+s.taskWrap,(function(t){t.stopPropagation(),e(this).css("z-index","0");var n=e(document.elementFromPoint(t.clientX,t.clientY));n.hasClass(s.line)&&n.click(),e(this).css("z-index","")})).on(f+u,_+s.tasksWrapper,(function(){t.selectDependency().length>0?t.clearSelection():t.trigger("clear")})).on(f+u,_+s.line,(function(e){e.stopPropagation(),t.selectDependency(this)}))},select:function(e){var t=this.wrapper.find(e),s=P.styles;return t.length?(this.clearSelection(),t.addClass(s.selected),void(kendo.support.mobileOS&&t.parent().addClass(s.taskWrapActive))):this.wrapper.find(_+s.task+_+s.selected)},selectDependency:function(t){var s,n=this.wrapper.find(t),a=P.styles;return n.length?(this.clearSelection(),this.trigger("clear"),s=e(n).attr("data-uid"),void this.wrapper.find(_+a.line+"[data-uid='"+s+"']").addClass(a.selected)):this.wrapper.find(_+a.line+_+a.selected)},clearSelection:function(){var e=P.styles;this.wrapper.find(_+e.selected).removeClass(e.selected),kendo.support.mobileOS&&this.wrapper.find(_+e.taskWrapActive).removeClass(e.taskWrapActive)},_attachEvents:function(){var t=this,s=P.styles;this.options.editable&&(this._tabindex(),this.wrapper.on(f+u,_+s.taskDelete,(function(n){t.trigger("removeTask",{uid:e(this).closest(_+s.taskWrap).find(_+s.task).attr("data-uid")}),n.stopPropagation(),n.preventDefault()})).on("keydown"+u,(function(e){var s,n=t.options.editable;e.keyCode===p.DELETE&&n&&!1!==n.dependencyDestroy&&(s=t.selectDependency()).length&&(t.trigger("removeDependency",{uid:s.attr("data-uid")}),t.clearSelection())})),kendo.support.mobileOS?this.touch=this.wrapper.kendoTouch({filter:_+s.task+","+_+s.taskOffset,doubletap:function(n){!1!==t.options.editable.update&&t.trigger("editTask",{uid:e(n.touch.currentTarget).closest(_+s.taskWrap).find(_+s.task).attr("data-uid")})}}).data("kendoTouch"):this.wrapper.on("dblclick"+u,_+s.task+","+_+s.taskOffset,(function(n){!1!==t.options.editable.update&&(t.trigger("editTask",{uid:e(this).closest(_+s.taskWrap).find(_+s.task).attr("data-uid")}),n.stopPropagation(),n.preventDefault())})))},_tooltip:function(){var t,s=this,n=this.options.tooltip,a=P.styles,i=function(e){t=e.clientX};n&&!1===n.visible||(kendo.support.mobileOS?(this.wrapper.on(f+u,_+a.taskDelete,(function(e){e.stopPropagation(),s.view()._removeTaskTooltip()})).on(m+u,_+a.task,(function(t){0===e(t.relatedTarget).parents(_+a.taskWrap,_+a.task).length&&s.view()._removeTaskTooltip()})).on(m+u,_+a.taskOffset,(function(t){0===e(t.relatedTarget).parents(_+a.taskWrap,_+a.task).length&&s.view()._removeOffsetTooltip()})).on(m+u,_+a.taskPlanned,(function(t){0===e(t.relatedTarget).parents(_+a.taskWrap,_+a.task).length&&s.view()._removePlannedTooltip()})),this.touch&&this.touch.bind("tap",(function(t){var n,i=e(t.touch.target),o=t.touch.x.client;i.hasClass(a.task)?(n=s._taskByUid(i.attr("data-uid")),s.view()._taskTooltip&&s.view()._removeTaskTooltip(),s.view()._createTaskTooltip(n,i,o)):(n=s._taskByUid(i.closest(_+a.taskWrap).find(_+a.task).attr("data-uid")),s.view()._offsetTooltip&&s.view()._removeOffsetTooltip(),s.view()._createOffsetTooltip(n,i,o))})).bind("doubletap",(function(){s.view()._removeTaskTooltip(),s.view()._removeOffsetTooltip()}))):this.wrapper.on(g+u,_+a.task,(function(){var n=this,a=s._taskByUid(e(this).attr("data-uid"));s.dragInProgress||(s._tooltipTimeout=setTimeout((function(){s.view()._createTaskTooltip(a,n,t)}),800),e(this).on(k,i))})).on(m+u,_+a.task,(function(){clearTimeout(s._tooltipTimeout),s.view()._removeTaskTooltip(),e(this).off(k,i)})).on(g+u,_+a.taskOffset,(function(){var n=e(this).closest(_+a.taskWrap).find(_+a.task),o=s._taskByUid(n.attr("data-uid"));s.dragInProgress||(s._offsetTooltipTimeout=setTimeout((function(){s.view()._createOffsetTooltip(o,n,t)}),800),e(this).on(k,i))})).on(m+u,_+a.taskOffset,(function(){clearTimeout(s._offsetTooltipTimeout),s.view()._removeOffsetTooltip(),e(this).off(k,i)})).on(g+u,_+a.taskPlanned,(function(){var n=e(this).closest(_+a.taskWrap).find(_+a.task),o=s._taskByUid(n.attr("data-uid"));s._plannedTooltipTimeout=setTimeout((function(){s.view()._createPlannedTooltip(o,n,t)}),800),e(this).on(k,i)})).on(m+u,_+a.taskPlanned,(function(){clearTimeout(s._plannedTooltipTimeout),s.view()._removePlannedTooltip(),e(this).off(k,i)})))},_setPlanned:function(e){this.options.showPlannedTasks=e,this.view().options.showPlannedTasks=e}});d(!0,P,{styles:{wrapper:"k-timeline k-grid k-widget",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",tasksWrapper:"k-gantt-tables",dependenciesWrapper:"k-gantt-dependencies",task:"k-task",taskOffset:"k-task-offset",taskOffsetWrap:"k-task-offset-wrap",taskPlanned:"k-task-planned",line:"k-gantt-line",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskDragHandle:"k-task-draghandle",taskComplete:"k-task-complete",taskDelete:"k-task-delete",taskWrapActive:"k-task-wrap-active",taskWrap:"k-task-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",hovered:"k-state-hover",selected:"k-state-selected",origin:"k-origin"}})}(window.kendo.jQuery),window.kendo})?n.apply(t,a):n)||(e.exports=i)},1272:function(e,t){e.exports=s(7943)}})}}]);