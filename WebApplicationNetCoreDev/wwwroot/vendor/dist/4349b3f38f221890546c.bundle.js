(self.webpackChunk_5_112_1332=self.webpackChunk_5_112_1332||[]).push([[1843],{1843:(e,t,i)=>{e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}return i.m=e,i.c=t,i.p="",i(0)}({0:function(e,t,i){e.exports=i(1374)},3:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1054:function(e,t){e.exports=i(3696)},1056:function(e,t){e.exports=i(109)},1195:function(e,t){e.exports=i(7383)},1246:function(e,t){e.exports=i(2116)},1255:function(e,t){e.exports=i(3541)},1258:function(e,t){e.exports=i(6528)},1263:function(e,t){e.exports=i(7281)},1268:function(e,t){e.exports=i(2715)},1282:function(e,t){e.exports=i(4460)},1374:function(e,t,i){var n,a,o;i(3),a=[i(1054),i(1255),i(1056),i(1195),i(1268),i(1376),i(1377),i(1375),i(1378),i(1379),i(1380),i(1246),i(1282),i(1263),i(1258)],void 0===(o="function"==typeof(n=function(){return function(e,t){var i=window.kendo,n=i.date,a=n.MS_PER_DAY,o=n.getDate,r=i.date.getMilliseconds,s=i.recurrence,l=e.extend({F10:121},i.keys),d=i.ui,c=d.Widget,u=d.DataBoundWidget,p="string",f=d.Popup,v=d.Calendar,h=i.data.DataSource,m=e.isPlainObject,g=e.extend,_=e.proxy,k=Object.prototype.toString,b=e.isArray,w=".kendoScheduler",y="click",z="mousedown",T=i.support.pointers?"pointerdown":"touchstart",D=i.support.pointers?"pointermove":"touchmove",x=i.support.pointers?"pointerup":"touchend",S=i.support.mousemove,E="change",R="progress",C="error",P="cancel",M="remove",I="resetSeries",V="save",B="edit",A="k-state-focused",H=".k-scheduler-views",O=/(?:value:start|value:end)(?:,|$)/,W=o(new Date),F=",",N=/\;/g,L="recurrenceException",K="Do you want to edit only this event occurrence or the whole series?",U=i.template('<select class="k-dropdown k-views-dropdown">#for (var view in views) {#<option value="#= view #">${views[view].title}</option>#}#</select>'),q=i.template('<div class="k-scheduler-toolbar k-toolbar"># if (pdf) { #<button class="k-button k-pdf"><span class="k-icon k-i-file-pdf"></span><span class="k-button-text">${messages.pdf}</span></button># } #<span class="k-scheduler-navigation k-button-group"><button class="k-button k-nav-today" title="${messages.today}"><span class="k-button-text">${messages.today}</span></button><button class="k-button k-button-icon k-icon-button k-nav-prev" title="${messages.previous}" aria-label="${messages.previous}"><span class="k-icon k-i-arrow-60-left"></span></button><button class="k-button k-button-icon k-icon-button k-nav-next" title="${messages.next}" aria-label="${messages.next}"><span class="k-icon k-i-arrow-60-right"></span></button></span><a role="button" href="\\#" class="k-nav-current"><span class="k-icon k-i-calendar"></span><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></a><span class="k-spacer k-toolbar-spacer"></span># if (search) { #<span class="k-scheduler-search k-textbox"><input autocomplete="off" placeholder="${messages.search}" title="${messages.search}" class="k-input k-scheduler-search-input" /><span class="k-input-icon"><span class="k-icon k-i-search"></span></span></span># } ## if (viewsCount === 1) { #<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-button k-button-icon k-icon-button k-scheduler-refresh"><span class="k-icon k-i-reload"></span></a># } else { #<span class="k-scheduler-views-wrapper"><span class="k-scheduler-views k-button-group"># for (var view in views) { #<button type="button" class="k-button k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#">${views[view].title}</button># } #</span></span># } #</div>'),$=i.template('<div class="k-scheduler-toolbar k-toolbar"><span class="k-scheduler-tools k-button-group"># if (pdf) { #<button type="button" class="k-button k-icon-button k-button-icon k-pdf"><span class="k-icon k-i-file-pdf"></span></button># } #<button type="button" class="k-button k-icon-button k-button-icon k-nav-calendar"><span class="k-icon k-i-calendar"></span></button># if (editable) { #<button type="button" class="k-button k-icon-button k-button-icon k-create-event"><span class="k-icon k-i-plus"></span></button># } #</span><span class="k-spacer k-toolbar-spacer"></span># if (search) { #<span class="k-scheduler-search k-textbox"><input autocomplete="off" placeholder="${messages.search}" title="${messages.search}" class="k-scheduler-search-input" /><span class="k-input-icon"><span class="k-icon k-i-search"></span></span></span># } ##if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-button k-button-icon k-icon-button k-scheduler-refresh"><span class="k-icon k-i-reload"></span></a>#} else {#<select class="k-dropdown k-scheduler-mobile-views">#for(var view in views){#<option class="k-view-#= view.toLowerCase() #" value="#=view#">${views[view].title}</option>#}#</select>#}#</div><div class="k-scheduler-toolbar k-toolbar"><span class="k-scheduler-navigation"><button class="k-button k-button-icon k-icon-button k-nav-prev"><span class="k-icon k-i-arrow-chevron-left"></span></button><span class="k-state-default k-nav-current"><span class="k-m-date-format" data-#=ns#bind="text: formattedMobileDate"></span><span class="k-y-date-format" data-#=ns#bind="text: formattedYear"></span></span><button class="k-button k-button-icon k-icon-button k-nav-next"><span class="k-icon k-i-arrow-chevron-right"></span></button></span></div>');function Y(e,t){return t=t||"",e.startTimezone&&(t=e.startTimezone,e.endTimezone&&(t+=" | "+e.endTimezone)),t}function Q(e,t){var n=t.timezone;n&&(e[i.attr("timezone")]=n)}function j(e,t){var n=t.model.fields[t.field].validation;if(n){var a=n.validDateValidator;a&&m(a)&&a.message&&(e[i.attr("validDate-msg")]=a.message)}}function X(e,t){var n=t.model.fields[t.field].validation;if(n){var a=n.dateCompare;a&&m(a)&&a.message&&(e[i.attr("dateCompare-msg")]=a.message)}}function J(e,t,n,a){var o,r,s,l,d;for(r=0,s=(e=e||[]).length;r<s;r++)l=(o=e[r]).start?o.start.getTimezoneOffset():null,d=o.start?o.end.getTimezoneOffset():null,a?o.startTimezone||o.endTimezone?n?(o.start=i.timezone.convert(o.start,o.startTimezone||o.endTimezone,n),o.end=i.timezone.convert(o.end,o.endTimezone||o.startTimezone,n),o.start=i.timezone[t](o.start,n),o.end=i.timezone[t](o.end,n)):(o.start=i.timezone[t](o.start,o.startTimezone||o.endTimezone),o.end=i.timezone[t](o.end,o.endTimezone||o.startTimezone)):n&&(o.start=i.timezone[t](o.start,n),o.end=i.timezone[t](o.end,n)):o.startTimezone||o.endTimezone?(o.start=i.timezone[t](o.start,o.startTimezone||o.endTimezone),o.end=i.timezone[t](o.end,o.endTimezone||o.startTimezone),n&&(o.start=i.timezone.convert(o.start,o.startTimezone||o.endTimezone,n),o.end=i.timezone.convert(o.end,o.endTimezone||o.startTimezone,n))):n&&(o.start=i.timezone[t](o.start,n),o.end=i.timezone[t](o.end,n)),a&&delete o.uid,"remove"===t&&o.start&&l&&l!==o.start.getTimezoneOffset()&&(o.start=new Date(o.start.getTime()+6e4*(l-o.start.getTimezoneOffset()))),"remove"===t&&o.end&&d&&d!==o.end.getTimezoneOffset()&&(o.end=new Date(o.end.getTime()+6e4*(d-o.end.getTimezoneOffset())));return e}function Z(e,t){for(var i,n=e.length,a=0;a<n;a++)if((i=e[a]).uid===t)return i}var G=i.Class.extend({init:function(t,n){var a=t.timezone;this.reader=n,n.model&&(this.model=n.model),this.timezone=a,this.data=function(e,t){return function(i){return J(i=e(i),"apply",t),i||[]}}(e.proxy(this.data,this),a),this.serialize=function(e,t){return function(n){return n&&("[object Array]"===k.call(n)||n instanceof i.data.ObservableArray||(n=[n])),J(n,"remove",t,!0),(n=e(n))||[]}}(e.proxy(this.serialize,this),a)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}});function ee(e,t,n){return n?i.timezone.convert(e,t,n):i.timezone.remove(e,t)}function te(e){if(e.filter("[name=start]").length&&e.filter("[title=Start]").length||e.filter("[name=end]").length&&e.filter("[title=End]").length||e.filter(".k-recur-until").length){var t=i.widgetInstance(e,i.ui);return t?!!i.parseDate(e.val(),t.options.format)&&t.value():!!i.parseDate(e.val())}return!0}var ie=i.data.Model.define({init:function(e){var t=this;i.data.Model.fn.init.call(t,e),t._defaultId=t.defaults[t.idField]},_time:function(e){var t=this[e],n="_"+e+"Time";return this[n]?this[n]-i.date.toUtcTime(i.date.getDate(t)):r(t)},_date:function(e){var t="_"+e+"Time";return this[t]?this[t]-this._time(e):i.date.getDate(this[e])},clone:function(t,i){var n=this.uid,a=new this.constructor(e.extend({},this.toJSON(),t));return i||(a.uid=n),a},duration:function(){var e=this.end,t=this.start,n=(e.getTimezoneOffset()-t.getTimezoneOffset())*i.date.MS_PER_MINUTE;return e-t-n},expand:function(e,t,i){return s?s.expand(this,e,t,i):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this._startTime&&this.set("_startTime",i.date.toUtcTime(this.start)),this._endTime&&this.set("_endTime",i.date.toUtcTime(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=i.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return(t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId}))[this.idField]=this.defaults[this.idField],this.clone(t,!0)},toJSON:function(){var e=i.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e._startTime,delete e._endTime,e},shouldSerialize:function(e){return i.data.Model.fn.shouldSerialize.call(this,e)&&"_defaultId"!==e},set:function(e,t){var n=this.isAllDay||!1;if(i.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=n){var o=i.date.getDate(this.start),r=new Date(this.end),s=i.date.getMilliseconds(r);0===s&&t&&(s=a),this.set("start",o),!0===t?(i.date.setTime(r,-s),r<o&&(r=o)):i.date.setTime(r,a-s),this.set("end",r)}},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0,validDate:{value:te}}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,validDate:{value:te},dateCompare:{value:function(e){if(e.filter("[name=end]").length){var t=e.closest(".k-scheduler-edit-form"),n=t.find("[name=start]:visible"),a=t.find("[name=end]:visible");if(a[0]&&n[0]){var o,r,s=i.widgetInstance(n,i.ui),l=i.widgetInstance(a,i.ui),d=t.data("kendoEditable"),c=d?d.options.model:null;if(s&&l?(o=s.value(),r=l.value()):(o=i.parseDate(n.val()),r=i.parseDate(a.val())),o&&r){if(c){var u=n.attr(i.attr("timezone")),p=c.startTimezone,f=c.endTimezone;p=p||f,f=f||p,p&&(o=ee(o,p,u),r=ee(r,f,u))}return o<=r}}}return!0}}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string",validation:{validDate:{value:te},untilDateCompare:{value:function(e){var t,n,a,o;return!(e.filter(".k-recur-until").length&&(t=i.widgetInstance(e,i.ui).value(),(n=e.closest(".k-scheduler-edit-form").find("[name=start]:visible"))[0]&&(a=(o=i.widgetInstance(n,i.ui))?o.value():i.parseDate(n.val()))&&t))||a<=t}}}},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),ne=h.extend({init:function(e){h.fn.init.call(this,g(!0,{},{schema:{modelBase:ie,model:ie}},e)),this.reader=new G(this.options.schema,this.reader)},expand:function(e,t){var n,o=this.view(),r={};return e&&t&&(n=t.getTimezoneOffset(),(t=new Date(t.getTime()+a-1)).getTimezoneOffset()!==n&&(t=i.timezone.apply(t,n)),r={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+a-1)},{field:"end",operator:"gte",value:e}]}]},o=new i.data.Query(function(e,t,i,n){for(var a=e.length,o=[],r=0;r<a;r++)o=o.concat(e[r].expand(t,i,n));return o}(o,e,t,this.reader.timezone)).filter(r).toArray()),o},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),h.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof ie)){var i=t;(t=this._createNewModel()).accept(i)}return(!this._pushCreated&&t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),h.fn.insert.call(this,e,t)}},pushCreate:function(e){this._pushCreated=!0,h.fn.pushCreate.call(this,e),this._pushCreated=!1},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),h.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),i=t.shift(),n=e.id;i;)i.recurrenceId===n&&h.fn.remove.call(this,i),i=t.shift();e.set(L,"")},_removeExceptionDate:function(e){if(e.recurrenceId){var t=this.get(e.recurrenceId);if(t){var i=e.defaults.start,n=new RegExp("(\\,?)"+s.toExceptionString(i,this.reader.timezone)),a=(t.recurrenceException||"").replace(N,F).replace(/\,$/,"");n.test(a)||(i=e.start,n=new RegExp("(\\,?)"+s.toExceptionString(i,this.reader.timezone))),t.set(L,a.replace(n,""))}}},_addExceptionDate:function(e){var t=e.start,i=this.reader.timezone,n=this.get(e.recurrenceId),a=(n.recurrenceException||"").replace(N,F).replace(/\,$/,"");if(!s.isException(a,t,i)){var o=s.toExceptionString(t,i);e.defaults.start=t,n.set(L,a+(a&&o?F:"")+o)}}});ne.create=function(e){(b(e)||e instanceof i.data.ObservableArray)&&(e={data:e});var t=e||{},n=t.data;if(t.data=n,!(t instanceof ne)&&t instanceof i.data.DataSource)throw new Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof ne?t:new ne(t)},g(!0,i.data,{SchedulerDataSource:ne,SchedulerDataReader:G,SchedulerEvent:ie});var ae={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-i-close",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}};function oe(t,n){var a,o,r=(t.fields||t)[n],s=["url","email","number","date","boolean"],l=r?r.validation:{},d=i.attr("type"),c=e.inArray,u={};for(a in l)o=l[a],c(a,s)>=0?u[d]=a:i.isFunction(o)||(u[a]=m(o)?o.value||a:o),u[i.attr(a+"-msg")]=o.message;return u}function re(t){var i=oe(t.model,t.field);return function(t,n){e('<textarea name="description" class="k-textarea" title="'+n.title+'"/>').attr(i).appendTo(t)}}function se(e,t){var n=e.end.getTime()-e.start.getTime(),a=new Date(e.start.getTime());i.date.setTime(a,t);var o=new Date(a.getTime());return i.date.setTime(o,n,!0),{start:a,end:o}}var le={mobile:{dateRange:function(t,n){var a={name:n.field,title:n.title},o=n.model.isAllDay,r=i.attr("validate")+"='"+!o+"'",s=i.attr("validate")+"='"+o+"'";Q(a,n),j(a,n),X(a,n),e('<input type="datetime-local" required '+i.attr("type")+'="datetime-local" '+i.attr("bind")+'="value:'+n.field+', invisible:isAllDay" '+r+"/>").attr(a).appendTo(t),e('<input type="date" required '+i.attr("type")+'="date" '+i.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+s+"/>").attr(a).appendTo(t),e("<span "+i.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},timezonePopUp:function(t,i){var n=Y(i.model,i.messages.noTimezone);e('<span class="k-timezone-label"></span>').text(n).appendTo(t),e('<span class="k-icon k-i-arrow-chevron-right"></span>').appendTo(t),t.closest("li.k-item label").click(i.click)},timezone:function(t,n){e('<div class="k-mobiletimezoneeditor" '+i.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoMobileTimezoneEditor({optionLabel:n.noTimezone})},recurrence:function(t,n){e("<div "+i.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoMobileRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages,pane:n.pane,value:n.model[n.field]})},description:re,multipleResources:function(t,n){var a=oe(n,t.field);return function(n){for(var o="",r=t.dataSource.view(),s=0,l=r.length;s<l;s++)o+=i.format('<option value="{0}">{1}</option>',i.getter(t.dataValueField)(r[s]),i.getter(t.dataTextField)(r[s]));e(i.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>',i.ns,t.field,o,t.valuePrimitive)).appendTo(n).attr(a)}},resources:function(t,n){var a=oe(n,t.field);return function(n){for(var o="",r=t.dataSource.view(),s=0,l=r.length;s<l;s++)o+=i.format('<option value="{0}">{1}</option>',i.getter(t.dataValueField)(r[s]),i.getter(t.dataTextField)(r[s]));e(i.format('<select data-{0}bind="value:{1}">{2}</select>',i.ns,t.field,o,t.valuePrimitive)).appendTo(n).attr(a)}},isAllDay:function(t,n){e('<input type="checkbox" data-role="switch"'+i.attr("bind")+'="value:'+n.field+'" />').appendTo(t)}},desktop:{dateRange:function(t,n){var a={name:n.field,title:n.title},o=n.model.isAllDay,r=i.attr("validate")+"='"+!o+"' ",s=i.attr("validate")+"='"+o+"' ";Q(a,n),j(a,n),X(a,n),e('<input type="text" required '+i.attr("type")+'="date" '+i.attr("role")+'="datetimepicker" '+i.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+r+"/>").attr(a).appendTo(t),e('<input type="text" required '+i.attr("type")+'="date" '+i.attr("role")+'="datepicker" '+i.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+s+"/>").attr(a).appendTo(t),e("<span "+i.attr("bind")+'="text: '+n.field+'Timezone"></span>').appendTo(t),"end"===n.field&&e("<span "+i.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+i.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},timezonePopUp:function(t,i){e('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+i.messages.timezoneEditorButton+"</a>").click(i.click).appendTo(t)},timezone:function(n,a){var o=a.visible||a.visible===t;e("<div "+i.attr("bind")+'="value:'+a.field+'" />').attr({name:a.field}).toggle(o).appendTo(n).kendoTimezoneEditor({optionLabel:a.noTimezone,title:a.title})},recurrence:function(t,n){e("<div "+i.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages})},description:re,multipleResources:function(t,n){var a=oe(n,t.field);return function(n){e(i.format('<select data-{0}bind="value:{1}">',i.ns,t.field)).appendTo(n).attr(a).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:i.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:i.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}},resources:function(t,n){var a=oe(n,t.field);return function(o){e(i.format('<select data-{0}bind="value:{1}" title="'+n.title+'">',i.ns,t.field)).appendTo(o).attr(a).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:i.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}}},de=i.Observable.extend({init:function(e,t){i.Observable.fn.init.call(this),this.element=e,this.options=g(!0,{},this.options,t),this.createButton=this.options.createButton,this.toggleDateValidationHandler=_(this._toggleDateValidation,this)},_toggleDateValidation:function(t){if("isAllDay"==t.field){var n,a,o,r=this.container,s=this.editable.options.model.isAllDay,l=i.attr("bind");r.find("["+l+"*=end],["+l+"*=start]").each((function(){n=e(this),O.test(n.attr(l))&&(a=n.is("["+i.attr("role")+"=datetimepicker],[type*=datetime]"),o=s!==a,n.attr(i.attr("validate"),o))}))}},fields:function(e,t){var n=this,a=n.options.messages,o=n.options.timezone,r=[{field:"title",title:a.editor.title},{field:"start",title:a.editor.start,editor:e.dateRange,timezone:o},{field:"end",title:a.editor.end,editor:e.dateRange,timezone:o},{field:"isAllDay",title:a.editor.allDayEvent,editor:e.isAllDay}];i.timezone.windows_zones&&(r.push({field:"timezone",title:a.editor.timezone,editor:e.timezonePopUp,click:function(e){e.preventDefault(),n._initTimezoneEditor(t,this)},messages:a.editor,model:t}),r.push({field:"startTimezone",title:a.editor.startTimezone,editor:e.timezone,noTimezone:a.editor.noTimezone}),r.push({field:"endTimezone",title:a.editor.endTimezone,editor:e.timezone,noTimezone:a.editor.noTimezone})),t.recurrenceId||r.push({field:"recurrenceRule",title:a.editor.repeat,editor:e.recurrence,timezone:o,messages:a.recurrenceEditor,pane:this.pane}),"description"in t&&r.push({field:"description",title:a.editor.description,editor:e.description({model:t,field:"description"})});for(var s=0;s<this.options.resources.length;s++){var l=this.options.resources[s];r.push({field:l.field,title:l.title,editor:l.multiple?e.multipleResources(l,t):e.resources(l,t)})}return r},end:function(){return this.editable.end()},_buildDesktopEditTemplate:function(e,t,n){for(var a=this.options.messages,o=g({},i.Template,this.options.templateSettings),r=o.paramName,s="",l=0,d=t.length;l<d;l++){var c=t[l];if("startTimezone"===c.field&&(s+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',s+='<div class="k-edit-form-container">',s+='<div class="k-edit-label"></div>',s+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+a.editor.separateTimezones+"</label></div>"),s+='<div class="k-edit-label"><label for="'+c.field+'">'+(c.title||c.field||"")+"</label></div>",!e.editable||e.editable(c.field))n.push(c),s+="<div "+i.attr("container-for")+'="'+c.field+'" class="k-edit-field"></div>';else{var u="#:";c.field?u+=(c=i.expr(c.field,r))+"==null?'':"+c:u+="''",u+="#",s+='<div class="k-edit-field">'+(u=i.template(u,o))(e)+"</div>"}"endTimezone"===c.field&&(s+=this._createEndTimezoneButton())}return s},_buildMobileEditTemplate:function(e,t,n){var a=this.options.messages,o=g({},i.Template,this.options.templateSettings),r=o.paramName,s="";s+='<ul class="k-listgroup k-listgroup-flush">';for(var l=0,d=t.length;l<d;l++){var c=t[l];if("timezone"!==c.field&&"recurrenceRule"!==c.field||(s+='</ul><ul class="k-listgroup k-listgroup-flush">'),"startTimezone"===c.field&&(s+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',s+='<ul class="k-listgroup k-listgroup-flush">',s+='<li class="k-item k-listgroup-item">',s+='<label class="k-label k-listgroup-form-row">',s+='<span class="k-item-title k-listgroup-form-row">'+a.editor.separateTimezones+"</span>",s+='<span class="k-listgroup-form-field-wrapper">',s+='<input class="k-timezone-toggle" data-role="switch" type="checkbox" />',s+="</span>",s+="</label>",s+="</li>"),!e.editable||e.editable(c.field))s+='<li class="k-item k-listgroup-item">',"timezone"===c.field?s+='<label class="k-label k-listgroup-form-row" data-bind="css: { k-state-disabled: isAllDay }">':s+='<label class="k-label k-listgroup-form-row">',s+='<span class="k-item-title k-listgroup-form-field-label">'+(c.title||c.field||"")+"</span>",n.push(c),s+='<div class="k-listgroup-form-field-wrapper" '+i.attr("container-for")+'="'+c.field+'"></div>',s+="</label></li>";else{var u="#:";s+='<li class="k-item k-listgroup-item">',s+='<label class="k-label k-no-click k-listgroup-form-row">',s+='<span class="k-item-title k-listgroup-form-field-label">'+(c.title||c.field||"")+"</span>",c.field?u+=(c=i.expr(c.field,r))+"==null?'':"+c:u+="''",u+="#",s+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+(u=i.template(u,o))(e)+"</span>",s+="</label></li>"}"recurrenceRule"===c.field&&(s+='</ul><ul class="k-listgroup k-listgroup-flush">'),"endTimezone"===c.field&&(s+="</ul></div>")}return s+"</ul>"},_buildEditTemplate:function(e,t,n,a){var o=g({},i.Template,this.options.templateSettings),r=this.options.editable.template,s="";return r?(typeof r===p&&(r=i.unescape(r)),s+=i.template(r,o)(e)):s+=a?'<div data-role="content">'+this._buildMobileEditTemplate(e,t,n)+"</div>":this._buildDesktopEditTemplate(e,t,n),s},_createEndTimezoneButton:function(){return"</ul></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone}}),ce=de.extend({init:function(){de.fn.init.apply(this,arguments),this.pane=i.Pane.wrap(this.element,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}}),this.pane.element.parent().css("height",this.options.height),this.view=this.pane.view()},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close(),this.unbind(),this.pane.destroy()},_initTimezoneEditor:function(t){var i=this,n=i.pane,a=i.options.messages,o=i.timezoneView,r=o?o.content.find(".k-scheduler-timezones"):i.container.find(".k-scheduler-timezones"),s=r.find("input.k-timezone-toggle").data("kendoSwitch"),l=r.find("li.k-item:not(.k-zonepicker):last");if(i._startTimezone=t.startTimezone||"",i._endTimezone=t.endTimezone||"",!o){var d='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form"><div data-role="header" class="k-header"><a href="\\#" class="k-header-cancel k-scheduler-cancel k-link" title="'+a.cancel+'"aria-label="'+a.cancel+'"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+a.editor.timezoneTitle+'<a href="\\#" class="k-header-done k-scheduler-update k-link" title="'+a.save+'" aria-label="'+a.save+'"><span class="k-icon k-i-check"></span></a></div><div data-role="content"></div>';this.timezoneView=o=n.append(d),o.contentElement.append(r.show()),o.element.on(y+w,".k-scheduler-cancel, .k-scheduler-update",(function(o){o.preventDefault(),o.stopPropagation(),e(this).hasClass("k-scheduler-cancel")&&i._revertTimezones(t);var r=i._editPane,s=Y(t,a.editor.noTimezone);r.content.find(".k-timezone-label").text(s),n.navigate(r,i.options.animations.right)})),s.bind("change",(function(e){l.toggle(e.checked),t.set("endTimezone","")})),t.bind("change",(function(e){if("startTimezone"===e.field){var i=t.startTimezone;s.enable(i),i||(l.hide(),t.set("endTimezone",""),s.value(!1))}}))}s.value(!!t.endTimezone),s.enable(!!t.startTimezone),t.endTimezone?l.show():l.hide(),n.navigate(o,i.options.animations.left)},showDialog:function(t){var i=t.buttons.map((function(e){return{text:e.text,action:e.click}}));i.push({text:this.options.messages.cancel,primary:!0}),e("<div />").appendTo(document.body).kendoDialog({close:function(){this.destroy()},modal:{preventScroll:!0},closable:!1,title:!1,content:t.text,actions:i})},editEvent:function(t){var n=this.pane,a="",o=this.options.messages,r=o.save,s=o.destroy,l=o.cancel,d=o.editor.editorTitle,c=o.resetSeries;a+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form"'+i.attr("uid")+'="'+t.uid+'"><div data-role="header" class="k-header"><a href="\\#" class="k-header-cancel k-scheduler-cancel k-link" title="'+l+'"aria-label="'+l+'"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+d+'<a href="\\#" class="k-header-done k-scheduler-update k-link" title="'+r+'" aria-label="'+r+'"><span class="k-icon k-i-check"></span></a></div>';var u=this.fields(le.mobile,t),p=this,f=[];a+=this._buildEditTemplate(t,u,f,!0),a+="</div>";var v=n.append(a);if(!t.isNew()&&this.options.editable&&!1!==this.options.editable.destroy&&t.isRecurrenceHead()&&t.recurrenceException){var h='<ul class="k-edit-buttons k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><span class="k-scheduler-resetSeries k-link k-label" aria-label="'+c+'">'+c+"</span></li></ul>";v.contentElement.append(h)}if(!t.isNew()&&this.options.editable&&!1!==this.options.editable.destroy){var m='<ul class="k-edit-buttons k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><span class="k-scheduler-delete k-link k-label" aria-label="'+s+'">'+s+"</span></li></ul>";v.contentElement.append(m)}this._editPane=v;var g=this.container=v.element;return this.editable=g.kendoEditable({fields:f,model:t,clearContainer:!1,target:p.options.target,validateOnBlur:!0}).data("kendoEditable"),this.trigger("edit",{container:g,model:t})?this.trigger("cancel",{container:g,model:t}):(g.on(y+w,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries",(function(i){i.preventDefault(),i.stopPropagation();var a=e(this);if(a.hasClass("k-scheduler-edit"))n.navigate(this._editPane,p.options.animations.right);else{var o="cancel";a.hasClass("k-scheduler-update")?o="save":a.hasClass("k-scheduler-delete")?o="remove":a.hasClass("k-scheduler-resetSeries")&&(o=I),p.trigger(o,{container:g,model:t})}})),n.navigate(v,p.options.animations.left),t.bind("change",p.toggleDateValidationHandler)),this.editable},_views:function(){return this.pane.element.find(i.roleSelector("view")).not(this.view.element)},close:function(){if(this.container){this.pane.navigate("",this.options.animations.right);for(var e,t=this._views(),i=0,n=t.length;i<n;i++)(e=t.eq(i).data("kendoView"))&&e.purge();t.remove(),this.container=null,this.editable&&(this.editable.options.model.unbind("change",this.toggleDateValidationHandler),this.editable.destroy(),this.editable=null),this.timezoneView=null}}}),ue=de.extend({destroy:function(){this.close(),this.unbind()},editEvent:function(t){var n,a=this,o=a.options.editable,r="<div "+i.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',s=a.options.messages,l=s.save,d=s.cancel,c=s.destroy,u=s.resetSeries,p=this.fields(le.desktop,t),f=[];r+=this._buildEditTemplate(t,p,f,!1);var v=m(o)?o.window:{};r+='<div class="k-edit-buttons k-state-default">',r+=this.createButton({name:"update",text:l,attr:n})+this.createButton({name:"canceledit",text:d,attr:n}),!t.isNew()&&!1!==o.destroy&&t.isRecurrenceHead()&&t.recurrenceException&&(r+=this.createButton({name:"resetSeries",text:u,attr:n})),t.isNew()&&!t.isRecurring()||!1===o.destroy||(r+=this.createButton({name:"delete",text:c,attr:n})),r+="</div></div></div>";var h=this.container=e(r).appendTo(a.element).eq(0).kendoWindow(g({modal:!0,resizable:!1,draggable:!0,title:s.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&a.trigger(P,{container:h,model:t})&&e.preventDefault()}},v));return a.editable=h.kendoEditable({fields:f,model:t,clearContainer:!1,validateOnBlur:!0,target:a.options.target}).data("kendoEditable"),a.trigger(B,{container:h,model:t})?a.trigger(P,{container:h,model:t}):(h.data("kendoWindow").center().open(),h.on(y+w,"button.k-scheduler-cancel",(function(e){e.preventDefault(),e.stopPropagation(),a.trigger(P,{container:h,model:t})})),h.on(y+w,"button.k-scheduler-update",(function(e){e.preventDefault(),e.stopPropagation(),a.trigger("save",{container:h,model:t})})),h.on(y+w,"button.k-scheduler-delete",(function(e){e.preventDefault(),e.stopPropagation(),a.trigger(M,{container:h,model:t})})),h.on(y+w,"button.k-scheduler-resetSeries",(function(e){e.preventDefault(),e.stopPropagation(),a.trigger(I,{container:h,model:t})})),i.cycleForm(h),t.bind("change",a.toggleDateValidationHandler)),a.editable},close:function(){var e=this,t=function(){e.editable&&(e.editable.options.model.unbind("change",e.toggleDateValidationHandler),e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};e.editable?(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e.container.is(":visible")?e.container.data("kendoWindow").bind("deactivate",t).close():t()):t()},_createEndTimezoneButton:function(){var e=this.options.messages,t="";return t+='<div class="k-edit-buttons k-state-default">',(t+=this.createButton({name:"savetimezone",text:e.save})+this.createButton({name:"canceltimezone",text:e.cancel}))+"</div></div></div>"},showDialog:function(t){var n=i.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text);n+='<div class="k-edit-buttons k-state-default">';for(var a=0;a<t.buttons.length;a++)n+=this.createButton(t.buttons[a]);n+="</div></div></div>";var o=this.element;this.popup&&this.popup.destroy();var r=this.popup=e(n).appendTo(o).eq(0).on(y,".k-button",(function(i){i.preventDefault(),r.close();var n=e(i.currentTarget).index();t.buttons[n].click()})).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),o.focus()}}).getKendoWindow();r.center().open()},_initTimezoneEditor:function(e,t){var i,n=this,a=n.container.find(".k-scheduler-timezones"),o=a.find("input.k-timezone-toggle"),r=a.find(".k-edit-label:last").add(a.find(".k-edit-field:last")),s=a.find(".k-scheduler-savetimezone"),l=a.find(".k-scheduler-canceltimezone"),d=n._timezonePopup,c=function(t){if("startTimezone"===t.field){var i=e.startTimezone;o.prop("disabled",!i),i||(r.hide(),e.set("endTimezone",""),o.prop("checked",!1))}};n._startTimezone=e.startTimezone,n._endTimezone=e.endTimezone,d||(n._timezonePopup=d=a.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:n.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(i){e.unbind("change",c),i.userTriggered&&n._revertTimezones(e),t&&t.focus()}}),o.click((function(){r.toggle(o.prop("checked")),e.set("endTimezone","")})),s.click((function(e){e.preventDefault(),i.close()})),l.click((function(t){t.preventDefault(),n._revertTimezones(e),i.close()})),e.bind("change",c)),o.prop("checked",e.endTimezone).prop("disabled",!e.startTimezone),e.endTimezone?r.show():r.hide(),(i=d.data("kendoWindow")).center().open()}}),pe=u.extend({init:function(t,n){var a=this;c.fn.init.call(a,t,n),a.options.views&&a.options.views.length||(a.options.views=["day","week"]),a.resources=[],a._initModel(),a._wrapper(),a._views(),a._toolbar(),a._dataSource(),a._resources(),a._resizeHandler=function(){a.resize()},a.wrapper.on(z+w+" selectstart"+w,(function(t){e(t.target).is(":kendoFocusable")||t.preventDefault()})),a.options.editable&&!1!==a.options.editable.resize&&a._resizable(),a._movable(),a._bindResize(),a.options.messages&&a.options.messages.recurrence&&(s.options=a.options.messages.recurrence),a._selectable(),a._touchHandlers(),a._ariaId=i.guid(),a._createEditor()},_bindResize:function(){e(window).on("resize"+w,this._resizeHandler)},_unbindResize:function(){e(window).off("resize"+w,this._resizeHandler)},dataItems:function(){var i,n,a=this.items(),o=this._data,r=e.map(a,(function(t){return e(t).attr("data-uid")})),s={},l=r.length;for(i=0;i<l;i++)s[r[i]]=null;var d=o.length;for(i=0;i<d;i++){var c=o[i];s[c.uid]!==t&&(s[c.uid]=c)}var u=[];for(n in s)u.push(s[n]);return u},_isMobile:function(){var e=this.options;return!0===e.mobile&&i.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isTouch:function(e){return/touch/.test(e.type)||e.originalEvent&&/touch/.test(e.originalEvent.pointerType)},_isInverseColor:function(e){return e.hasClass("k-event-inverse")},_groupsByResource:function(e,t,n,a,o){n||(n=[]);var r=e[0];if(r){for(var s,l=r.dataSource.view(),d=0,c=0;c<l.length;c++){var u=i.getter(r.dataValueField)(l[c]),p=t+d+c;(s=this._groupsByResource(e.slice(1),p,n,u,r.field))[r.field]=u,d=s.groupIndex,o&&a&&(s[o]=a),1===e.length&&(s.groupIndex=t+c,n.push(s))}return s}return{}},data:function(){return this._data},select:function(n){var a,r=this,s=r.view(),l=r._selection,d=s.groups;if(n===t){var c,u=s._selectedSlots;return l?(l&&l.events&&(c=r._selectedEvents()),{start:l.start,end:l.end,events:c,slots:u,resources:s._resourceBySlot(l)}):[]}if(!n)return r._selection=null,r._old=null,void s.clearSelection();if(e.isArray(n)&&(n={events:n.splice(0)}),n.resources){var p,f=[],v=[];for(p in s.groupedResources&&r._groupsByResource(s.groupedResources,0,v),n.resources)f.push({field:p,operator:"eq",value:n.resources[p]});a=new i.data.Query(v).filter(f).toArray()}if(n.events&&n.events.length)return r._selectEvents(n.events,a),void r._select();if(d&&n.start&&n.end){var h,m,g=o(s._startDate),_=i.date.addDays(o(s._endDate),1);n.start<_&&g<=n.end&&((h=a&&a.length?d[a[0].groupIndex]:d[0]).timeSlotCollectionCount()||(n.isAllDay=!0),(m=h.ranges(n.start,n.end,n.isAllDay,!1)).length&&(r._selection={start:i.timezone.toLocalDate(m[0].start.start),end:i.timezone.toLocalDate(m[m.length-1].end.end),groupIndex:m[0].start.groupIndex,index:m[0].start.index,isAllDay:m[0].start.isDaySlot,events:[]},r._select()))}},_selectEvents:function(e,t){var n,a=this,o=a.view(),r=o.groups,s=e.length,l=t&&t.length,d=a._ctrlKey;for(a._ctrlKey=!0,n=0;n<s;n++)if(r&&l){for(var c=r[t[0].groupIndex],u=[],p=c.timeSlotCollectionCount(),f=c.daySlotCollectionCount(),v=0;v<p;v++)u=u.concat(c.getTimeSlotCollection(v).events());for(var h=0;h<f;h++)u=u.concat(c.getDaySlotCollection(h).events());(u=new i.data.Query(u).filter({field:"element[0].getAttribute('data-uid')",operator:"eq",value:e[n]}).toArray())[0]&&a._createSelection(u[0].element)}else{var m=o.element.find(i.format(".k-event[data-uid={0}], .k-task[data-uid={0}]",e[n]));m.length&&a._createSelection(m[0])}a._ctrlKey=d},_touchHandlers:function(){var t,n,a,o,r,s=this,l=s.wrapper,d=e.proxy(s._touchMove,s);l.on(T+w,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",(function(e){var i=s.wrapper.find(".k-scheduler-content");s._isTouch(e)&&(i.stop(!0,!1),s._touchPosX=t=s._tapPosition(e,"X"),s._touchPosY=n=s._tapPosition(e,"Y"),s._userTouched=!0,s.view()._scrolling=!1,r=Date.now(),l.on(D+w,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",d))})),l.on(x+w,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",(function(e){if(s._isTouch(e)){var c=Date.now()-r,u=s.wrapper.find(".k-scheduler-content"),p=-s._amplitude*(3e3/c);a=s._tapPosition(e,"X"),o=s._tapPosition(e,"Y"),s._dragging||(s.options.selectable&&(Math.abs(a-t)<=10||Math.abs(o-n)<=10)&&s._mouseDownSelection(e),!i.support.kineticScrollNeeded&&c<200&&Math.abs(a-t)>10&&u.animate({scrollTop:u[0].scrollTop+p}),l.off(D+w,".k-scheduler-header-all-day td, .k-scheduler-content td",d))}}))},_selectable:function(){var t=this,i=t.wrapper;if(t.options.selectable){t._tabindex(),i.on(z+w,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",(function(e){t._isTouch(e)||t._mouseDownSelection(e)}));var n=e.proxy(t._mouseMove,t);i.on(z+w,".k-scheduler-header-all-day td, .k-scheduler-content td",(function(e){var a=e.which,o=e.button,r=a&&3===a||o&&2==o;t._isTouch(e)||r||i.on(S+w,".k-scheduler-header-all-day td, .k-scheduler-content td",n)})),i.on("mouseup"+w+" mousecancel"+w,(function(){i.off(S+w,".k-scheduler-header-all-day td, .k-scheduler-content td",n)})),i.on("focus"+w,(function(){t._selection||t._userTouched||t._selectFirstSlot(),t._select()})),i.on("focusout"+w,(function(i){t._ctrlKey=t._shiftKey=!1,e(i.relatedTarget).closest(H).length||t.toolbar.find(H).removeClass("k-state-expanded")})),i.on("keydown"+w,_(t._keydown,t)),i.on("keyup"+w,(function(e){t._ctrlKey=e.ctrlKey,t._shiftKey=e.shiftKey}))}},_mouseDownSelection:function(e){var t=e.which,n=e.button;t&&3===t||n&&2==n||(e.ctrlKey&&(this._ctrlKey=e.ctrlKey),e.shiftKey&&(this._shiftKey=e.shiftKey),this._createSelection(e.currentTarget)),i._activeElement()!==this.wrapper.get(0)?i.focusElement(this.wrapper):this._select(),this.toolbar&&this.toolbar.find("."+A).removeClass(A)},_selectFirstSlot:function(){this._createSelection(this.wrapper.find(".k-scheduler-content").find("td:first"))},_select:function(){var t=this,n=t.view(),a=t.wrapper,o=n.current(),r=t._selection,s=t._old?t._old.selection:null,l=t._old?t._old.eventsLength:null;if(r&&(o&&(o.removeAttribute("id"),o.removeAttribute("aria-label"),a.removeAttr("aria-activedescendant")),n.select(r),(o=n.current())&&(s!==o||r.events&&l!==r.events.length))){var d,c=e(o).data("uid");if(t._old&&c&&c===e(t._old.selection).data("uid")&&r.events&&t._old.eventsLength===r.events.length)return;var u=r,p=t._selectedEvents(),f=n._selectedSlots;p[0]?(u=p[0]||r,d=i.format(t.options.messages.ariaEventLabel,u.title,u.start,u.start)):d=i.format(t.options.messages.ariaSlotLabel,u.start,u.end),o.setAttribute("id",t._ariaId),o.setAttribute("aria-label",d),a.attr("aria-activedescendant",t._ariaId),t._old={selection:o,eventsLength:p.length},t.trigger("change",{start:r.start,end:r.end,events:p,slots:f,resources:n._resourceBySlot(r)})}},_selectedEvents:function(){for(var e,t=this._selection.events,i=t.length,n=0,a=[];n<i;n++)(e=this.occurrenceByUid(t[n]))&&a.push(e);return a},_tapPosition:function(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]},_touchMove:function(e){var t=this,n=t.wrapper.find(".k-scheduler-content"),a=n[0].scrollHeight>n[0].clientHeight,o=n[0].scrollWidth>n[0].clientWidth,r=t._tapPosition(e,"Y"),s=t._tapPosition(e,"X"),l=n[0].scrollTop-Math.round(r-t._touchPosY),d=n[0].scrollLeft-Math.round(s-t._touchPosX),c=a&&Math.abs(r-t._touchPosY)>10,u=o&&Math.abs(r-t._touchPosY)>10;t._dragging||i.support.kineticScrollNeeded||!t._isTouch(e)||(c||u)&&(t._amplitude=Math.round(r-t._touchPosY),t._touchPosY=r,t._touchPosX=s,n.animate({scrollTop:l,scrollLeft:d},0),t.view()._scrolling=!0)},_mouseMove:function(t){var i=this;clearTimeout(i._moveTimer),i._isTouch(t)||(i._moveTimer=setTimeout((function(){var n=i.view(),a=i._selection;if(a){var o=n.selectionByElement(e(t.currentTarget));if(o&&a.groupIndex===o.groupIndex){var r=o.startDate(),s=o.endDate();r>=a.end?a.backward=!1:s<=a.start&&(a.backward=!0),a.backward?a.start=r:a.end=s,i._select()}}}),5))},_viewByIndex:function(e){var t,i=this.views;for(t in i){if(!e)return t;e--}},_keydown:function(t){var n=this,a=t.keyCode,o=n.view(),r=o.options.editable,s=n._selection,d=e.extend(s),c=16===a||18===a||17===a||91===a||92===a,u=n.toolbar.find("> .k-button,.k-scheduler-navigation > .k-button,.k-nav-current,.k-views-dropdown:visible,.k-scheduler-views > .k-button"),p=n.toolbar.find(H),f=e(t.target).closest(H).length||n.toolbar.find(".k-scheduler-views .k-state-focused").length,v=p.children().index(n.toolbar.find("."+A)),h=i.support.isRtl(n.element),m=e(t.target).is(".k-views-dropdown"),_=h?-1:1;if(-1==v&&(v=p.children().index(n.toolbar.find(".k-state-selected"))),n._ctrlKey=t.ctrlKey,n._shiftKey=t.shiftKey,a===l.F10)return n._focusToolbar(),void t.preventDefault();if(a===l.TAB){if(n.toolbar.find("."+A).length){var k=u.index(n.toolbar.find("."+A)),b=t.shiftKey?u[k-1]:u[k+1];return n.toolbar.find("."+A).removeClass(A),b?(e(b).addClass(A).focus(),n._focusedView=null,void t.preventDefault()):(n.element.focus(),void t.preventDefault())}}else if(a===l.ENTER||a===l.SPACEBAR){if(f&&n._focusedView&&!n._focusedView.hasClass("k-state-selected")){var w=n._focusedView.data().name;return n.trigger("navigate",{view:w,action:"changeView",date:n.date()})||n.view(w),void t.preventDefault()}if(n.toolbar.find(".k-state-focused:visible").length)return n.toolbar.find(".k-state-focused:visible").click(),void t.preventDefault()}else if(t.altKey&&a===l.DOWN&&!m){if(n.toolbar.find(".k-state-focused:visible").length)return n.toolbar.find(".k-state-focused:visible").click(),void t.preventDefault()}else{if(a===l.RIGHT&&f)return e(n.toolbar.find("."+A)).removeClass(A),n._focusedView=h?e(v-1==0?p.children(":last"):p.children()[v+1*_]):v+1===p.children().length?e(p.children(":first")):e(p.children()[v+1*_]),n._focusedView.focus().addClass(A),void t.preventDefault();if(a===l.LEFT&&f)return e(n.toolbar.find("."+A)).removeClass(A),n._focusedView=h?v+1===p.children().length?e(p.children(":first")):e(p.children()[v-1*_]):e(v-1<0?p.children(":last"):p.children()[v-1*_]),n._focusedView.focus().addClass(A),void t.preventDefault();if(t.altKey&&a===l.DOWN&&n.toolbar.find(".k-nav-current").hasClass(A))return n._showCalendar(),void t.preventDefault();if(t.altKey&&a===l.DOWN&&m)return;if(a===l.ESC&&n.popup&&n.popup.visible())return n.popup.close(),void t.preventDefault()}if(!c){if(!s)return n._selectFirstSlot(),n._select(),void n.element.focus();if(a===l.TAB){if(!o.moveToEvent(s,t.shiftKey))return n._focusToolbar(),void t.preventDefault();n._select(),document.activeElement.getAttribute("id")!==n.element.attr("id")&&n.element.focus(),t.preventDefault()}else if(a===l.ENTER||a===l.SPACEBAR)s.events.length&&r?!1!==r.update&&n.editEvent(s.events[0]):r&&!1!==r.create&&(s.isAllDay&&(s=e.extend({},s,{end:i.date.addDays(s.end,-1)})),t.preventDefault(),n.addEvent(g({},s,o._resourceBySlot(s))));else if(a===l.DELETE&&!1!==r&&!1!==r.destroy)n.removeEvent(s.events[0]);else if(a>=49&&a<=57){var y=n._viewByIndex(a-49);y&&!n.trigger("navigate",{view:y,action:"changeView",date:n.date()})&&n.view(y)}else if(o.move(s,a,t.shiftKey)){if(o.inRange(s))n._select(),e(document.activeElement).blur(),n.toolbar.find("."+A).removeClass(A),n.wrapper.focus();else{var z=n.date().getTime()>s.start.getTime()?"previous":"next";n.trigger("navigate",{view:n._selectedViewName,action:z,date:s.start})?(s.start=d.start,s.end=d.end):n.date(s.start)}t.preventDefault()}n._adjustSelectedDate()}},_focusToolbar:function(){this.toolbar.find(".k-button:first").focus().addClass(A)},_createSelection:function(t){var n,a,o=this._selection;(t=e(t)).is(".k-event")&&(n=t.attr(i.attr("uid")),o&&-1!==o.events.indexOf(n)&&!this._ctrlKey)||(o&&(this._ctrlKey||this._shiftKey)||(o=this._selection={events:[],groupIndex:0}),(a=this.view().selectionByElement(t))&&(o.groupIndex=a.groupIndex||0),n&&(a=Z(this._data,n)),a&&a.uid&&(n=[a.uid]),this._updateSelection(a,n),this._adjustSelectedDate())},_updateSelection:function(e,n,a){var o=this._selection;if(e&&o){var r=this.view();if(e.uid&&(e=r._updateEventForSelection(e)),this._shiftKey&&o.start&&o.end){var s=e.end<o.end;o.end=e.endDate?e.endDate():e.end,s&&r._timeSlotInterval&&i.date.setTime(o.end,-r._timeSlotInterval())}else o.start=e.startDate?e.startDate():e.start,o.end=e.endDate?e.endDate():e.end;if(o.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,null!==a&&a!==t&&(o.groupIndex=a),o.index=e.index,this._ctrlKey){var l=n&&n.length?o.events.indexOf(n[0]):-1;l>-1?o.events.splice(l,1):o.events=o.events.concat(n||[])}else o.events=n||[]}},options:{name:"Scheduler",date:W,editable:!0,autoBind:!0,snap:!0,mobile:!1,timezone:"",allDaySlot:!0,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,workWeekStart:1,workWeekEnd:5,workDays:null,showWorkHours:!1,startTime:W,endTime:W,currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},footer:{},messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",resetSeries:"Reset Series",deleteWindowTitle:"Delete event",next:"Next",previous:"Previous",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",search:"Search...",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",resetSeriesWindowTitle:"Reset Series",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editable:{confirmation:"Are you sure you want to delete this event?"},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:"Timezone",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],orientation:"horizontal"},views:[],selectable:!1},events:[M,B,P,V,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate","change"],destroy:function(){var t=this;if(c.fn.destroy.call(t),t.dataSource&&(t.dataSource.unbind(E,t._refreshHandler),t.dataSource.unbind(R,t._progressHandler),t.dataSource.unbind(C,t._errorHandler)),t._resourceRefreshHandler)for(var n=0;n<t.resources.length;n++){var a=t.resources[n].dataSource;a.unbind(E,t._resourceRefreshHandler),a.unbind(R,t._resourceProgressHandler),a.unbind(C,t._resourceErrorHandler)}t.calendar&&(t.calendar.destroy(),t.popup.destroy()),t.view()&&t.view().destroy(),t._editor&&t._editor.destroy(),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),t.element.add(t.wrapper).add(t.toolbar).add(t.popup).off(w),clearTimeout(t._moveTimer),t._model=null,t.toolbar=null,t.element=null,e(window).off("resize"+w,t._resizeHandler),i.destroy(t.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch?e.fetch():b(e)&&this.view(this._selectedView)},items:function(){var e=this.wrapper.find(".k-scheduler-content"),t=this.view();return t&&"agenda"===t.options.name?e.find(".k-task"):e.find(".k-event").add(this.wrapper.find(".k-scheduler-header-wrap").find(".k-scheduler-header-all-day").siblings())},_movable:function(){var t,n,a,o,r,s,l,d,c,u=this,p=0,f=[],v=[],h=u._isMobile(),m=u.options.editable&&!1!==u.options.editable.move,g=u.options.editable&&!1!==u.options.editable.resize;(m||g&&h)&&(u._dragging=!1,h&&i.support.mobileOS.android&&(p=5),u._moveDraggable=new i.ui.Draggable(u.element,{distance:p,filter:".k-event",ignore:".k-resize-handle",holdToDrag:h,autoScroll:!0}),m&&u._moveDraggable.bind("dragstart",(function(e){var r=u.view(),p=e.currentTarget,v=u._isTouch(e);if(u._dragging=!0,!r.options.editable||!1===r.options.editable.move)return u._dragging=!1,void e.preventDefault();if(v&&!p.hasClass("k-event-active"))return u._dragging=!1,u.element.find(".k-event-active").removeClass("k-event-active"),void e.preventDefault();if(s=u.occurrenceByUid(p.attr(i.attr("uid"))),l=s.clone(),s.clone(),l.update(r._eventOptionsForMove(l)),l.inverseColor=u._isInverseColor(p),f=[],u._selection)for(var h=u._selection.events,m=0;m<h.length;m++){var g=u.occurrenceByUid(h[m]).clone(),_=this.element.find('div.k-event[data-uid="'+g.uid+'"]').eq(0);g.update(r._eventOptionsForMove(g)),_.length&&(g.inverseColor=u._isInverseColor(_)),f.push(g)}else f.push(l);t=r._slotByPosition(e.x.startLocation,e.y.startLocation),a=r._resourceBySlot(t),c=o=t.startOffset(e.x.startLocation,e.y.startLocation,u.options.snap),n=t,d=t,t&&!u.trigger("moveStart",{event:s})||e.preventDefault()})).bind("drag",(function(a){var p,h,m,g=u.view(),_=g._slotByPosition(a.x.location,a.y.location);if(_){if(r=_.startOffset(a.x.location,a.y.location,u.options.snap),_.isDaySlot!==t.isDaySlot)if(_.isDaySlot!==d.isDaySlot){var k=e(t.element).index(),b=e(_.element).parent().children().eq(k);for(t=g._slotByPosition(b.offset().left,b.offset().top),o=t.startOffset(a.x.location,a.y.location,!0),v=f.map((function(e){return e.clone()})),m=0;m<f.length;m++)f[m].isAllDay!=_.isDaySlot&&(f[m].isAllDay=_.isDaySlot,f[m].end=i.date.getDate(f[m].start),f[m].start=i.date.getDate(f[m].start),_.isDaySlot||(i.date.setTime(f[m].start,i.date.getMilliseconds(g.startTime())),i.date.setTime(f[m].end,i.date.getMilliseconds(g.startTime())+g._timeSlotInterval())))}else t=e.extend(!0,{},d),o=c,f=v;for(p=r-o,m=0;m<f.length;m++)g._updateMoveHint(f[m],_.groupIndex,p);if(h=se(l,p),u.trigger("move",{event:s,slot:{element:_.element,start:_.startDate(),end:_.endDate(),isDaySlot:_.isDaySlot},resources:g._resourceBySlot(_),start:h.start,end:h.end}))for(m=0;m<f.length;m++)g._updateMoveHint(f[m],_.groupIndex,p);else n=_}})).bind("dragend",(function(t){u.view()._removeMoveHint();var c=r-o,p=se(l,c),h=p.start,m=p.end;u._dragging=!1;var g=u.view()._resourceBySlot(n);if(!u.trigger("moveEnd",{event:s,slot:{element:n.element,start:n.startDate(),end:n.endDate()},start:h,end:m,resources:g})&&(s.start.getTime()!==h.getTime()||s.end.getTime()!==m.getTime()||d.isDaySlot!==n.isDaySlot||i.stringify(g)!==i.stringify(a))){u._isMultiDrag=f.length>1;for(var _=0;_<f.length;_++){var k=f[_];p=se(k,c);var b=u.view()._eventOptionsForMove(k),w=e.extend({isAllDay:k.isAllDay,start:p.start,end:p.end},b,g);u._updateEvent(null,k,w)}u._isMultiDrag&&(u.dataSource.sync(),u._isMultiDrag=!1)}t.currentTarget.removeClass("k-event-active"),this.cancelHold(),f=[],v=[]})).bind("dragcancel",(function(){u.view()._removeMoveHint(),this.cancelHold(),f=[],v=[]})),u._moveDraggable.bind("hold",(function(e){u._isTouch(e)&&(u.element.find(".k-event-active").removeClass("k-event-active"),u.options.selectable&&u._createSelection(e.currentTarget),e.currentTarget.addClass("k-event-active"))})))},_resizable:function(){var t,n,a,o,r,s=this,l=0;function d(e){var t={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(var i in t)if(e.hasClass(i))return t[i]}s._isMobile()&&i.support.mobileOS.android&&(l=5),s._resizeDraggable=new i.ui.Draggable(s.element,{distance:l,filter:".k-resize-handle",autoScroll:!0,dragstart:function(l){var d=e(l.currentTarget).closest(".k-event").attr(i.attr("uid")),c=s.view();s._dragging=!0,a=s.occurrenceByUid(d),o=a.clone(),c._updateEventForResize(o),r=c._slotByPosition(l.x.startLocation,l.y.startLocation),s.trigger("resizeStart",{event:a})&&l.preventDefault(),t=i.date.toUtcTime(o.start),n=i.date.toUtcTime(o.end)},drag:function(l){if(r){var c=d(e(l.currentTarget)),u=s.view(),p=u._slotByPosition(l.x.location,l.y.location);if(p&&r.groupIndex==p.groupIndex){r=p;var f=t,v=n;"south"==c?!r.isDaySlot&&r.end-i.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(n=o.isAllDay?r.startOffset(l.x.location,l.y.location,s.options.snap):r.endOffset(l.x.location,l.y.location,s.options.snap)):"north"==c?!r.isDaySlot&&i.date.toUtcTime(o.end)-r.start>=u._timeSlotInterval()&&(t=r.startOffset(l.x.location,l.y.location,s.options.snap)):"east"==c?r.isDaySlot&&i.date.toUtcTime(i.date.getDate(r.endDate()))>=i.date.toUtcTime(i.date.getDate(o.start))?n=o.isAllDay?r.startOffset(l.x.location,l.y.location,s.options.snap):r.endOffset(l.x.location,l.y.location,s.options.snap):!r.isDaySlot&&r.end-i.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(n=r.endOffset(l.x.location,l.y.location,s.options.snap)):"west"==c&&(r.isDaySlot&&i.date.toUtcTime(i.date.getDate(o.end))>=i.date.toUtcTime(i.date.getDate(r.startDate()))||!r.isDaySlot&&i.date.toUtcTime(o.end)-r.start>=u._timeSlotInterval())&&(t=r.startOffset(l.x.location,l.y.location,s.options.snap)),s.trigger("resize",{event:a,slot:{element:r.element,start:r.startDate(),end:r.endDate()},start:i.timezone.toLocalDate(t),end:i.timezone.toLocalDate(n),resources:u._resourceBySlot(r)})?(t=f,n=v):u._updateResizeHint(o,r.groupIndex,t,n)}}},dragend:function(l){var c=e(l.currentTarget),u=new Date(o.start.getTime()),p=new Date(o.end.getTime()),f=d(c);s._dragging=!1,s.view()._removeResizeHint(),"south"==f?p=i.timezone.toLocalDate(n):"north"==f?u=i.timezone.toLocalDate(t):"east"==f?p=r.isDaySlot?i.date.getDate(i.timezone.toLocalDate(n)):i.timezone.toLocalDate(n):"west"==f&&(r.isDaySlot?((u=new Date(i.timezone.toLocalDate(t))).setHours(0),u.setMinutes(0)):u=i.timezone.toLocalDate(t)),!s.trigger("resizeEnd",{event:a,slot:{element:r.element,start:r.startDate(),end:r.endDate()},start:u,end:p,resources:s.view()._resourceBySlot(r)})&&p.getTime()>=u.getTime()&&(o.start.getTime()==u.getTime()&&o.end.getTime()==p.getTime()||(s.view()._updateEventForResize(a),s._updateEvent(f,a,{start:u,end:p}))),r=null,a=null},dragcancel:function(){s._dragging=!1,s.view()._removeResizeHint(),r=null,a=null}})},_updateEvent:function(e,t,n){var o=this,s=function(e,t){var i;try{o._preventRefresh=!0,e.update(n),o._convertDates(e),i=e.start,e.duration()%a==0&&0===i.getHours()&&0===i.getMinutes()&&0===i.getSeconds()&&0===i.getMilliseconds()&&e.set("isAllDay",!0)}finally{o._preventRefresh=!1}o.trigger(V,{event:e})||(t&&t(),o._isMultiDrag||o.dataSource.sync())},l=function(e){return e.recurrenceRule?o.dataSource.getByUid(e.uid):o.dataSource.get(e.recurrenceId)};if(t.recurrenceRule||t.isOccurrence()){var d=o.options.messages.recurrenceMessages;o._showRecurringDialog(t,(function(){var e,i=l(t),n=i.toOccurrence({start:t.start,end:t.end});e=n.uid,s(o.dataSource.add(n),(function(){o._convertDates(i),o._selection&&o._selection.events.push(e)}))}),(function(){var a=l(t);if("south"==e||"north"==e){if(n.start){var d=i.date.getDate(a.start);i.date.setTime(d,r(n.start)),n.start=d}if(n.end){var c=i.date.getDate(a.end);i.date.setTime(c,r(n.end)),n.end=c}}o.dataSource._removeExceptions(a),s(a)}),{title:d.editWindowTitle,text:d.editRecurring?d.editRecurring:K,occurrenceText:d.editWindowOccurrence,seriesText:d.editWindowSeries})}else s(o.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+i.attr("uid")+"]"),this.dataSource.getByUid(t.attr(i.attr("uid")))},showDialog:function(e){this._editor.showDialog(e)},focus:function(){this.wrapper.focus()},_confirmation:function(e,t,n){var a=this.options.editable;if(!0===a||!1!==a.confirmation){var o=this.options.messages,r=o.deleteWindowTitle,s=typeof a.confirmation===p?a.confirmation:o.editable.confirmation;if(this._isEditorOpened()&&t.isRecurring()){var l=this.options.messages.recurrenceMessages;r=l.deleteWindowTitle,s=t.isException()||t.isNew()?l.deleteRecurringConfirmation?l.deleteRecurringConfirmation:"Are you sure you want to delete this event occurrence?":l.deleteSeriesConfirmation?l.deleteSeriesConfirmation:"Are you sure you want to delete the whole series?",n&&(r=l.resetSeriesWindowTitle,s=l.resetSeriesConfirmation?l.resetSeriesConfirmation:"Are you sure you want to reset the whole series?")}var d=[{name:"destroy",text:n?o.resetSeries:o.destroy,click:function(){e()}}];this._isMobile()&&i.Pane||d.push({name:"canceledit",text:o.cancel,click:function(){e(!0)}}),this._unbindResize(),this.showDialog({model:t,text:s,title:r,buttons:d}),this._bindResize()}else e()},addEvent:function(e){var t,i=this._editor.editable,n=this.dataSource;e=e||{},!this.trigger("add",{event:e})&&(i&&i.end()||!i)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),(t=n.add(e))&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e=this,t=e._editor,i=e.dataSource;if(t){var n,a,o,r=t.editable,s=t.container,l=e._modelForContainer(s);if(s&&r&&r.end()&&!e.trigger(V,{container:s,event:l})){if(!l.isOccurrence()&&l.recurrenceException&&!l.recurrenceRule){for(a=(n=i.data()).length-1;a>=0;a-=1)(o=n[a])&&o.recurrenceId===l.id&&i.remove(o);l.set("recurrenceException","")}l.dirty||l.isOccurrence()||e._convertDates(l,"remove"),i.sync()}}},cancelEvent:function(){var e,t=this._editor,i=t.container;i&&((e=this._modelForContainer(i))&&e.isOccurrence()&&(this._convertDates(e,"remove"),this._convertDates(this.dataSource.get(e.recurrenceId),"remove")),this.dataSource.cancelChanges(e),t.close())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){this._preventRefresh=!0,this._unbindResize(),this._createPopupEditor(e),this._bindResize()},_editRecurringDialog:function(e){var t=this,i=t.options.messages.recurrenceMessages;t._showRecurringDialog(e,(function(){e.isException()?t._editEvent(e):t.addEvent(e)}),(function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)}),{title:i.editWindowTitle,text:i.editRecurring?i.editRecurring:K,occurrenceText:i.editWindowOccurrence,seriesText:i.editWindowSeries})},_showRecurringDialog:function(e,t,i,n){var a=this.options.editable,o=m(a)?a.editRecurringMode:"dialog";"occurrence"===o||this._isMultiDrag?t():"series"===o?i():(this._unbindResize(),this.showDialog({model:e,title:n.title,text:n.text,buttons:[{text:n.occurrenceText,click:t},{text:n.seriesText,click:i}]}),this._bindResize())},_createButton:function(e){var t=e.template||'<button type="button" class="k-button #=className#" #=attr#><span class="k-button-text">#=text#</span></button>',n=typeof e===p?e:e.name||e.text,a={className:"k-scheduler-"+(n||"").replace(/\s/g,""),text:n,attr:""};if(!(n||m(e)&&e.template))throw new Error("Custom commands should have name specified");return m(e)?(e.className&&(e.className+=" "+a.className),"edit"===n&&m(e.text)&&((e=g(!0,{},e)).text=e.text.edit),a=g(!0,a,ae[n],e)):a=g(!0,a,ae[n]),i.template(t)(a)},_convertDates:function(e,t){var n=this.dataSource.reader.timezone,a=e.startTimezone,o=e.endTimezone,r=e.start,s=e.start;t=t||"apply",a=a||o,o=o||a,a&&(n?"apply"===t?(r=i.timezone.convert(e.start,n,a),s=i.timezone.convert(e.end,n,o)):(r=i.timezone.convert(e.start,a,n),s=i.timezone.convert(e.end,o,n)):(r=i.timezone[t](e.start,a),s=i.timezone[t](e.end,o)),e._set("start",r),e._set("end",s))},_createEditor:function(){var e,t=this;(e=this._isMobile()&&i.Pane?t._editor=new ce(this.wrapper,g({},this.options,{target:this,timezone:t.dataSource.reader.timezone,resources:t.resources,createButton:_(this._createButton,this)})):t._editor=new ue(this.wrapper,g({},this.options,{target:this,createButton:_(this._createButton,this),timezone:t.dataSource.reader.timezone,resources:t.resources}))).bind("cancel",(function(e){t.trigger("cancel",{container:e.container,event:e.model})?e.preventDefault():(t._preventRefresh=!1,t.cancelEvent(),t._attemptRefresh&&t.refresh(),t.focus())})),e.bind("edit",(function(e){t.trigger(B,{container:e.container,event:e.model})&&e.preventDefault()})),e.bind("save",(function(){t._preventRefresh=!1,t.saveEvent()})),e.bind("remove",(function(e){t._preventRefresh=!1,t.removeEvent(e.model)})),e.bind("resetSeries",(function(e){t._confirmation((function(i){t._preventRefresh=!1,i||(t.dataSource._removeExceptions(e.model),t.saveEvent())}),e.model,!0)}))},_createPopupEditor:function(e){var t=this._editor;e.isNew()&&!e.isOccurrence()||(e.isOccurrence()&&this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e),this._convertDates(e)),this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,i="string"==typeof e?t.occurrenceByUid(e):e;i&&(i.isRecurring()?t._deleteRecurringDialog(i):t._confirmation((function(e){e||t._removeEvent(i)}),i))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=Z(this._data,e)),t},occurrencesInRange:function(e,t){return new i.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger(M,{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t,i,n,a,o,r,s=this,l=e,d=s.options.editable,c=m(d)?d.editRecurringMode:"dialog";t=function(){var e=l.recurrenceId?l:l.toOccurrence(),t=s.dataSource.get(e.recurrenceId);s._convertDates(t),s._removeEvent(e)},i=function(){l.recurrenceId&&(l=s.dataSource.get(l.recurrenceId)),s._removeEvent(l)},n=function(){s.dataSource.remove(l),s.dataSource.sync()},("dialog"!=c||s._isEditorOpened())&&(a=function(){s._confirmation((function(e){e||t()}),l)},o=function(){s._confirmation((function(e){e||i()}),l)},r=function(){s._confirmation((function(e){e||n()}),l)});var u=o||i,p=a||t,f=r||n;if(s._isEditorOpened())e.isException()?p():e.isNew()?f():u();else{var v=s.options.messages.recurrenceMessages;s._showRecurringDialog(e,p,u,{title:v.deleteWindowTitle,text:v.deleteRecurring?v.deleteRecurring:"Do you want to delete only this event occurrence or the whole series?",occurrenceText:v.deleteWindowOccurrence,seriesText:v.deleteWindowSeries})}},_isEditorOpened:function(){return!!this._editor.container},_unbindView:function(e){var t=this;t.angular("cleanup",(function(){return{elements:t.items()}})),e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind(M,t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind(M,t._viewRemoveHandler),t._viewAddHandler&&e.unbind("add",t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind("add",this._viewAddHandler),t._viewEditHandler&&e.unbind(B,t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind(B,this._viewEditHandler)),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){if(e.action)t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:e.action,date:e.date})||t.date(e.date);else if(e.view){var i="isWorkDay"in e,n=i?"changeWorkDay":"changeView";t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:n,date:e.date})||(i&&(t._workDayMode=e.isWorkDay),t._selectView(e.view),t.date(e.date))}},e.bind("navigate",t._viewNavigateHandler),t._viewActivateHandler&&e.unbind("activate",t._viewActivateHandler),t._viewActivateHandler=function(){t._selection&&(this.constrainSelection(t._selection),t._select(),t._adjustSelectedDate())},e.bind("activate",t._viewActivateHandler)},_selectView:function(e){var t=this;if(e&&t.views[e])if(t._selectedView&&t._unbindView(t._selectedView),t._selectedView=t._renderView(e),t._selectedViewName=e,t._viewsCount>1&&!t._isMobile()){var n=t.toolbar.find(".k-views-dropdown"),a=t.toolbar.find(".k-scheduler-views > .k-button");0===t.toolbar.find(".k-views-dropdown").length&&(t.toolbar.find(".k-scheduler-views-wrapper").prepend(U({views:t.views,view:e,ns:i.ns})),n=t.toolbar.find(".k-views-dropdown")),n.val(e),a.removeClass("k-state-selected"),a.filter(".k-view-"+e.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected")}else t.toolbar.find(".k-scheduler-mobile-views").find("[value="+e.replace(/\./g,"\\.")+"]").prop("selected","selected")},view:function(e){var t=this;return e?(t._selectView(e),void t.rebind()):t._selectedView},viewName:function(){return this.view().name},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),(i.support.mouseAndTouchPresent||i.support.pointers)&&(t.content.css("-ms-touch-action","pinch-zoom"),t.content.css("touch-action","pinch-zoom")),this._model.set("formattedDate",t.dateForTitle()),this._model.set("formattedShortDate",t.shortDateForTitle()),this._model.set("formattedMobileDate",t.mobileDateForTitle?t.mobileDateForTitle():t.shortDateForTitle()),this._model.set("formattedYear",i.format("{0:yyyy}",t.startDate())),t},resize:function(e){var t=this.getSize(),i=this._size,n=this.view();n&&n.groups&&(!e&&i&&t.width===i.width&&t.height===i.height||(this.refresh({action:"resize"}),this._size=t))},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,n=t.start;n&&!i.date.isInDateRange(e,o(n),o(t.end))&&e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())},_initializeView:function(e){var t=this.views[e];if(t){var n=m(t),a={},o=t.type;if(typeof o===p&&(o=i.getter(t.type)(window)),n&&t.workDays&&t.workDays.length&&(a.workDays=t.workDays),!o)throw new Error("There is no such view");t=new o(this.wrapper,function(e,t){for(var i in delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,t)e[i]=t[i];return e}(g(!0,{},this.options,n?t:{},{resources:this.resources,date:this.date(),startTime:i.parseDate(t.startTime)||i.parseDate(this.options.startTime),endTime:i.parseDate(t.endTime)||i.parseDate(this.options.endTime),showWorkHours:this._workDayMode}),a))}return t},_views:function(){var e,t,i,n,a,o,r,s=this.options.views;for(this.views={},this._viewsCount=0,o=0,r=s.length;o<r;o++){var l=!1;e=s[o],(n=m(e))?typeof(a=e.type?e.type:e)!==p&&(a=e.name||e.title,l=!0):a=e,(t=fe[a])&&!l&&(e.type=t.type,t.title=this.options.messages.views[a],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=g({title:a},t,n?e:{}),a&&(this.views[a]=e,this._viewsCount++,i&&!e.selected||(i=a))}i&&(this._selectedViewName=i)},rebind:function(){var t=this,i=t.resources,n=[];t._preventRebind?t._preventRebind=!1:!1===t.options.autoBind&&i&&i.length>0?(i.forEach((function(e){0===e.dataSource.data().length&&(t._preventRebind=!0,n.push(e.dataSource.fetch()))})),e.when.apply(null,n).then((function(){t.dataSource.fetch(),t._preventRebind=!1}))):t.dataSource.fetch()},_dataSource:function(){var e=this,t=e.options,n=t.dataSource;n=b(n)?{data:n}:n,!t.timezone||n instanceof ne?n instanceof ne&&(t.timezone=n.options.schema?n.options.schema.timezone:""):n=g(!0,n,{schema:{timezone:t.timezone}}),e.dataSource&&e._refreshHandler?e.dataSource.unbind(E,e._refreshHandler).unbind(R,e._progressHandler).unbind(C,e._errorHandler):(e._refreshHandler=_(e.refresh,e),e._progressHandler=_(e._requestStart,e),e._errorHandler=_(e._error,e)),e.dataSource=i.data.SchedulerDataSource.create(n).bind(E,e._refreshHandler).bind(R,e._progressHandler).bind(C,e._errorHandler),e.options.dataSource=e.dataSource},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_progress:function(e){var t=this.element.find(".k-scheduler-content");i.ui.progress(t,e)},_resources:function(){for(var t=this,i=t.options.resources,n=[],a=0;a<i.length;a++){var o=i[a],r=o.field,s=o.name||r,l=o.dataSource;if(!r||!l)throw new Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');t.resources.push({field:r,name:s,title:o.title||r,dataTextField:o.dataTextField||"text",dataValueField:o.dataValueField||"value",dataColorField:o.dataColorField||"color",valuePrimitive:null==o.valuePrimitive||o.valuePrimitive,multiple:o.multiple||!1,dataSource:t._resourceDataSource(l,s,n)})}t.options.autoBind?e.when.apply(null,n).then((function(){t.view(t._selectedViewName)})):t._selectView(t._selectedViewName)},_resourceDataSource:function(e,t,n){var a=this,o=b(e)?{data:e}:e,r=i.data.DataSource.create(o);return a.options.autoBind?n.push(r.fetch((function(){a._bindResourceEvents(this,t)}))):a._bindResourceEvents(r,t),r},_bindResourceEvents:function(e,t){var i=this,n=i.options.group&&i.options.group.resources.length&&i.options.group.resources.indexOf(t)>-1;!i._resourceRefreshHandler&&n&&(i._resourceRefreshHandler=_(i._refreshResource,i),i._resourceErrorHandler=_(i._error,i)),n&&e.bind(E,i._resourceRefreshHandler).bind(C,i._resourceErrorHandler)},_refreshResource:function(){var e=this;e._editor&&e._editor.editable||e._preventRefresh||e.view(e._selectedViewName)},_initModel:function(){var e=this;e._model=i.observable({selectedDate:new Date(this.options.date),formattedDate:"",formattedShortDate:""}),e._model.bind("change",(function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)}))},_wrapper:function(){var e=this,t=e.options,i=t.height,n=t.width;e.wrapper=e.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",!0),e._isMobile()&&e.wrapper.addClass("k-scheduler-mobile"),i&&e.wrapper.height(i),n&&e.wrapper.width(n)},date:function(e){return null!=e&&o(e)>=o(this.options.min)&&o(e)<=o(this.options.max)&&this._model.set("selectedDate",e),o(this._model.get("selectedDate"))},_toolbar:function(){var t=this,n=t.options,a=[];n.toolbar&&(a=e.isArray(n.toolbar)?n.toolbar:[n.toolbar]);var o=this._isMobile()?$:q,r=e(o({messages:n.messages,pdf:e.grep(a,(function(e){return"pdf"==e||"pdf"==e.name})).length>0,search:e.grep(a,(function(e){return"search"==e||"search"==e.name})).length>0,ns:i.ns,view:t._selectedViewName,views:t.views,viewsCount:t._viewsCount,editable:t.options.editable}));t.wrapper.append(r),t.toolbar=r,i.bind(t.toolbar,t._model),r.on(y+w,".k-pdf",(function(e){e.preventDefault(),t.saveAsPDF()})),r.on("input"+w,".k-scheduler-search-input",i.throttle((function(e){t.dataSource.filter({logic:"or",filters:[{field:"title",operator:"contains",value:e.target.value},{field:"description",operator:"contains",value:e.target.value}]})}),250)),r.on(y+w,".k-create-event",(function(e){e.preventDefault(),t.addEvent()})),r.on(y+w,".k-nav-calendar",(function(e){e.preventDefault(),t._showCalendar(e.target)})),r.on(y+w,".k-scheduler-navigation > .k-button",(function(n){var a=e(this),o=new Date(t.date()),r="",s=new Date,l=t.options.timezone;if(!e(n.target).is("input")){if(n.preventDefault(),a.hasClass("k-nav-today"))if(r="today",l){var d=i.timezone.offset(s,l);o=i.timezone.convert(s,s.getTimezoneOffset(),d)}else o=s;else a.hasClass("k-nav-next")?(r="next",o=t.view().nextDate()):a.hasClass("k-nav-prev")&&(r="previous",o=t.view().previousDate());t.trigger("navigate",{view:t._selectedViewName,action:r,date:o})||t.date(o)}})),r.on(y+w,".k-nav-current",(function(e){e.preventDefault(),t._isMobile()||t._showCalendar()})),r.on(y+w,".k-scheduler-views > .k-button, .k-scheduler-refresh",(function(n){n.preventDefault();var a=e(this).attr(i.attr("name"));t.toolbar.find(".k-scheduler-views > .k-button").removeClass(A),t.trigger("navigate",{view:a,action:"changeView",date:t.date()})||t.view(a)})),r.on(E+w,".k-views-dropdown, .k-scheduler-mobile-views",(function(){var e=this.value;t.trigger("navigate",{view:e,action:"changeView",date:t.date()})||t.view(e)}))},_showCalendar:function(t){var i=this,n=t||i.toolbar.find(".k-nav-current"),a=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"></div></div>');i.popup||(i.popup=new f(a,{anchor:n,activate:function(){i.popup&&i.calendar&&(i.popup._toggleResize(!1),i.calendar.element.find("table").focus(),i.popup._toggleResize(!0))},open:function(){i.calendar||(i.calendar=new v(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();i.trigger("navigate",{view:i._selectedViewName,action:"changeDate",date:e})||(i.date(e),i.popup.close()),i._isMobile()||(i._selectedView.element.focus(),i.toolbar.find(".k-nav-current").focus().addClass(A))},min:i.options.min,max:i.options.max})),i.calendar.element.on("keydown"+w,(function(e){e.keyCode!==l.ESC&&e.keyCode!==l.TAB||(i.popup.close(),i._selectedView.element.focus(),i.toolbar.find(".k-nav-current").focus().addClass(A))})),i.calendar.value(i.date())},copyAnchorStyles:!1})),i.popup.open()},refresh:function(e){var t=this,i=this.view(),n=e&&"itemchange"===e.action&&(this._editor.editable||this._preventRefresh)||"signalr"===this.dataSource.options.type&&this._preventRefresh;this._progress(!1),this.angular("cleanup",(function(){return{elements:t.items()}})),e=e||{},i&&(n?this._attemptRefresh="signalr"===this.dataSource.options.type:this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(e&&"resize"===e.action||!this._editor||this._editor.close(),this._data=this.dataSource.expand(i.startDate(),i.visibleEndDate()),i.refreshLayout(),i.render(this._data),this.trigger("dataBound"),this._attemptRefresh=!1))},slotByPosition:function(e,t){var i=this.view();if(!i._slotByPosition)return null;var n=i._slotByPosition(e,t);return n?{startDate:n.startDate(),endDate:n.endDate(),groupIndex:n.groupIndex,element:n.element,isDaySlot:n.isDaySlot}:null},slotByElement:function(t){var i=e(t).offset();return this.slotByPosition(i.left,i.top)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}}),fe={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"}};if(d.plugin(pe),i.PDFMixin){i.PDFMixin.extend(pe.prototype);var ve="k-scheduler-pdf-export";pe.fn._drawPDF=function(t){var i=this.wrapper,n=i[0].style.cssText;i.css({width:i.width(),height:i.height()}),i.addClass(ve);var a=this,o=new e.Deferred,r=i.find(".k-scheduler-content").find("table").css("table-layout","auto");return setTimeout((function(){r.css("table-layout","fixed"),a.resize(!0),a._drawPDFShadow({},{avoidLinks:a.options.pdf.avoidLinks}).done((function(e){var i={page:e,pageNumber:1,progress:1,totalPages:1};t.notify(i),o.resolve(i.page)})).fail((function(e){o.reject(e)})).always((function(){i[0].style.cssText=n,i.removeClass(ve),a.resize(!0),a.resize(!0)}))})),o}}var he=c.extend({init:function(e,t){var n=this,a=i.timezone.windows_zones;if(!a||!i.timezone.zones_titles)throw new Error("kendo.timezones.min.js is not included.");c.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new i.data.Query(a),n._zoneTitleId=i.guid(),n._zoneTitlePicker(),n._zonePicker(),n._zoneTitle.bind("cascade",(function(){this.value()||n._zone.wrapper.hide()})),n._zone.bind("cascade",(function(){n._value=this.value(),n.trigger("change")})),n.value(n.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var t=this,n=e('<input id="'+t._zoneTitleId+'" aria-label="'+t.options.title+'"/>').appendTo(t.wrapper);t._zoneTitle=new i.ui.DropDownList(n,{dataSource:i.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:t.options.optionLabel})},_zonePicker:function(){var t=this,n=e('<input aria-label="'+t.options.title+'"/>').appendTo(this.wrapper);t._zone=new i.ui.DropDownList(n,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){c.fn.destroy.call(this),i.destroy(this.wrapper)},value:function(e){var i,n=this;if(e===t)return n._value;(i=n._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0])?(n._zoneTitle.value(i.other_zone),n._zone.value(i.zone)):n._zoneTitle.select(0)}});d.plugin(he);var me=i.template('<option value="#=other_zone#">#=name#</option>'),ge=i.template('<option value="#=zone#">#=territory#</option>'),_e=c.extend({init:function(e,t){var n=this,a=i.timezone.windows_zones;if(!a||!i.timezone.zones_titles)throw new Error("kendo.timezones.min.js is not included.");c.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new i.data.Query(a),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:["change"],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,ge))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,i){var n=0,a="",o=e.length;for(i&&(a+=t({other_zone:"",name:i}));n<o;n++)a+=t(e[n]);return a},_zoneTitlePicker:function(){var t=this,n=t._options(i.timezone.zones_titles,me,t.options.optionLabel);t._zoneTitle=e("<select>"+n+"</select>").appendTo(t.wrapper).change((function(){var e=this.value,i=t._zonePickerLabel,n=i.find("select");t._bindZones(e),e&&n.children().length>1?i.show():i.hide(),t._value=t._zone[0].value,t.trigger("change")}))},_zonePicker:function(){var t=this;t._zonePickerLabel=e("<li class='k-item k-listgroup-item k-zonepicker' style='display:none'><label class='k-label k-listgroup-form-row'><span class='k-item-title k-listgroup-form-field-label'></span><div class='k-listgroup-form-field-wrapper'></div></label></li>"),t._zone=e("<select></select>").appendTo(t._zonePickerLabel.find("div")).change((function(){t._value=this.value,t.trigger("change")})),this.wrapper.closest(".k-item").after(t._zonePickerLabel),t._bindZones(t._zoneTitle.val()),t._value=t._zone[0].value},destroy:function(){c.fn.destroy.call(this),i.destroy(this.wrapper)},value:function(e){var i,n=this,a=n._zone,o="",r="";if(e===t)return n._value;(i=n._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0])&&(r=i.zone,o=i.other_zone),n._zoneTitle.val(o),n._bindZones(o),a.val(r),(r=a[0].value)&&a.children.length>1?n._zonePickerLabel.show():n._zonePickerLabel.hide(),n._value=r}});d.plugin(_e)}(window.kendo.jQuery),window.kendo})?n.apply(t,a):n)||(e.exports=o)},1375:function(e,t){e.exports=i(5134)},1376:function(e,t){e.exports=i(8691)},1377:function(e,t){e.exports=i(1034)},1378:function(e,t){e.exports=i(4302)},1379:function(e,t){e.exports=i(1754)},1380:function(e,t){e.exports=i(2483)}})}}]);